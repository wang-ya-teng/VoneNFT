(this["webpackJsonpdidi-nft"]=this["webpackJsonpdidi-nft"]||[]).push([[12],{2617:function(e,t,c){},2631:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return N}));var a=c(11),n=c(1),r=c.n(n),s=c(9),i=c(34),o=(c(2617),c(2590)),l=c(2588),j=c(1101),d=c(2585),b=c(115),u=c(0),O=c(68),p=c(363),x=c(1052),h=c(23),m=c(362),f=c(89),v=c(263),g=c(3);function N(){var e=o.a.TextArea,t=Object(u.useState)([]),c=Object(i.a)(t,2),n=c[0],N=c[1],w=Object(u.useState)(!1),k=Object(i.a)(w,2),y=k[0],z=k[1],L=Object(u.useState)(!1),I=Object(i.a)(L,2),A=I[0],F=I[1],R=Object(O.c)((function(e){return e})),C=R.walletAddress,E=R.creativeStudio,S=R.orbitdb,Y=R.chainId,G=R.collectionInfo,M=R.colError,U=Object(u.useState)([]),q=Object(i.a)(U,2),D=q[0],P=q[1],B=Object(f.g)(),J=Object(O.b)(),Q=l.a.useForm(),T=Object(i.a)(Q,1)[0];Object(u.useEffect)((function(){P(G)}),[G]);var W=Object(p.a)({accept:"image/*",onDrop:function(e){e[0].size>2048e3?j.b.error("Logo\u6700\u5927\u4e3a2MB!"):N(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),H=W.getRootProps,K=W.getInputProps,X=Object(u.useCallback)(Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N([]),T.resetFields();case 2:case"end":return e.stop()}}),e)}))),[T]);Object(u.useEffect)((function(){"1"===M&&X()}),[M,X]);var _=function(){var e=Object(s.a)(r.a.mark((function e(t){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z(!0),!(n.length>0)){e.next=10;break}if(!(n[0].size<=2048e3)){e.next=9;break}return e.next=5,Object(m.a)(n);case 5:c=e.sent,console.log(c),e.next=10;break;case 9:j.b.warn("Logo\u6700\u5927\u4e3a2MB");case 10:return e.next=12,J(Object(h.Q)(t)).then(function(){var e=Object(s.a)(r.a.mark((function e(n){var s,i,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.status){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,E.methods.getCollectionsByUser(C).call();case 4:return s=e.sent,i=s[s.length-1],o=Object(a.a)(Object(a.a)({},t),{},{logo:c||"",id:i.id,contractAddress:i.contractAddress,isERC1155:i.isERC1155,creator:i.creator}),D.push(o),"/orbitdb/zdpuAoo1YYEnqQWrj5UezXyhMyTcfFDYo85a7Hw8ce9RKw6p2/dev",e.next=11,Object(v.a)("/orbitdb/zdpuAoo1YYEnqQWrj5UezXyhMyTcfFDYo85a7Hw8ce9RKw6p2/dev",S);case 11:if(!(l=e.sent)){e.next=18;break}return e.next=15,l.set("".concat(C,"_").concat(Y),D);case 15:return e.next=17,l.set("".concat(i.contractAddress,"_").concat(Y),o);case 17:J(Object(h.cb)(D));case 18:B.push("/collection/index/".concat(C));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.submit(),F(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"create-collection",children:Object(g.jsxs)("div",{children:[Object(g.jsx)(x.a,{visible:y,handleOk:V,setIsDeploying:z,loading:A}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{className:"create-collection-title",children:"\u521b\u5efa\u4f5c\u54c1\u96c6"}),Object(g.jsxs)("div",{className:"create-collection-upload-image",children:[Object(g.jsx)("div",{className:"create-collection-area-upload",children:Object(g.jsx)("div",{children:Object(g.jsx)("div",{className:"create-collection-dropzone",children:n[0]?Object(g.jsx)("div",{className:"preview",children:Object(g.jsx)("img",{className:"collection-img",src:n[0].preview,alt:"priview",style:{width:"90%",maxWidth:"208px",height:"208px",objectFit:"contain"}})}):Object(g.jsx)("p",{className:"textmode",style:{textAlign:"center"},children:"\u4e0a\u4f20LOGO"})})})}),Object(g.jsxs)("div",{className:"create-collection-upload-desc",children:[Object(g.jsx)("div",{className:"create-collection-upLoad-title",children:"\u4e0a\u4f20LOGO"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{children:"\u652f\u6301JPG, PNG, GIF"}),Object(g.jsx)("div",{children:"*\u63a8\u8350\u5c3a\u5bf8400*400\uff0c\u4e0d\u8d85\u8fc72M"})]}),Object(g.jsxs)("div",Object(a.a)(Object(a.a)({},H({className:"create-collection-dropzone"})),{},{children:[Object(g.jsx)("input",Object(a.a)({},K())),Object(g.jsx)("div",{className:"create-collection-upLoad-btn",children:"\u4e0a\u4f20"})]}))]})]}),Object(g.jsx)("div",{children:Object(g.jsx)("div",{className:"create-collection-input-area",children:Object(g.jsxs)(l.a,{onFinish:_,form:T,colon:!1,children:[Object(g.jsx)(l.a.Item,{label:Object(g.jsx)("div",{className:"create-collection-input-name",children:"\u4f5c\u54c1\u96c6\u540d\u79f0"}),name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f5c\u54c1\u96c6\u540d\u79f0!"}],children:Object(g.jsx)(o.a,{className:"create-collection-input-value",placeholder:"\u8bf7\u8f93\u5165\u4f5c\u54c1\u96c6\u540d\u79f0",size:"large",autoComplete:"off",maxLength:"50"})}),Object(g.jsx)("div",{className:"mt25"}),Object(g.jsx)(l.a.Item,{label:Object(g.jsx)("div",{className:"create-collection-input-name",children:"\u4f5c\u54c1\u96c6\u4ee3\u7801"}),name:"symbol",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f5c\u54c1\u96c6\u4ee3\u7801!"}],children:Object(g.jsx)(o.a,{className:"create-collection-input-value",placeholder:"\u8bf7\u8f93\u5165\u4f5c\u54c1\u96c6\u4ee3\u7801",size:"large",autoComplete:"off",maxLength:"50"})}),Object(g.jsx)("div",{className:"mt25"}),Object(g.jsx)(l.a.Item,{className:"description",name:"description",label:Object(g.jsx)("div",{className:"create-collection-input-name mr11",children:"\u7b80\u4ecb"}),children:Object(g.jsx)(e,{className:"create-collection-input-value",autoSize:{minRows:2},placeholder:"\u8bf7\u8f93\u5165\u7b80\u4ecb",size:"large",maxLength:"500"})}),Object(g.jsx)(l.a.Item,{style:{margin:"40px 0 0 165px"},children:Object(g.jsx)(d.a,{justify:"center",children:Object(g.jsx)(b.a,{className:"btn-create-item",shape:"round",size:"large",onClick:function(){return V()},children:"\u521b\u5efa"})})})]})})})]})]})})})}}}]);
//# sourceMappingURL=12.b3e4735f.chunk.js.map