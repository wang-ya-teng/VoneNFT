(this["webpackJsonpdidi-nft"]=this["webpackJsonpdidi-nft"]||[]).push([[5],{2606:function(e,t,n){},2622:function(e,t,n){},2623:function(e,t,n){},2624:function(e,t,n){},2625:function(e,t,n){},2626:function(e,t,n){},2635:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ie}));var r=n(1),c=n.n(r),a=n(9),s=n(34),i=n(1062),l=n(2636),o=n(163),d=n(0),b=n(68),j=n(89),u=n(130),x=n(639),p=n(463),h=n(295),O=n(462),f=n.n(O),m=n(638),v=n(23),g=n(67);function y(){return(y=Object(a.a)(c.a.mark((function e(t,n,r,a,s,i,l,o){var d,b,j,u,x,O,y,k,w;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=44;break}return e.next=3,n.methods.isERC1155(r).call();case 3:return d=e.sent,e.next=6,g.a.dispatch(Object(v.T)(r,null));case 6:if(j=e.sent.collection.name,!d){e.next=26;break}return e.next=10,new t.eth.Contract(p.abi,r);case 10:return u=e.sent,e.next=13,u.methods.uri(a).call();case 13:if(b=e.sent,!s){e.next=24;break}x=0;case 16:if(!(x<s.length)){e.next=24;break}if((O=s[x]).addressToken.toLowerCase()!==r.toLowerCase()||parseInt(O.index)!==parseInt(a)){e.next=21;break}return i(O.value),e.abrupt("break",24);case 21:x++,e.next=16;break;case 24:e.next=33;break;case 26:return e.next=28,new t.eth.Contract(h.abi,r);case 28:return y=e.sent,e.next=31,y.methods.tokenURI(a).call();case 31:b=e.sent,o(b);case 33:return e.prev=33,e.next=36,f.a.get(b);case 36:k=e.sent,w=k.data,l({name:w.name||"Unnamed",description:w.description||"",image:w.image||m.a,nameCollection:j,attributes:w.attributes||[]}),e.next=44;break;case 41:e.prev=41,e.t0=e.catch(33),l({name:"Unnamed",description:"",image:m.a,nameCollection:"Unnamed",attributes:[]});case 44:case"end":return e.stop()}}),e,null,[[33,41]])})))).apply(this,arguments)}var k=n(312);function w(e,t,n,r,c,a,s){return N.apply(this,arguments)}function N(){return(N=Object(a.a)(c.a.mark((function e(t,n,r,a,s,i,l){var o,d,b,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],d=0;case 2:if(!(d<t.length)){e.next=10;break}if((b=t[d]).addressToken.toLowerCase()!==n.toLowerCase()){e.next=7;break}return o=b.tokens,e.abrupt("break",10);case 7:d++,e.next=2;break;case 10:return o=o.filter((function(e){return parseInt(e.index)===parseInt(r)})),e.next=13,Object(k.b)(n,r,a,s._address);case 13:j=e.sent,i(j.ownersOf1155),l(o);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=n(11);function I(e,t,n,r,c,a,s,i,l,o,d,b,j,u){return S.apply(this,arguments)}function S(){return(S=Object(a.a)(c.a.mark((function e(t,n,r,a,s,i,l,o,d,b,j,u,x,p){var O,f,m,v,g,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o&&i&&n&&s)){e.next=42;break}return e.prev=1,e.next=4,new o.eth.Contract(h.abi,t);case 4:if(O=e.sent,"null"!==p){e.next=12;break}return e.next=8,O.methods.ownerOf(r).call();case 8:f=e.sent,b([{owner:f,totalSupply:1,value:1}]),e.next=16;break;case 12:return e.next=14,i.methods.getSellOrderById(p).call();case 14:(m=e.sent).isActive?(f=m.seller,b([{owner:f,totalSupply:1,value:1}]),j([{seller:f,totalSupply:1,value:1,price:m.price,tokenPayment:m.token,sellId:m.sellId,amount:m.amount}])):x.push("/404");case 16:if(!l){e.next=20;break}return e.next=19,i.methods.checkDuplicateERC721(t,r,l).call();case 19:v=e.sent;case 20:if(!l||!v){e.next=24;break}d(3),e.next=35;break;case 24:if(!l||f.toLowerCase()!==l.toLowerCase()){e.next=31;break}return e.next=27,i.methods.checkDuplicateERC721(t,r,f).call();case 27:g=e.sent,d(g?3:2),e.next=35;break;case 31:return e.next=33,i.methods.checkDuplicateERC721(t,r,f).call();case 33:e.sent||f===a._address?d(1):d(0);case 35:(y=n.filter((function(e){return e.nftAddress.toLowerCase()===t.toLowerCase()&&e.tokenId===r})))[0]&&u(Object(C.a)(Object(C.a)({},y[0]),{},{tokenPayment:y[0].token})),e.next=42;break;case 39:e.prev=39,e.t0=e.catch(1),console.log(e.t0);case 42:case"end":return e.stop()}}),e,null,[[1,39]])})))).apply(this,arguments)}function A(e,t,n,r,c,a,s,i,l,o){return E.apply(this,arguments)}function E(){return(E=Object(a.a)(c.a.mark((function e(t,n,r,a,s,i,l,o,d,b){var j,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i&&a&&t&&r)){e.next=12;break}return e.prev=1,e.next=4,a.methods.getSellOrderById(l).call();case 4:(j=e.sent).isActive?(s&&j.seller.toLowerCase()===s.toLowerCase()?o(3):o(1),(u=n.filter((function(e){return e.sellId===l})))[0]&&d(Object(C.a)(Object(C.a)({},u[0]),{},{tokenPayment:u[0].token}))):b.push("/404"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),b.push("/404");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function F(e,t,n,r,c,a,s){return z.apply(this,arguments)}function z(){return(z=Object(a.a)(c.a.mark((function e(t,n,r,a,s,i,l){var o,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s&&a&&r)){e.next=17;break}if(e.prev=1,!t){e.next=11;break}return o=new i.eth.Contract(p.abi,r),e.next=6,o.methods.balanceOf(t,a).call();case 6:d=e.sent,l(d),n(d>0?2:0),e.next=12;break;case 11:n(0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}n(1109);var D=n(2589),P=n(2588),R=n(115),T=n(1107),B=n(2585),L=n(2584),W=n(2590),M=n(2638),V=n(1108),Y=(n(2622),n(352)),Q=n(3);function q(e){var t=e.visible,n=e.approve,r=e.selling,i=e.handleOk,l=e.setIsLoading,o=Object(d.useState)(!1),b=Object(s.a)(o,2),j=b[0],u=b[1];Object(d.useEffect)((function(){u(t)}),[t]);var x=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsx)(T.a,{visible:j,footer:Object(Q.jsx)("div",{}),centered:!0,width:500,onCancel:function(){u(!1),l(!1)},children:Object(Q.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(Q.jsxs)("div",{style:{width:"90%",margin:"25px 0"},children:[Object(Q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(Q.jsxs)("div",{className:"textMode",children:[Object(Q.jsx)("span",{className:"one",children:"1"}),Object(Q.jsx)("span",{children:"\u6388\u6743"})]}),"3"===n?Object(Q.jsxs)("div",{style:{color:"#43A047"},children:["\u5df2\u5b8c\u6210",Object(Q.jsx)("img",{src:Y.a,alt:"yes",style:{width:"22px"}})]}):null]}),Object(Q.jsx)("div",{children:"\u51fa\u552e\u6b64\u4f5c\u54c1\u96c6\u4e2d\u7684\u4f5c\u54c1\u9700\u8fdb\u884c\u4e00\u6b21\u6027\u6388\u6743\u3002"}),"1"===n?Object(Q.jsx)(V.b,{style:{width:"100%"},children:Object(Q.jsx)(R.a,{type:"primary",loading:!0,style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u6388\u6743\u4e2d"})}):"2"===n?Object(Q.jsxs)(V.b,{style:{width:"100%",display:"flex",flexDirection:"column"},children:[Object(Q.jsx)(R.a,{onClick:function(){x()},type:"primary",style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(Q.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]}),Object(Q.jsxs)("div",{style:{width:"90%",margin:"25px 0"},children:[Object(Q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(Q.jsxs)("div",{className:"textMode",children:[Object(Q.jsx)("span",{className:"one",children:"2"}),Object(Q.jsx)("span",{children:"\u4e0a\u67b6\u51fa\u552e"})]}),"3"===r?Object(Q.jsxs)("div",{style:{color:"#43A047"},children:["\u5df2\u5b8c\u6210",Object(Q.jsx)("img",{src:Y.a,alt:"yes",style:{width:"22px"}})]}):null]}),Object(Q.jsx)("div",{children:"\u4e0a\u67b6\u51fa\u552e\u9700\u652f\u4ed8\u4e00\u7b14\u77ff\u5de5\u8d39\u3002"}),"1"===r?Object(Q.jsx)(V.b,{style:{width:"100%"},children:Object(Q.jsx)(R.a,{type:"primary",loading:!0,style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u4e0a\u67b6\u4e2d"})}):"2"===r?Object(Q.jsxs)(V.b,{style:{width:"100%",display:"flex",flexDirection:"column",height:"50px"},children:[Object(Q.jsx)(R.a,{onClick:function(){x()},type:"primary",style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(Q.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]})]})})}var J=n(97);n(2606);function U(e){e.token;var t=e.is1155,n=e.available,r=e.getOwners1155,i=Object(b.b)(),l=Object(j.g)(),o=D.a.Option,u=Object(b.c)((function(e){return e})),x=u.web3,p=u.chainId,h=u.approveError,O=u.sellError,f=Object(j.i)(),m=f.addressToken,g=f.id,y=Object(d.useState)(!1),w=Object(s.a)(y,2),N=w[0],C=w[1],I=Object(d.useState)(!1),S=Object(s.a)(I,2),A=S[0],E=S[1],F=Object(d.useState)("0"),z=Object(s.a)(F,2),V=z[0],Y=z[1],U=Object(d.useState)(!1),G=Object(s.a)(U,2),H=G[0],K=G[1],X=Object(d.useState)(""),Z=Object(s.a)(X,2),_=Z[0],$=Z[1],ee=Object(d.useState)(),te=Object(s.a)(ee,2),ne=te[0],re=te[1],ce=P.a.useForm(),ae=Object(s.a)(ce,1)[0],se=Object(d.useRef)();Object(d.useEffect)((function(){p&&re(Object(J.d)(p)[0].address)}),[p]),Object(d.useEffect)((function(){"4001"===h?Y("2"):"4000"===h?Y("1"):"1"===h&&(Y("3"),K("1")),"4001"===O?K("2"):"4000"===O?K("1"):"1"===O&&(K("0"),K("3"))}),[h,O]);var ie=Object(d.useCallback)(Object(a.a)(c.a.mark((function e(){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y("0"),K("0"),e.next=4,ae.validateFields();case 4:if(!((n=e.sent)&&parseFloat(n.price)>0)){e.next=18;break}return E(!0),Y("1"),e.next=10,i(Object(v.R)(m,g,x.utils.toWei(n.price.toString(),"ether"),ne,n.amount?n.amount:1));case 10:if(!(a=e.sent).status){e.next=18;break}if(!t){e.next=15;break}return e.next=15,r();case 15:C(!1),ae.resetFields(),l.push({pathname:"/token/".concat(p,"/").concat(m,"/").concat(g,"/").concat(a.sellId)});case 18:case"end":return e.stop()}}),e)}))),[i,m,g,x.utils,t,l,ae,r,p,ne]),le=function(){var e=Object(a.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Not enough amount")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=Object(Q.jsx)(D.a,{value:ne,onChange:function(e){return re(e)},className:"select-after",children:Object(J.d)(p)?Object(J.d)(p).map((function(e,t){return Object(Q.jsxs)(o,{value:e.address,children:[Object(Q.jsx)("img",{className:"icon-tokenpayment",src:e.icon,alt:e.symbol}),Object(Q.jsx)("span",{className:"textmode pl-1",children:e.symbol})]},t)})):null});return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{className:"gSzfBw",children:Object(Q.jsx)(R.a,{style:{background:"#6080b4",border:"none",borderRadius:"10px"},type:"primary",size:"large",onClick:function(){C(!0)},children:"\u51fa\u552e"})}),Object(Q.jsx)(T.a,{title:Object(Q.jsx)("h3",{style:{margin:"20px 0 -20px",textAlign:"center",fontWeight:600,fontSize:"16px"},children:"\u51fa\u552e"}),visible:N,onCancel:function(){i({type:v.m,sellError:"0"}),C(!1),ae.resetFields(),$("")},centered:!0,footer:[Object(Q.jsx)(R.a,{style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none"},type:"primary",shape:"round",size:"large",onClick:function(){return ie()},children:"\u51fa\u552e"},"sell")],children:Object(Q.jsx)(P.a,{form:ae,className:"input-sell",layout:"vertical",ref:se,children:Object(Q.jsxs)(B.a,{gutter:[5,10],children:[Object(Q.jsxs)(L.a,{xs:{span:24},md:{span:t?17:24},children:[Object(Q.jsx)("div",{className:"ant-col ant-form-item-label",children:Object(Q.jsx)("label",{htmlFor:"price",className:"ant-form-item-required",title:"Price",children:"\u4ef7\u683c"})}),Object(Q.jsx)(W.a.Group,{compact:!0,label:"Price",children:Object(Q.jsx)(P.a.Item,{name:["price"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ef7\u683c"}],style:{width:"60%"},children:Object(Q.jsx)(W.a,{style:{width:"460px",border:"1px solid #6080b4",borderRadius:"0",height:"40px"},placeholder:"\u8bf7\u8f93\u5165\u4ef7\u683c",size:"large",addonAfter:oe,onChange:function(e){var t=Object(k.g)(e.target.value,8);se.current.setFieldsValue({price:t}),$((.975*t).toFixed(4))}})})}),Object(Q.jsxs)("div",{className:"flex-between",children:[Object(Q.jsx)("div",{children:"\u670d\u52a1\u8d39\u7387\uff1a"}),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("span",{className:"bold",children:"2.50"}),"%"]})]}),Object(Q.jsxs)("div",{className:"flex-between",children:[Object(Q.jsx)("div",{children:"\u4f60\u5c06\u83b7\u5f97\u7684\u603b\u91d1\u989d\uff1a"}),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("span",{className:"bold",children:_}),Object(J.c)(p)[ne]]})]})]}),t?Object(Q.jsx)(L.a,{xs:{span:24},md:{span:7},children:Object(Q.jsx)(W.a.Group,{children:Object(Q.jsx)(P.a.Item,{required:!0,name:["amount"],rules:[{validator:le}],label:"Amount",className:"input-amount-sell textmode",children:Object(Q.jsx)(M.a,{min:"1",size:"large",formatter:function(e){return"".concat(e).replace(/^(-)*(\d+)\.(\d\d\d\d\d\d\d\d).*$/,"$1$2.$3")},placeholder:"Amount",className:"textmode"})})})}):Object(Q.jsx)(Q.Fragment,{})]})})}),A?Object(Q.jsx)(q,{visible:!0,approve:V,selling:H,setIsLoading:E,handleOk:ie}):Object(Q.jsx)(Q.Fragment,{})]})}n(2623);function G(e){var t=e.orderDetail,n=e.is1155,r=e.getOwners1155,i=e.chainId,l=Object(b.c)((function(e){return e})).cancelError,o=Object(d.useState)(!1),u=Object(s.a)(o,2),x=u[0],p=u[1],h=Object(d.useState)(!1),O=Object(s.a)(h,2),f=O[0],m=O[1],g=Object(d.useState)("0"),y=Object(s.a)(g,2),k=y[0],w=y[1],N=Object(b.b)(),C=function(){p(!1),m(!1)};Object(d.useEffect)((function(){"4001"===l?w("2"):"4000"===l?w("1"):"1"===l&&w("0")}),[l]);var I=Object(j.g)(),S=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.sellId){e.next=13;break}return m(!0),w("1"),e.next=5,N(Object(v.P)(t));case 5:if(!e.sent){e.next=13;break}if(p(!1),m(!1),!n){e.next=12;break}return e.next=12,r();case 12:I.push({pathname:"/token/".concat(i,"/").concat(t.nftAddress,"/").concat(t.tokenId,"/null")});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsxs)("div",{className:"gSzfBw",children:[Object(Q.jsx)(R.a,{style:{borderRadius:"10px"},size:"large",onClick:function(){p(!0),w("1")},className:"btn-cancel-sell",children:"\u4e0b\u67b6"}),Object(Q.jsxs)(T.a,{title:"\u786e\u5b9a\u8981\u4e0b\u67b6\u5417\uff1f",onCancel:C,visible:x,footer:null,centered:!0,closable:!1,wrapClassName:"cancelWrapClass",children:[Object(Q.jsx)("p",{style:{textAlign:"center",marginBottom:"80px"},children:"\u4e0b\u67b6\u540e\u60a8\u4ecd\u7136\u53ef\u4ee5\u91cd\u65b0\u51fa\u552e"}),Object(Q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(Q.jsx)(R.a,{style:{width:"210px",height:"42px",background:"#fff",borderRadius:"10px",border:"1px solid #6080b4",color:"#6080b4"},size:"large",onClick:C,className:"btn-cancel-sell",children:"\u53d6\u6d88"}),"1"===k?Object(Q.jsx)(V.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:Object(Q.jsx)(R.a,{onClick:S,type:"primary",loading:f,style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff"},children:f?"\u4e0b\u67b6\u4e2d":"\u4e0b\u67b6"})}):"2"===k?Object(Q.jsxs)(V.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:[Object(Q.jsx)(R.a,{onClick:S,type:"primary",style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff",marginLeft:"20px"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(Q.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]})]})]})}function H(e){e.token;var t=e.is1155,n=e.available,r=e.web3,i=(e.getOwners1155,Object(b.c)((function(e){return e})).transferError),l=Object(b.b)(),o=P.a.useForm(),u=Object(s.a)(o,1)[0],x=Object(d.useState)(!1),p=Object(s.a)(x,2),h=p[0],O=p[1],f=Object(d.useState)(""),m=Object(s.a)(f,2),g=m[0],y=m[1],k=Object(j.i)(),w=k.addressToken,N=k.id,C=Object(d.useState)(!1),I=Object(s.a)(C,2),S=I[0],A=I[1],E=Object(d.useState)(!1),F=Object(s.a)(E,2),z=F[0],D=F[1];Object(d.useEffect)((function(){"4001"===i?(D(!1),A(!0)):"4000"===i?A(!1):"1"===i&&(D(!1),O(!1))}),[i]);var V=function(){var e=Object(a.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.validateFields();case 2:if(!(n=e.sent)){e.next=8;break}return D(!0),A(!1),e.next=8,l(Object(v.kb)(w,g,N,n.amount,t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(a.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Not enough amount")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("\u8bf7\u8f93\u5165\u5730\u5740")));case 4:if(r.utils.isAddress(n)){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("div",{style:{cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center"},onClick:function(){O(!0)},children:[Object(Q.jsx)("img",{style:{marginRight:"5px"},width:14,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAgCAYAAAB3j6rJAAAAAXNSR0IArs4c6QAAA5tJREFUWEfFV9lPE2EQ/xVbUcCgcpRLKIeClktCW4kPUBAEffNJy/Hoiwd4ofEPEO9okGhiYjQBr6BGwcQoXugDNyhCOMpZUgSW+6bHmm+bAm2hbFuQedlkd3bm983Mb2Y+Dk3TNP6zKAcm0NBOoaFtAPKeYUSFeIDzP4CMTsyisZ3Cn3aKeY6Mzxgc3XEzb22AzKk0aOoaYk5MHPf0j5uN+d5g/uoAIcntUI4w4SaO5YphqDVa1gnPOBxmPZD+4Sk0tOkcN3ZQmJpRsXZsrHgjM549kMlpFeNQV2QUqJEpqx0v/tHT1QlXTsQuD4SEtrV7WOe4fQDdvWPQrgHBDsYE4GjSbkMgir6x+RO3dA+BFN1ay/l0CYQBruC0KobozxVdTK7HJmfX2q+BfXveBty7mATuBjtwMm9+ognP10MidvGRdSyacc3Je1lNVzb2rgqOEIELY6epc5CVvfRDoYgX+emAqDVa+uGbOpT/UbL62ViJdMX9ET6IjfLF95pufCzrYG3n+mkp3LY56IDoW3zBh0aUlLM3EuizDdJoP4iFntBoaTworMGv1n7WIDxcnJBzMnZe32DWFP+Q49WX5mWNbbbnYl+YNwNgB38Lozc4Oo07TytXbOPGRhMl/pAl71kaCHlbWqvAk+J6aLULQ9nXwxnSaF/EhHuDVLpeyOTMfV5tFdvOpYkRGui2PBDypba5D4/e/kZkMJ8BEOC91SRKZfVKPHr3Gyq15b1mI6FtdhJ4XDvzQMhX0kQ5nKWz9PprC4pKW1nXg7Fi+E53nJGJDF5btI+o1FoQhtlK97QUIRLEAuuAkKZ391kVM+5tlaunpOBv19FWL6wjcjnvO3qpCVsxwH27I66dijOxwxpI5s0Sq9hh7PGAWIDUFOH6AzmTKkZ40AJtLU7NakSEx9VN242LaLsuQMKC3HA2VbxknVldI2TYxYsEeP9TbtCFzVWzLFmIRIkhbW2KiMMmHrIzJPDzdGa68P3CWlYdNudkHDxcHFcnIgTEhQwJBJ7O8wbJWkl6jLlNnox7MvaXE4tSQxZqsmP6ey2A0Bsml6hb+RUmtzj99wSRAGmHTGlrcWou5X7D8SORSw5AvTFqZBq38svxd3DS5OBZMhEidrrbHhElNQEvV6cVO+v41BxuF1SgUzk6r8vQNjsRZOranJoVESxSmJnTIPdFFXMzIEKuCySl5oR1jVgChOiS9fFxUT3qmvuYlJIeYk7+AeqE7cjoZdeEAAAAAElFTkSuQmCC",alt:"send"}),Object(Q.jsx)("div",{style:{color:"#6080B4",fontSize:"15px"},children:"\u8d60\u9001"})]}),Object(Q.jsx)(T.a,{width:550,title:Object(Q.jsx)("h3",{style:{marginTop:"20px",textAlign:"center",fontWeight:600,fontSize:"16px"},children:"\u8d60\u9001"}),visible:h,onCancel:function(){O(!1),D(!1),A(!1),u.resetFields()},centered:!0,footer:[Object(Q.jsx)(R.a,{type:"primary",loading:z,shape:"round",size:"large",onClick:function(){return V()},style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",display:"".concat(S?"none":"inline-block")},children:z?"\u652f\u4ed8\u4e2d":"\u8d60\u9001"},"sell"),Object(Q.jsx)(R.a,{type:"primary",loading:z,shape:"round",size:"large",onClick:function(){return V()},style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",display:"".concat(S?"inline-block":"none")},children:"\u518d\u8bd5\u4e00\u6b21"},"transfer")],children:Object(Q.jsx)("div",{style:{margin:"-30px 0 45px"},children:Object(Q.jsx)(P.a,{form:u,layout:"vertical",className:"input-transfer",children:Object(Q.jsxs)(B.a,{gutter:[5,10],children:[Object(Q.jsxs)(L.a,{xs:{span:24},md:{span:t?17:24},children:[Object(Q.jsx)(P.a.Item,{name:["address"],rules:[{validator:q}],label:"\u63a5\u6536\u5730\u5740",required:!0,children:Object(Q.jsx)(W.a,{width:200,size:"large",className:"search-style",onChange:function(e){y(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5730\u5740"})}),Object(Q.jsx)("div",{style:{color:"red",width:"100%",textAlign:"center",marginTop:"10px",display:"".concat(S?"block":"none")},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}),t?Object(Q.jsx)(L.a,{xs:{span:24},md:{span:7},children:Object(Q.jsx)(P.a.Item,{name:["amount"],rules:[{validator:Y}],label:"Amount",required:!0,children:Object(Q.jsx)(M.a,{min:"1",size:"large",className:"search-style input-amount-transfer input-sell",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},placeholder:"Set amount"})})}):null]})})})})]})}function K(e){var t=e.orderDetail,n=(e.token,e.is1155),r=(e.available,e.getOwners1155,Object(b.b)()),i=Object(b.c)((function(e){return e})),l=i.web3,o=i.chainId,u=i.updateError,x=Object(j.i)().sellID,p=Object(d.useState)(!1),h=Object(s.a)(p,2),O=h[0],f=h[1],m=Object(d.useState)("0"),g=Object(s.a)(m,2),y=g[0],w=g[1],N=Object(d.useState)(!1),C=Object(s.a)(N,2),I=C[0],S=C[1],A=P.a.useForm(),E=Object(s.a)(A,1)[0],F=Object(d.useRef)(),z=Object(d.useCallback)(Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.validateFields();case 2:if(!((t=e.sent)&&parseFloat(t.price)>0)){e.next=10;break}return S(!0),w("1"),e.next=8,r(Object(v.lb)(x,l.utils.toWei(t.price.toString(),"ether")));case 8:(n=e.sent)&&(console.log(n),f(!1),w("0"),S(!1),E.resetFields());case 10:case"end":return e.stop()}}),e)}))),[r,l.utils,x,E]),D=function(){f(!1),S(!1),w("0"),E.resetFields()};return Object(d.useEffect)((function(){"4001"===u?w("2"):"4000"===u?w("1"):"1"===u&&w("0")}),[u]),Object(Q.jsxs)("div",{className:"gSzfBw",children:[Object(Q.jsx)(R.a,{style:{background:"#6080B4",border:"none",borderRadius:"10px",lineHeight:"30px"},type:"primary",size:"large",onClick:function(){f(!0),w("1")},children:"\u66f4\u6539\u4ef7\u683c"},"change"),Object(Q.jsxs)(T.a,{title:Object(Q.jsx)("h3",{style:{margin:"20px 0 -20px",textAlign:"center",fontWeight:600,fontSize:"16px"},children:"\u66f4\u6539\u4ef7\u683c"}),closable:!1,wrapClassName:"cancelWrapClass",visible:O,onCancel:D,footer:null,centered:!0,children:[Object(Q.jsx)(P.a,{form:E,className:"input-sell",layout:"vertical",ref:F,children:Object(Q.jsxs)(B.a,{gutter:[5,10],children:[Object(Q.jsxs)(L.a,{xs:{span:24},md:{span:n?17:24},children:[Object(Q.jsx)("div",{className:"ant-col ant-form-item-label",children:Object(Q.jsx)("label",{htmlFor:"price",className:"ant-form-item-required",title:"Price",children:"\u4ef7\u683c"})}),Object(Q.jsx)(W.a.Group,{compact:!0,label:"Price",children:Object(Q.jsx)(P.a.Item,{name:["price"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ef7\u683c"}],className:"input-price",children:Object(Q.jsx)(W.a,{style:{width:"460px",border:"1px solid #6080b4",borderRadius:"10px",height:"40px"},placeholder:"\u8bf7\u8f93\u5165\u4ef7\u683c",size:"large",suffix:Object(J.c)(o)[null===t||void 0===t?void 0:t.tokenPayment],onChange:function(e){var t=Object(k.g)(e.target.value,8);F.current.setFieldsValue({price:t})}})})})]}),n?Object(Q.jsx)(L.a,{xs:{span:24},md:{span:7},children:Object(Q.jsx)(W.a.Group,{children:Object(Q.jsx)(P.a.Item,{required:!0,name:["amount"],label:"Amount",className:"input-amount-sell",children:Object(Q.jsx)(M.a,{min:"1",size:"large",defaultValue:t?t.amount:0,formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},placeholder:"Amount",disabled:!0})})})}):Object(Q.jsx)(Q.Fragment,{})]})}),Object(Q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",marginTop:"60px"},children:[Object(Q.jsx)(R.a,{style:{width:"210px",height:"42px",background:"#fff",borderRadius:"10px",border:"1px solid #6080b4",color:"#6080b4"},size:"large",onClick:D,className:"btn-cancel-sell",children:"\u53d6\u6d88"}),"1"===y?Object(Q.jsx)(V.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:Object(Q.jsx)(R.a,{onClick:function(){return z()},type:"primary",loading:I,style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff"},children:I?"\u66f4\u6539\u4e2d":"\u66f4\u6539\u4ef7\u683c"})},"update"):"2"===y?Object(Q.jsxs)(V.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:[Object(Q.jsx)(R.a,{onClick:function(){return z()},type:"primary",style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff",marginLeft:"20px"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(Q.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]},"tryAgain"):null]})]})]})}var X=function(e,t){var n=Object(d.useRef)();Object(d.useEffect)((function(){n.current=e})),Object(d.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])};function Z(e){var t=e.status,n=e.token,r=e.orderDetail,c=e.is1155,a=e.available,s=e.web3,i=e.getOwners1155,l=e.chainId,o=Object(b.c)((function(e){return e})).walletAddress;switch(X((function(){o&&g.a.dispatch(Object(v.ab)(o))}),3e3),t){case 3:return Object(Q.jsx)("div",{className:"PE",children:Object(Q.jsxs)("div",{className:"actions-btn",children:[Object(Q.jsx)(K,{orderDetail:r,token:n,is1155:c,available:a,getOwners1155:i}),Object(Q.jsx)("div",{className:"cAFwWB"}),Object(Q.jsx)(G,{orderDetail:r,getOwners1155:i,chainId:l})]})});case 2:return Object(Q.jsx)("div",{className:"PE",children:Object(Q.jsxs)("div",{className:"actions-btn",style:{display:"flex",justifyContent:"space-between"},children:[Object(Q.jsx)(U,{token:n,is1155:c,available:a,getOwners1155:i}),Object(Q.jsx)("div",{className:"cAFwWB"}),Object(Q.jsx)(H,{token:n,is1155:c,available:a,web3:s,getOwners1155:i})]})});case 1:return Object(Q.jsx)(Q.Fragment,{});default:return Object(Q.jsx)("div",{})}}n(2624),n(2625);function _(e){var t=e.visible,n=e.orderDetail,r=e.buy,i=e.setCheckout1155,l=Object(b.c)((function(e){return e})),o=l.web3,j=l.balance,u=l.walletAddress,x=P.a.useForm(),p=Object(s.a)(x,1)[0],h=Object(d.useState)(n?parseFloat(o.utils.fromWei(n.price,"ether")):0),O=Object(s.a)(h,2),f=O[0],m=O[1],v=Object(d.useState)(1),g=Object(s.a)(v,2),y=g[0],w=g[1],N=Object(d.useState)(!1),I=Object(s.a)(N,2),S=I[0],A=I[1],E=Object(d.useCallback)(function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("0x0000000000000000000000000000000000000000"!==t.tokenPayment){e.next=6;break}t.price>parseInt(1e18*j)?A(!0):A(!1),e.next=10;break;case 6:return e.next=8,Object(k.a)(t.tokenPayment,u);case 8:n=e.sent,t.price>parseInt(n)?A(!0):A(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j,u]);Object(d.useEffect)((function(){u&&n&&E(Object(C.a)(Object(C.a)({},n),{},{amount:y,price:parseInt(y)*parseFloat(n.price)}))}),[E,j,n,u,y]);var F=function(){i(!1)},z=function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.validateFields();case 2:(t=e.sent)&&t.amount>=1&&r(Object(C.a)(Object(C.a)({},n),{},{amount:t.amount}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(a.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n.amount)-parseInt(n.soldAmount))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Amount greater available")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(Q.jsxs)(T.a,{title:Object(Q.jsx)("p",{className:"textmode mgb-0",style:{fontSize:"28px",fontWeight:"900"},children:"Checkout"}),visible:t,footer:[Object(Q.jsx)(R.a,{shape:"round",size:"large",onClick:function(){return F()},children:"Cancel"},"cancel"),S?Object(Q.jsx)(R.a,{type:"primary",shape:"round",size:"large",disabled:!0,children:"Insufficient"},"insufficient"):Object(Q.jsx)(R.a,{type:"primary",shape:"round",size:"large",onClick:function(){return z()},children:"Payment"},"payment")],centered:!0,width:550,onCancel:F,children:[Object(Q.jsx)("p",{className:"textmode mgb-0",style:{fontSize:"14px",fontWeight:"900"},children:"Choose the amount of order you want to buy"}),Object(Q.jsxs)(P.a,{form:p,className:"input-checkout-1155",layout:"vertical",children:[Object(Q.jsx)(W.a.Group,{children:Object(Q.jsx)(P.a.Item,{required:!0,name:["amount"],rules:[{validator:D}],label:"Enter amount. ".concat(n?parseInt(n.amount)-parseInt(n.soldAmount):0," available"),className:"input-amount-checkout1155",children:Object(Q.jsx)(M.a,{min:"1",size:"large",formatter:function(e){return"".concat(e).replace(/^(-)*(\d+)\.(\d\d\d\d\d\d\d\d).*$/,"$1$2.$3")},onChange:function(e){w(e=e||1),E(Object(C.a)(Object(C.a)({},n),{},{amount:e,price:parseInt(e)*parseFloat(n.price)})),m(parseInt(e)*parseFloat(o.utils.fromWei(n.price,"ether")))},placeholder:"Amount"})})}),Object(Q.jsx)(W.a.Group,{children:Object(Q.jsx)(P.a.Item,{label:"Total payment",children:Object(Q.jsx)(W.a,{disabled:!0,size:"large",value:"".concat(f).replace(/\B(?=(\d{3})+(?!\d))/g,","),suffix:"BNB"})})})]})]})}n(2626);function $(e){var t=e.visible,n=e.approve,r=e.buying,i=e.handleOk,l=e.setIsLoading,o=Object(d.useState)(!1),b=Object(s.a)(o,2),j=b[0],u=b[1];Object(d.useEffect)((function(){u(t)}),[t]);var x=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsx)(T.a,{visible:j,footer:Object(Q.jsx)("div",{}),centered:!0,width:500,onCancel:function(){u(!1),l(!1)},children:Object(Q.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(Q.jsxs)("div",{style:{width:"90%",margin:"25px 0"},children:[Object(Q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(Q.jsxs)("div",{className:"textMode",children:[Object(Q.jsx)("span",{className:"one",children:"1"}),Object(Q.jsx)("span",{children:"\u6388\u6743\u652f\u4ed8\u4ee3\u5e01"})]}),"3"===n?Object(Q.jsxs)("div",{style:{color:"#43A047"},children:["\u5df2\u5b8c\u6210",Object(Q.jsx)("img",{src:Y.a,alt:"yes",style:{width:"22px"}})]}):null]}),Object(Q.jsx)("div",{children:"\u9996\u6b21\u5728\u5e73\u53f0\u4f7f\u7528\u7684\u652f\u4ed8\u4ee3\u5e01\u9700\u4f5c\u4e00\u6b21\u6027\u6388\u6743"}),"1"===n?Object(Q.jsx)(V.b,{style:{width:"100%"},children:Object(Q.jsx)(R.a,{type:"primary",loading:!0,style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u6388\u6743\u4e2d"})}):"2"===n?Object(Q.jsxs)(V.b,{style:{width:"100%",display:"flex",flexDirection:"column"},children:[Object(Q.jsx)(R.a,{onClick:function(){x()},type:"primary",style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(Q.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]}),Object(Q.jsxs)("div",{style:{width:"90%",margin:"25px 0"},children:[Object(Q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(Q.jsxs)("div",{className:"textMode",children:[Object(Q.jsx)("span",{className:"one",children:"2"}),Object(Q.jsx)("span",{children:"\u8d2d\u4e70"})]}),"3"===r?Object(Q.jsxs)("div",{style:{color:"#43A047"},children:["\u5df2\u5b8c\u6210",Object(Q.jsx)("img",{src:Y.a,alt:"yes",style:{width:"22px"}})]}):null]}),Object(Q.jsx)("div",{children:"\u8d2d\u4e70\u7269\u54c1\u9700\u8981\u53d1\u8d77\u4e00\u7b14\u4ea4\u6613\u3002"}),"1"===r?Object(Q.jsx)(V.b,{style:{width:"100%"},children:Object(Q.jsx)(R.a,{type:"primary",loading:!0,style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u652f\u4ed8\u4e2d"})}):"2"===r?Object(Q.jsxs)(V.b,{style:{width:"100%",display:"flex",flexDirection:"column",height:"50px"},children:[Object(Q.jsx)(R.a,{onClick:function(){x()},type:"primary",style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(Q.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]})]})})}var ee=n(137);function te(e){var t=e.token,n=e.orderDetail,r=e.is1155,i=e.id,l=e.addressToken,o=e.getOwners1155,u=e.setOrderDetail,x=e.bigStyle,p=Object(j.g)(),h=Object(d.useState)(!1),O=Object(s.a)(h,2),f=O[0],m=O[1],g=Object(b.c)((function(e){return e})),y=g.balance,w=g.chainId,N=g.walletAddress,C=g.web3,I=g.buyError,S=g.approveError,A=Object(d.useState)(!1),E=Object(s.a)(A,2),F=E[0],z=E[1],D=Object(d.useState)(!1),P=Object(s.a)(D,2),B=P[0],L=P[1],W=Object(d.useState)("0"),M=Object(s.a)(W,2),V=M[0],Y=M[1],q=Object(d.useState)("0"),U=Object(s.a)(q,2),G=U[0],H=U[1],K=Object(d.useState)(!1),X=Object(s.a)(K,2),Z=X[0],te=X[1],ne=Object(d.useState)(""),re=Object(s.a)(ne,2),ce=re[0],ae=re[1],se=Object(b.b)();Object(d.useEffect)((function(){"4001"===S?H("2"):"4000"===S?H("1"):"1"===S&&(H("3"),Y("1")),"4001"===I?Y("2"):"4000"===I?Y("1"):"1"===I&&Y("3")}),[I,S,u]);var ie=function(){te(!0),Y("0"),oe(n)},le=Object(d.useCallback)(function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("0x0000000000000000000000000000000000000000"!==t.tokenPayment){e.next=7;break}ae(y),t.price>parseInt(1e18*y)?m(!0):m(!1),e.next=13;break;case 7:return e.next=9,Object(k.a)(t.tokenPayment,N);case 9:n=e.sent,r=Object(k.h)(n.toString(),18),ae(r),t.price>parseInt(n)?m(!0):m(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,N]);Object(d.useEffect)((function(){N&&le(n)}),[le,N,n]);var oe=function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,se(Object(v.O)(t,r));case 4:if(!(n=e.sent).status||!n.link){e.next=11;break}if(!r){e.next=9;break}return e.next=9,o();case 9:L(!1),p.push({pathname:"/token/".concat(w,"/").concat(l,"/").concat(i,"/null")});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsx)(Q.Fragment,{children:N?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)(T.a,{title:Object(Q.jsx)("h3",{className:"textmode mgb-0",children:"\u8d2d\u4e70"}),visible:B,onCancel:function(){L(!1),se({type:v.c,buyError:"0"})},centered:!0,footer:[Object(Q.jsx)(R.a,{style:{width:"280px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",marginBottom:"10px"},loading:Z,type:"primary",shape:"round",size:"large",onClick:function(){return ie()},children:"\u8d2d\u4e70"},"buy")],children:[Object(Q.jsxs)("div",{className:"sell-img",style:{borderTop:"1px solid rgba(96,128,180,0.09)",borderBottom:"1px solid rgba(96,128,180,0.09)",padding:"45px 0",display:"flex",alignItems:"center"},children:[Object(Q.jsx)("img",{alt:"img-nft",src:t.image}),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{className:"textmode name-style",children:t.name}),Object(Q.jsx)("div",{style:{color:"rgba(0,0,0,0.50)"},children:t.nameCollection}),Object(Q.jsxs)("div",{className:"textmode",children:["\u5355\u4ef7: ",Object(Q.jsx)("span",{style:{fontWeight:"600",fontSize:"16px"},children:C.utils.fromWei(n.price.toString(),"ether")})," ",Object(J.c)(w)[n.tokenPayment]]})]})]}),Object(Q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:["\u8d26\u6237\u4f59\u989d:",Object(Q.jsxs)("span",{children:[Object(k.c)(ce,8)," ",Object(J.c)(w)[n.tokenPayment]]})]})]}),Object(Q.jsx)(_,{visible:F,orderDetail:n,buy:oe,insufficient:f,setCheckout1155:z}),f?Object(Q.jsx)(R.a,{type:"text",disabled:!0,shape:"round",size:"small",children:"\u4f59\u989d\u4e0d\u8db3"}):x?Object(Q.jsx)("div",{className:"buy-big-btn",onClick:function(){return r?de():L(!0)},children:"\u7acb\u5373\u8d2d\u4e70"}):Object(Q.jsx)(R.a,{className:"buy-btn",type:"link",shape:"round",size:"small",onClick:function(){return r?de():L(!0)},children:"\u8d2d\u4e70"}),Z?Object(Q.jsx)($,{visible:!0,approve:G,buying:V,setIsLoading:te,handleOk:ie}):Object(Q.jsx)(Q.Fragment,{})]}):Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(R.a,{style:{color:"#6080B4",fontWeight:"bold",fontSize:"15px"},type:"text",shape:"round",size:"small",onClick:ee.b,children:"\u8d2d\u4e70"})})})}var ne=n(1050),re=n(2627),ce=n.n(re),ae=n(263),se=i.a.useBreakpoint;function ie(){var e=Object(b.c)((function(e){return e})),t=e.web3,n=e.walletAddress,r=e.sellOrderList,i=e.availableSellOrder721,p=e.market,h=e.chainId,O=e.nftList,f=e.convertErc1155Tokens,m=e.availableSellOrder1155,g=e.erc1155Tokens,N=e.infoCollections,C=e.orbitdb,S=Object(j.i)(),E=S.chainID,z=S.addressToken,D=S.id,P=S.sellID,R=se().lg,T=Object(b.b)(),B=Object(j.g)(),L=Object(d.useState)(null),W=Object(s.a)(L,2),M=W[0],V=W[1],Y=Object(d.useState)(null),q=Object(s.a)(Y,2),U=q[0],G=q[1],H=Object(d.useState)(!1),K=Object(s.a)(H,2),X=K[0],_=K[1],$=Object(d.useState)(),re=Object(s.a)($,2),ie=re[0],le=re[1],oe=Object(d.useState)(1),de=Object(s.a)(oe,2),be=de[0],je=de[1],ue=Object(d.useState)([]),xe=Object(s.a)(ue,2),pe=xe[0],he=xe[1],Oe=Object(d.useState)([]),fe=Object(s.a)(Oe,2),me=fe[0],ve=fe[1],ge=Object(d.useState)(1),ye=Object(s.a)(ge,2),ke=ye[0],we=ye[1],Ne=Object(d.useState)(null),Ce=Object(s.a)(Ne,2),Ie=Ce[0],Se=Ce[1],Ae=Object(d.useState)(null),Ee=Object(s.a)(Ae,2),Fe=Ee[0],ze=Ee[1];Object(d.useEffect)((function(){parseInt(h)!==parseInt(E)&&Object(ee.d)(E,n)}),[n,h,E]);var De=function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ae.a)(t,n);case 2:if(!(r=e.sent)||!pe[0]){e.next=12;break}return e.next=6,r.get(pe[0].owner.toLowerCase()+"_profile");case 6:return a=e.sent,e.next=9,r.get("".concat(z,"_").concat(h,"_").concat(D,"_history"));case 9:s=e.sent,T(Object(v.db)(s)),ze(a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){C&&pe&&De("/orbitdb/zdpuAoo1YYEnqQWrj5UezXyhMyTcfFDYo85a7Hw8ce9RKw6p2/dev",C)}),[C,pe[0]]),Object(d.useEffect)((function(){var e=setTimeout((function(){T(Object(v.Z)())}),500);return function(){clearTimeout(e)}}),[T]),Object(d.useEffect)((function(){!function(e,t,n,r,c,a,s,i){y.apply(this,arguments)}(t,O,z,D,g,we,G,V)}),[t,O,z,D,g,N]);var Pe=Object(d.useCallback)(Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p&&w(f,z,D,h,p,he,ve);case 1:case"end":return e.stop()}}),e)}))),[f,z,D,h,p]),Re=Object(d.useCallback)(Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&r&&i&&O)){e.next=5;break}return e.next=3,O.methods.isERC1155(z).call();case 3:e.sent?(Pe(),_(!0),Number.isInteger(parseInt(P))&&"null"!==P?A(i,m,O,r,n,t,P,je,le,B):F(n,je,z,D,h,t)):I(z,i,D,p,O,r,n,t,je,he,ve,le,B,P);case 5:case"end":return e.stop()}}),e)}))),[z,i,m,D,p,O,r,n,t,P,Pe,h,B]);Object(d.useEffect)((function(){Re()}),[Re]);var Te=Object(d.useCallback)(Object(a.a)(c.a.mark((function e(){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ie||!h){e.next=20;break}return e.next=3,t.utils.fromWei(ie.price,"ether");case 3:if(n=e.sent,97!==h){e.next=10;break}return e.next=7,Object(k.d)(n);case 7:r=e.sent,e.next=19;break;case 10:if(80001!==h){e.next=16;break}return e.next=13,Object(k.f)(n);case 13:r=e.sent,e.next=19;break;case 16:return e.next=18,Object(k.e)(n);case 18:r=e.sent;case 19:Se(r);case 20:case"end":return e.stop()}}),e)}))),[ie,t.utils,h]);return Object(d.useEffect)((function(){Ie||Te()}),[Te,Ie]),Object(Q.jsx)("div",{style:{width:"100%",background:"#f7f8fb"},children:Object(Q.jsx)("div",{className:"detail-page center",children:Object(Q.jsx)("div",{className:"body-page",children:U?Object(Q.jsx)("div",{className:"detail-main",children:Object(Q.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[R?Object(Q.jsxs)("div",{className:"info-wrap-left",children:[Object(Q.jsx)("div",{className:"expand-img-nft",children:Object(Q.jsx)("div",{className:"image-label center",children:Object(Q.jsx)(l.a,{alt:"img-nft",src:U.image})})}),Object(Q.jsx)("div",{className:"description-nft",children:Object(Q.jsxs)("div",{className:"content-properties",children:[Object(Q.jsx)("div",{className:"title-tab-properties",children:Object(Q.jsx)("h3",{className:"nft-h3",children:"\u7b80\u4ecb"})}),U.description?Object(Q.jsx)("div",{className:"detail-des textmode",children:U.description}):Object(Q.jsx)("div",{className:"attribute-empty",children:"\u6682\u65e0\u7b80\u4ecb"})]})}),Object(Q.jsx)("div",{className:"properties-nft",children:Object(Q.jsxs)("div",{className:"content-properties",children:[Object(Q.jsx)("div",{className:"title-tab-properties",children:Object(Q.jsx)("h3",{className:"nft-h3",children:"\u5c5e\u6027"})}),Object(Q.jsx)("div",{className:"list-properties",children:Object(Q.jsx)("div",{className:"items-properties",children:U.attributes.length?U.attributes.map((function(e,t){return Object(Q.jsxs)("div",{className:"item-properties",children:[Object(Q.jsx)("div",{className:"name-properties",children:e.trait_type}),Object(Q.jsx)("div",{className:"value-properties textmode",children:e.display_type&&"date"===e.display_type.toLowerCase()&&ce()(e.value).isValid()?ce()(e.value.toString().length<13?1e3*e.value:e.value).format("DD-MM-YYYY"):e.value})]},t)})):Object(Q.jsx)("div",{className:"attribute-empty",children:"\u6682\u65e0\u5c5e\u6027"})})})]})})]}):null,Object(Q.jsxs)("div",{className:"info-wrap-right",children:[Object(Q.jsxs)("div",{className:"info-order-nft",children:[Object(Q.jsx)("div",{className:"detail-title",children:Object(Q.jsx)("h1",{children:U.name})}),"null"!==P?Object(Q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(Q.jsxs)("div",{className:"show-price",children:[Object(Q.jsx)("div",{children:ie?"".concat(Object(k.c)(t.utils.fromWei(ie.price,"ether"),4)<1e-4?"<0.0001":Object(k.c)(t.utils.fromWei(ie.price,"ether"),4)," ").concat(Object(J.c)(h)[null===ie||void 0===ie?void 0:ie.tokenPayment]):Object(Q.jsx)(o.a,{className:"textmode",style:{fontSize:"24px"}})}),Object(Q.jsx)("div",{className:"price",children:ie&&"".concat(Object(J.c)(h)[null===ie||void 0===ie?void 0:ie.tokenPayment])!=="".concat(Object(J.d)(h)[0].symbol)?"\u2248$ ".concat(Ie):""})]}),Object(Q.jsx)("span",{className:"width100",style:{textAlign:"end",margin:"30px 20px 0 0"},children:!n||n&&ie&&"null"!==P&&ie.seller.toLowerCase()!==n.toLowerCase()?Object(Q.jsx)(te,{token:U,orderDetail:ie,is1155:X,id:D,addressToken:z,getOwners1155:Pe,setOrderDetail:le,bigStyle:!0}):null})]}):null,Object(Q.jsxs)("div",{className:"collections-nft",children:[Object(Q.jsxs)("div",{style:{marginRight:"45px"},children:[Object(Q.jsx)("div",{className:"textBlack",children:"\u4f5c\u54c1\u96c6"}),Object(Q.jsx)(u.b,{to:"/collection/detail/".concat(z),children:U.nameCollection})]}),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{className:"textBlack",children:"\u6301\u6709\u8005"}),pe.map((function(e,t){var n;return Object(Q.jsx)("div",{className:"avatar-link-available",children:Object(Q.jsx)("div",{className:"link-and-available",children:Object(Q.jsx)(u.b,{to:"/profile/index/".concat(h,"/").concat(e.owner.toLowerCase()),className:"owner",children:Fe&&(null===Fe||void 0===Fe||null===(n=Fe.userName)||void 0===n?void 0:n.length)>1?Fe.userName:Object(Q.jsx)("strong",{children:"".concat(e.owner.slice(0,8),"...").concat(e.owner.slice(e.owner.length-6,e.owner.length))})})})},t)}))]})]})]}),Object(Q.jsxs)("div",{className:"purchase-nft",children:[Object(Q.jsx)("h3",{className:"nft-h3",children:"\u51fa\u552e\u5217\u8868"}),Object(Q.jsxs)("div",{children:[Object(Q.jsxs)("div",{className:"order-title",children:[Object(Q.jsx)("span",{className:"width100",children:"\u5355\u4ef7"}),Object(Q.jsx)("span",{className:"width100",children:"\u6570\u91cf"}),Object(Q.jsx)("span",{className:"width100",children:"\u5356\u5bb6"})]}),Object(Q.jsxs)("div",{className:"order-List",children:[Object(Q.jsx)("span",{className:"width100",children:ie&&"null"!==P?Object(Q.jsx)("div",{className:"title-and-price",children:Object(Q.jsxs)("span",{className:"price-eth color-black",children:[Object(k.c)(t.utils.fromWei(ie.price,"ether"),4)<1e-4?"<0.0001":Object(k.c)(t.utils.fromWei(ie.price,"ether"),4)," ",Object(J.c)(h)[ie.tokenPayment]]})}):Object(Q.jsx)(Q.Fragment,{children:"--"})}),Object(Q.jsx)("span",{className:"width100",children:ie&&"null"!==P?Object(Q.jsx)("div",{className:"color-black",children:me?me[0].value:1}):Object(Q.jsx)(Q.Fragment,{children:"--"})}),Object(Q.jsx)("span",{className:"width100",children:ie&&"null"!==P?Object(Q.jsx)("div",{children:Object(Q.jsx)(u.b,{to:"/profile/index/".concat(h,"/").concat(ie.seller.toLowerCase()),className:"owner",children:Fe?Fe.userName:Object(Q.jsx)("strong",{children:"".concat(ie.seller.slice(0,8),"...").concat(ie.seller.slice(ie.seller.length-6,ie.seller.length))})})}):Object(Q.jsx)(Q.Fragment,{children:"--"})}),Object(Q.jsx)("span",{className:"width100",style:{textAlign:"end"},children:!n||n&&ie&&"null"!==P&&ie.seller.toLowerCase()!==n.toLowerCase()?Object(Q.jsx)(te,{token:U,orderDetail:ie,is1155:X,id:D,addressToken:z,getOwners1155:Pe,setOrderDetail:le}):null})]})]}),Object(Q.jsx)("div",{className:"style-purchase",children:Object(Q.jsx)("div",{className:"actions-nft",children:Object(Q.jsx)(Z,{status:be,token:U,orderDetail:ie,is1155:X,available:ke,web3:t,chainId:h})})})]}),Object(Q.jsxs)("div",{className:"nft-details",children:[Object(Q.jsx)("h3",{className:"nft-h3",children:"\u8be6\u60c5"}),Object(Q.jsxs)("div",{className:"flex-between mb15",children:[Object(Q.jsx)("div",{className:"color-black",children:"\u5408\u7ea6\u5730\u5740"}),Object(Q.jsx)("div",{children:Object(Q.jsx)("a",{href:"".concat(Object(ne.a)(h),"/address/").concat(z),target:"_blank",rel:"noreferrer",className:"href-to-address-contract",children:R?z:"".concat(z.slice(0,8),"...").concat(z.slice(z.length-6,z.length))})})]}),Object(Q.jsxs)("div",{className:"flex-between mb15",children:[Object(Q.jsx)("div",{className:"color-black",children:"Token ID"}),Object(Q.jsx)("div",{className:"color-black",children:D})]}),Object(Q.jsxs)("div",{className:"flex-between mb15",children:[Object(Q.jsx)("div",{className:"color-black",children:"NFT\u6807\u51c6"}),Object(Q.jsx)("div",{className:"color-black",children:"ERC-721"})]}),Object(Q.jsxs)("div",{className:"flex-between",children:[Object(Q.jsx)("div",{className:"color-black",children:"\u5143\u6570\u636e"}),Object(Q.jsx)("div",{className:"href-to-address-contract",children:Object(Q.jsx)("a",{href:M,target:"_blank",rel:"noreferrer",className:"href-to-address-contract",children:"IPFS"})})]})]})]})]})}):Object(Q.jsx)("div",{className:"center",style:{width:"100%",minHeight:"200px"},children:Object(Q.jsx)(x.a,{})})})})})}}}]);
//# sourceMappingURL=5.7915bfff.chunk.js.map