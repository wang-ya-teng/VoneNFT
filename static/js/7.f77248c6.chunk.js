(this["webpackJsonpdidi-nft"]=this["webpackJsonpdidi-nft"]||[]).push([[7],{2346:function(e,t,n){},2364:function(e,t,n){},2365:function(e,t,n){},2366:function(e,t,n){},2367:function(e,t,n){},2380:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ae}));var r=n(1),a=n.n(r),c=n(14),s=n(33),i=n(942),l=n(2378),o=n(176),d=n(0),b=n(60),u=n(79),j=n(112),p=n(562),x=n(408),h=n(260),O=n(204),f=n.n(O),m=n(559),v=n(19),g=n(66);function k(){return(k=Object(c.a)(a.a.mark((function e(t,n,r,c,s,i,l,o){var d,b,u,j,p,O,k,y,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=44;break}return e.next=3,n.methods.isERC1155(r).call();case 3:return d=e.sent,e.next=6,g.a.dispatch(Object(v.T)(r,null));case 6:if(u=e.sent.collection.name,!d){e.next=26;break}return e.next=10,new t.eth.Contract(x.abi,r);case 10:return j=e.sent,e.next=13,j.methods.uri(c).call();case 13:if(b=e.sent,!s){e.next=24;break}p=0;case 16:if(!(p<s.length)){e.next=24;break}if((O=s[p]).addressToken.toLowerCase()!==r.toLowerCase()||parseInt(O.index)!==parseInt(c)){e.next=21;break}return i(O.value),e.abrupt("break",24);case 21:p++,e.next=16;break;case 24:e.next=33;break;case 26:return e.next=28,new t.eth.Contract(h.abi,r);case 28:return k=e.sent,e.next=31,k.methods.tokenURI(c).call();case 31:b=e.sent,o(b);case 33:return e.prev=33,e.next=36,f.a.get(b);case 36:y=e.sent,w=y.data,l({name:w.name||"Unnamed",description:w.description||"",image:w.image||m.a,nameCollection:u,attributes:w.attributes||[]}),e.next=44;break;case 41:e.prev=41,e.t0=e.catch(33),l({name:"Unnamed",description:"",image:m.a,nameCollection:"Unnamed",attributes:[]});case 44:case"end":return e.stop()}}),e,null,[[33,41]])})))).apply(this,arguments)}var y=n(317);function w(e,t,n,r,a,c,s){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function e(t,n,r,c,s,i,l){var o,d,b,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],d=0;case 2:if(!(d<t.length)){e.next=10;break}if((b=t[d]).addressToken.toLowerCase()!==n.toLowerCase()){e.next=7;break}return o=b.tokens,e.abrupt("break",10);case 7:d++,e.next=2;break;case 10:return o=o.filter((function(e){return parseInt(e.index)===parseInt(r)})),e.next=13,Object(y.c)(n,r,c,s._address);case 13:u=e.sent,i(u.ownersOf1155),l(o);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=n(10);function I(e,t,n,r,a,c,s,i,l,o,d,b,u,j){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(a.a.mark((function e(t,n,r,c,s,i,l,o,d,b,u,j,p,x){var O,f,m,v,g,k;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o&&i&&n&&s)){e.next=42;break}return e.prev=1,e.next=4,new o.eth.Contract(h.abi,t);case 4:if(O=e.sent,"null"!==x){e.next=12;break}return e.next=8,O.methods.ownerOf(r).call();case 8:f=e.sent,b([{owner:f,totalSupply:1,value:1}]),e.next=16;break;case 12:return e.next=14,i.methods.getSellOrderById(x).call();case 14:(m=e.sent).isActive?(f=m.seller,b([{owner:f,totalSupply:1,value:1}]),u([{seller:f,totalSupply:1,value:1,price:m.price,tokenPayment:m.token,sellId:m.sellId,amount:m.amount}])):p.push("/404");case 16:if(!l){e.next=20;break}return e.next=19,i.methods.checkDuplicateERC721(t,r,l).call();case 19:v=e.sent;case 20:if(!l||!v){e.next=24;break}d(3),e.next=35;break;case 24:if(!l||f.toLowerCase()!==l.toLowerCase()){e.next=31;break}return e.next=27,i.methods.checkDuplicateERC721(t,r,f).call();case 27:g=e.sent,d(g?3:2),e.next=35;break;case 31:return e.next=33,i.methods.checkDuplicateERC721(t,r,f).call();case 33:e.sent||f===c._address?d(1):d(0);case 35:(k=n.filter((function(e){return e.nftAddress.toLowerCase()===t.toLowerCase()&&e.tokenId===r})))[0]&&j(Object(C.a)(Object(C.a)({},k[0]),{},{tokenPayment:k[0].token})),e.next=42;break;case 39:e.prev=39,e.t0=e.catch(1),console.log(e.t0);case 42:case"end":return e.stop()}}),e,null,[[1,39]])})))).apply(this,arguments)}function E(e,t,n,r,a,c,s,i,l,o){return A.apply(this,arguments)}function A(){return(A=Object(c.a)(a.a.mark((function e(t,n,r,c,s,i,l,o,d,b){var u,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i&&c&&t&&r)){e.next=12;break}return e.prev=1,e.next=4,c.methods.getSellOrderById(l).call();case 4:(u=e.sent).isActive?(s&&u.seller.toLowerCase()===s.toLowerCase()?o(3):o(1),(j=n.filter((function(e){return e.sellId===l})))[0]&&d(Object(C.a)(Object(C.a)({},j[0]),{},{tokenPayment:j[0].token}))):b.push("/404"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),b.push("/404");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function F(e,t,n,r,a,c,s){return B.apply(this,arguments)}function B(){return(B=Object(c.a)(a.a.mark((function e(t,n,r,c,s,i,l){var o,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s&&c&&r)){e.next=17;break}if(e.prev=1,!t){e.next=11;break}return o=new i.eth.Contract(x.abi,r),e.next=6,o.methods.balanceOf(t,c).call();case 6:d=e.sent,l(d),n(d>0?2:0),e.next=12;break;case 11:n(0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}n(974);var z=n(2324),D=n(99),T=n(972),P=n(2321),R=n(2320),L=n(2325),W=n(2381),M=n(973),H=(n(2364),n(315)),V=n(2);function Y(e){var t=e.visible,n=e.approve,r=e.selling,i=e.handleOk,l=e.setIsLoading,o=Object(d.useState)(!1),b=Object(s.a)(o,2),u=b[0],j=b[1];Object(d.useEffect)((function(){j(t)}),[t]);var p=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(T.a,{visible:u,footer:Object(V.jsx)("div",{}),centered:!0,width:500,onCancel:function(){j(!1),l(!1)},children:Object(V.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(V.jsxs)("div",{style:{width:"90%",margin:"25px 0"},children:[Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(V.jsxs)("div",{className:"textMode",children:[Object(V.jsx)("span",{className:"one",children:"1"}),Object(V.jsx)("span",{children:"\u6388\u6743"})]}),"3"===n?Object(V.jsxs)("div",{style:{color:"#43A047"},children:["\u5df2\u5b8c\u6210",Object(V.jsx)("img",{src:H.a,alt:"yes",style:{width:"22px"}})]}):null]}),Object(V.jsx)("div",{children:"\u51fa\u552e\u6b64\u4f5c\u54c1\u96c6\u4e2d\u7684\u4f5c\u54c1\u9700\u8fdb\u884c\u4e00\u6b21\u6027\u6388\u6743\u3002"}),"1"===n?Object(V.jsx)(M.b,{style:{width:"100%"},children:Object(V.jsx)(D.a,{type:"primary",loading:!0,style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u6388\u6743\u4e2d"})}):"2"===n?Object(V.jsxs)(M.b,{style:{width:"100%",display:"flex",flexDirection:"column"},children:[Object(V.jsx)(D.a,{onClick:function(){p()},type:"primary",style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(V.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]}),Object(V.jsxs)("div",{style:{width:"90%",margin:"25px 0"},children:[Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(V.jsxs)("div",{className:"textMode",children:[Object(V.jsx)("span",{className:"one",children:"2"}),Object(V.jsx)("span",{children:"\u4e0a\u67b6\u51fa\u552e"})]}),"3"===r?Object(V.jsxs)("div",{style:{color:"#43A047"},children:["\u5df2\u5b8c\u6210",Object(V.jsx)("img",{src:H.a,alt:"yes",style:{width:"22px"}})]}):null]}),Object(V.jsx)("div",{children:"\u4e0a\u67b6\u51fa\u552e\u9700\u652f\u4ed8\u4e00\u7b14\u77ff\u5de5\u8d39\u3002"}),"1"===r?Object(V.jsx)(M.b,{style:{width:"100%"},children:Object(V.jsx)(D.a,{type:"primary",loading:!0,style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u4e0a\u67b6\u4e2d"})}):"2"===r?Object(V.jsxs)(M.b,{style:{width:"100%",display:"flex",flexDirection:"column",height:"50px"},children:[Object(V.jsx)(D.a,{onClick:function(){p()},type:"primary",style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(V.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]})]})})}n(2346);function Q(e){e.token;var t=e.is1155,n=e.available,r=e.getOwners1155,i=Object(b.b)(),l=Object(u.f)(),o=Object(b.c)((function(e){return e})),j=o.web3,p=o.chainId,x=o.approveError,h=o.sellError,O=Object(u.h)(),f=O.addressToken,m=O.id,g=Object(d.useState)(!1),k=Object(s.a)(g,2),w=k[0],N=k[1],C=Object(d.useState)(!1),I=Object(s.a)(C,2),S=I[0],E=I[1],A=Object(d.useState)("0"),F=Object(s.a)(A,2),B=F[0],M=F[1],H=Object(d.useState)(!1),Q=Object(s.a)(H,2),q=Q[0],J=Q[1],U=Object(d.useState)(""),G=Object(s.a)(U,2),K=G[0],X=G[1],Z=z.a.useForm(),_=Object(s.a)(Z,1)[0],$=Object(d.useRef)();Object(d.useEffect)((function(){"4001"===x?M("2"):"4000"===x?M("1"):"1"===x&&(M("3"),J("1")),"4001"===h?J("2"):"4000"===h?J("1"):"1"===h&&(J("0"),J("3"))}),[x,h]);var ee=Object(d.useCallback)(Object(c.a)(a.a.mark((function e(){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M("0"),J("0"),e.next=4,_.validateFields();case 4:if(!((n=e.sent)&&parseFloat(n.price)>0)){e.next=18;break}return E(!0),M("1"),e.next=10,i(Object(v.R)(f,m,j.utils.toWei(n.price.toString(),"ether"),"0x0000000000000000000000000000000000000000",n.amount?n.amount:1));case 10:if(!(c=e.sent).status){e.next=18;break}if(!t){e.next=15;break}return e.next=15,r();case 15:N(!1),_.resetFields(),l.push({pathname:"/token/".concat(p,"/").concat(f,"/").concat(m,"/").concat(c.sellId)});case 18:case"end":return e.stop()}}),e)}))),[i,f,m,j.utils,t,l,_,r,p]),te=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Not enough amount")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"gSzfBw",children:Object(V.jsx)(D.a,{style:{background:"#6080b4",border:"none",borderRadius:"10px"},type:"primary",size:"large",onClick:function(){N(!0)},children:"\u51fa\u552e"})}),Object(V.jsx)(T.a,{title:Object(V.jsx)("h3",{style:{margin:"20px 0 -20px",textAlign:"center",fontWeight:600,fontSize:"16px"},children:"\u51fa\u552e"}),visible:w,onCancel:function(){i({type:v.m,sellError:"0"}),N(!1),_.resetFields(),X("")},centered:!0,footer:[Object(V.jsx)(D.a,{style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none"},type:"primary",shape:"round",size:"large",onClick:function(){return ee()},children:"\u51fa\u552e"},"sell")],children:Object(V.jsx)(z.a,{form:_,className:"input-sell",layout:"vertical",ref:$,children:Object(V.jsxs)(P.a,{gutter:[5,10],children:[Object(V.jsxs)(R.a,{xs:{span:24},md:{span:t?17:24},children:[Object(V.jsx)("div",{className:"ant-col ant-form-item-label",children:Object(V.jsx)("label",{htmlFor:"price",className:"ant-form-item-required",title:"Price",children:"\u4ef7\u683c"})}),Object(V.jsx)(L.a.Group,{compact:!0,label:"Price",children:Object(V.jsx)(z.a.Item,{name:["price"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ef7\u683c"}],style:{width:"60%"},children:Object(V.jsx)(L.a,{style:{width:"460px",border:"1px solid #6080b4",borderRadius:"10px",height:"40px"},placeholder:"\u8bf7\u8f93\u5165\u4ef7\u683c",size:"large",suffix:4===p?"ETH":"BNB",onChange:function(e){var t=Object(y.g)(e.target.value,8);$.current.setFieldsValue({price:t}),X((.975*t).toFixed(4))}})})}),Object(V.jsxs)("div",{className:"flex-between",children:[Object(V.jsx)("div",{children:"\u670d\u52a1\u8d39\u7387\uff1a"}),Object(V.jsxs)("div",{children:[Object(V.jsx)("span",{className:"bold",children:"2.50"}),"%"]})]}),Object(V.jsxs)("div",{className:"flex-between",children:[Object(V.jsx)("div",{children:"\u4f60\u5c06\u83b7\u5f97\u7684\u603b\u91d1\u989d\uff1a"}),Object(V.jsxs)("div",{children:[Object(V.jsx)("span",{className:"bold",children:K}),4===p?"ETH":"BNB"]})]})]}),t?Object(V.jsx)(R.a,{xs:{span:24},md:{span:7},children:Object(V.jsx)(L.a.Group,{children:Object(V.jsx)(z.a.Item,{required:!0,name:["amount"],rules:[{validator:te}],label:"Amount",className:"input-amount-sell textmode",children:Object(V.jsx)(W.a,{min:"1",size:"large",formatter:function(e){return"".concat(e).replace(/^(-)*(\d+)\.(\d\d\d\d\d\d\d\d).*$/,"$1$2.$3")},placeholder:"Amount",className:"textmode"})})})}):Object(V.jsx)(V.Fragment,{})]})})}),S?Object(V.jsx)(Y,{visible:!0,approve:B,selling:q,setIsLoading:E,handleOk:ee}):Object(V.jsx)(V.Fragment,{})]})}n(2365);function q(e){var t=e.orderDetail,n=e.is1155,r=e.getOwners1155,i=e.chainId,l=Object(b.c)((function(e){return e})).cancelError,o=Object(d.useState)(!1),j=Object(s.a)(o,2),p=j[0],x=j[1],h=Object(d.useState)(!1),O=Object(s.a)(h,2),f=O[0],m=O[1],g=Object(d.useState)("0"),k=Object(s.a)(g,2),y=k[0],w=k[1],N=Object(b.b)(),C=function(){x(!1),m(!1)};Object(d.useEffect)((function(){"4001"===l?w("2"):"4000"===l?w("1"):"1"===l&&w("0")}),[l]);var I=Object(u.f)(),S=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.sellId){e.next=13;break}return m(!0),w("1"),e.next=5,N(Object(v.P)(t));case 5:if(!e.sent){e.next=13;break}if(x(!1),m(!1),!n){e.next=12;break}return e.next=12,r();case 12:I.push({pathname:"/token/".concat(i,"/").concat(t.nftAddress,"/").concat(t.tokenId,"/null")});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{className:"gSzfBw",children:[Object(V.jsx)(D.a,{style:{borderRadius:"10px"},size:"large",onClick:function(){x(!0),w("1")},className:"btn-cancel-sell",children:"\u4e0b\u67b6"}),Object(V.jsxs)(T.a,{title:"\u786e\u5b9a\u8981\u4e0b\u67b6\u5417\uff1f",onCancel:C,visible:p,footer:null,centered:!0,closable:!1,wrapClassName:"cancelWrapClass",children:[Object(V.jsx)("p",{style:{textAlign:"center",marginBottom:"80px"},children:"\u4e0b\u67b6\u540e\u60a8\u4ecd\u7136\u53ef\u4ee5\u91cd\u65b0\u51fa\u552e"}),Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(V.jsx)(D.a,{style:{width:"210px",height:"42px",background:"#fff",borderRadius:"10px",border:"1px solid #6080b4",color:"#6080b4"},size:"large",onClick:C,className:"btn-cancel-sell",children:"\u53d6\u6d88"}),"1"===y?Object(V.jsx)(M.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:Object(V.jsx)(D.a,{onClick:S,type:"primary",loading:f,style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff"},children:f?"\u4e0b\u67b6\u4e2d":"\u4e0b\u67b6"})}):"2"===y?Object(V.jsxs)(M.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:[Object(V.jsx)(D.a,{onClick:S,type:"primary",style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff",marginLeft:"20px"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(V.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]})]})]})}function J(e){e.token;var t=e.is1155,n=e.available,r=e.web3,i=(e.getOwners1155,Object(b.c)((function(e){return e})).transferError),l=Object(b.b)(),o=z.a.useForm(),j=Object(s.a)(o,1)[0],p=Object(d.useState)(!1),x=Object(s.a)(p,2),h=x[0],O=x[1],f=Object(d.useState)(""),m=Object(s.a)(f,2),g=m[0],k=m[1],y=Object(u.h)(),w=y.addressToken,N=y.id,C=Object(d.useState)(!1),I=Object(s.a)(C,2),S=I[0],E=I[1],A=Object(d.useState)(!1),F=Object(s.a)(A,2),B=F[0],M=F[1];Object(d.useEffect)((function(){"4001"===i?(M(!1),E(!0)):"4000"===i?E(!1):"1"===i&&(M(!1),O(!1))}),[i]);var H=function(){var e=Object(c.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.validateFields();case 2:if(!(n=e.sent)){e.next=8;break}return M(!0),E(!1),e.next=8,l(Object(v.jb)(w,g,N,n.amount,t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Not enough amount")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("\u8bf7\u8f93\u5165\u5730\u5740")));case 4:if(r.utils.isAddress(n)){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("div",{style:{cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center"},onClick:function(){O(!0)},children:[Object(V.jsx)("img",{style:{marginRight:"5px"},width:14,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAgCAYAAAB3j6rJAAAAAXNSR0IArs4c6QAAA5tJREFUWEfFV9lPE2EQ/xVbUcCgcpRLKIeClktCW4kPUBAEffNJy/Hoiwd4ofEPEO9okGhiYjQBr6BGwcQoXugDNyhCOMpZUgSW+6bHmm+bAm2hbFuQedlkd3bm983Mb2Y+Dk3TNP6zKAcm0NBOoaFtAPKeYUSFeIDzP4CMTsyisZ3Cn3aKeY6Mzxgc3XEzb22AzKk0aOoaYk5MHPf0j5uN+d5g/uoAIcntUI4w4SaO5YphqDVa1gnPOBxmPZD+4Sk0tOkcN3ZQmJpRsXZsrHgjM549kMlpFeNQV2QUqJEpqx0v/tHT1QlXTsQuD4SEtrV7WOe4fQDdvWPQrgHBDsYE4GjSbkMgir6x+RO3dA+BFN1ay/l0CYQBruC0KobozxVdTK7HJmfX2q+BfXveBty7mATuBjtwMm9+ognP10MidvGRdSyacc3Je1lNVzb2rgqOEIELY6epc5CVvfRDoYgX+emAqDVa+uGbOpT/UbL62ViJdMX9ET6IjfLF95pufCzrYG3n+mkp3LY56IDoW3zBh0aUlLM3EuizDdJoP4iFntBoaTworMGv1n7WIDxcnJBzMnZe32DWFP+Q49WX5mWNbbbnYl+YNwNgB38Lozc4Oo07TytXbOPGRhMl/pAl71kaCHlbWqvAk+J6aLULQ9nXwxnSaF/EhHuDVLpeyOTMfV5tFdvOpYkRGui2PBDypba5D4/e/kZkMJ8BEOC91SRKZfVKPHr3Gyq15b1mI6FtdhJ4XDvzQMhX0kQ5nKWz9PprC4pKW1nXg7Fi+E53nJGJDF5btI+o1FoQhtlK97QUIRLEAuuAkKZ391kVM+5tlaunpOBv19FWL6wjcjnvO3qpCVsxwH27I66dijOxwxpI5s0Sq9hh7PGAWIDUFOH6AzmTKkZ40AJtLU7NakSEx9VN242LaLsuQMKC3HA2VbxknVldI2TYxYsEeP9TbtCFzVWzLFmIRIkhbW2KiMMmHrIzJPDzdGa68P3CWlYdNudkHDxcHFcnIgTEhQwJBJ7O8wbJWkl6jLlNnox7MvaXE4tSQxZqsmP6ey2A0Bsml6hb+RUmtzj99wSRAGmHTGlrcWou5X7D8SORSw5AvTFqZBq38svxd3DS5OBZMhEidrrbHhElNQEvV6cVO+v41BxuF1SgUzk6r8vQNjsRZOranJoVESxSmJnTIPdFFXMzIEKuCySl5oR1jVgChOiS9fFxUT3qmvuYlJIeYk7+AeqE7cjoZdeEAAAAAElFTkSuQmCC",alt:"send"}),Object(V.jsx)("div",{style:{color:"#6080B4",fontSize:"15px"},children:"\u8d60\u9001"})]}),Object(V.jsx)(T.a,{width:550,title:Object(V.jsx)("h3",{style:{marginTop:"20px",textAlign:"center",fontWeight:600,fontSize:"16px"},children:"\u8d60\u9001"}),visible:h,onCancel:function(){O(!1),M(!1),E(!1),j.resetFields()},centered:!0,footer:[Object(V.jsx)(D.a,{type:"primary",loading:B,shape:"round",size:"large",onClick:function(){return H()},style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",display:"".concat(S?"none":"inline-block")},children:B?"\u652f\u4ed8\u4e2d":"\u8d60\u9001"},"sell"),Object(V.jsx)(D.a,{type:"primary",loading:B,shape:"round",size:"large",onClick:function(){return H()},style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",display:"".concat(S?"inline-block":"none")},children:"\u518d\u8bd5\u4e00\u6b21"},"transfer")],children:Object(V.jsx)("div",{style:{margin:"-30px 0 45px"},children:Object(V.jsx)(z.a,{form:j,layout:"vertical",className:"input-transfer",children:Object(V.jsxs)(P.a,{gutter:[5,10],children:[Object(V.jsxs)(R.a,{xs:{span:24},md:{span:t?17:24},children:[Object(V.jsx)(z.a.Item,{name:["address"],rules:[{validator:Q}],label:"\u63a5\u6536\u5730\u5740",required:!0,children:Object(V.jsx)(L.a,{width:200,size:"large",className:"search-style",onChange:function(e){k(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5730\u5740"})}),Object(V.jsx)("div",{style:{color:"red",width:"100%",textAlign:"center",marginTop:"10px",display:"".concat(S?"block":"none")},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}),t?Object(V.jsx)(R.a,{xs:{span:24},md:{span:7},children:Object(V.jsx)(z.a.Item,{name:["amount"],rules:[{validator:Y}],label:"Amount",required:!0,children:Object(V.jsx)(W.a,{min:"1",size:"large",className:"search-style input-amount-transfer input-sell",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},placeholder:"Set amount"})})}):null]})})})})]})}function U(e){var t=e.orderDetail,n=(e.token,e.is1155),r=(e.available,e.getOwners1155,Object(b.b)()),i=Object(b.c)((function(e){return e})),l=i.web3,o=i.chainId,j=i.updateError,p=Object(u.h)().sellID,x=Object(d.useState)(!1),h=Object(s.a)(x,2),O=h[0],f=h[1],m=Object(d.useState)("0"),g=Object(s.a)(m,2),k=g[0],w=g[1],N=Object(d.useState)(!1),C=Object(s.a)(N,2),I=C[0],S=C[1],E=z.a.useForm(),A=Object(s.a)(E,1)[0],F=Object(d.useRef)(),B=Object(d.useCallback)(Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.validateFields();case 2:if(!((t=e.sent)&&parseFloat(t.price)>0)){e.next=10;break}return S(!0),w("1"),e.next=8,r(Object(v.kb)(p,l.utils.toWei(t.price.toString(),"ether")));case 8:(n=e.sent)&&(console.log(n),f(!1),w("0"),S(!1),A.resetFields());case 10:case"end":return e.stop()}}),e)}))),[r,l.utils,p,A]),H=function(){f(!1),S(!1),w("0"),A.resetFields()};return Object(d.useEffect)((function(){"4001"===j?w("2"):"4000"===j?w("1"):"1"===j&&w("0")}),[j]),Object(V.jsxs)("div",{className:"gSzfBw",children:[Object(V.jsx)(D.a,{style:{background:"#6080B4",border:"none",borderRadius:"10px",lineHeight:"30px"},type:"primary",size:"large",onClick:function(){f(!0),w("1")},children:"\u66f4\u6539\u4ef7\u683c"},"change"),Object(V.jsxs)(T.a,{title:Object(V.jsx)("h3",{className:"textmode mgb-0",children:"\u66f4\u6539\u4ef7\u683c"}),visible:O,onCancel:H,footer:null,centered:!0,children:[Object(V.jsx)(z.a,{form:A,className:"input-sell",layout:"vertical",ref:F,children:Object(V.jsxs)(P.a,{gutter:[5,10],children:[Object(V.jsxs)(R.a,{xs:{span:24},md:{span:n?17:24},children:[Object(V.jsx)("div",{className:"ant-col ant-form-item-label",children:Object(V.jsx)("label",{htmlFor:"price",className:"ant-form-item-required",title:"Price",children:"\u4ef7\u683c"})}),Object(V.jsx)(L.a.Group,{compact:!0,label:"Price",children:Object(V.jsx)(z.a.Item,{name:["price"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ef7\u683c"}],className:"input-price",children:Object(V.jsx)(L.a,{style:{width:"460px",border:"1px solid #6080b4",borderRadius:"10px",height:"40px"},placeholder:"\u8bf7\u8f93\u5165\u4ef7\u683c",size:"large",suffix:4===o?"ETH":"BNB",onChange:function(e){var t=Object(y.g)(e.target.value,8);F.current.setFieldsValue({price:t})}})})})]}),n?Object(V.jsx)(R.a,{xs:{span:24},md:{span:7},children:Object(V.jsx)(L.a.Group,{children:Object(V.jsx)(z.a.Item,{required:!0,name:["amount"],label:"Amount",className:"input-amount-sell",children:Object(V.jsx)(W.a,{min:"1",size:"large",defaultValue:t?t.amount:0,formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},placeholder:"Amount",disabled:!0})})})}):Object(V.jsx)(V.Fragment,{})]})}),Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",marginTop:"60px"},children:[Object(V.jsx)(D.a,{style:{width:"210px",height:"42px",background:"#fff",borderRadius:"10px",border:"1px solid #6080b4",color:"#6080b4"},size:"large",onClick:H,className:"btn-cancel-sell",children:"\u53d6\u6d88"}),"1"===k?Object(V.jsx)(M.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:Object(V.jsx)(D.a,{onClick:function(){return B()},type:"primary",loading:I,style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff"},children:I?"\u66f4\u6539\u4e2d":"\u66f4\u6539\u4ef7\u683c"})},"update"):"2"===k?Object(V.jsxs)(M.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:[Object(V.jsx)(D.a,{onClick:function(){return B()},type:"primary",style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff",marginLeft:"20px"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(V.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]},"tryAgain"):null]})]})]})}var G=function(e,t){var n=Object(d.useRef)();Object(d.useEffect)((function(){n.current=e})),Object(d.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])};function K(e){var t=e.status,n=e.token,r=e.orderDetail,a=e.is1155,c=e.available,s=e.web3,i=e.getOwners1155,l=e.chainId,o=Object(b.c)((function(e){return e})).walletAddress;switch(G((function(){o&&g.a.dispatch(Object(v.ab)(o))}),3e3),t){case 3:return Object(V.jsx)("div",{className:"PE",children:Object(V.jsxs)("div",{className:"actions-btn",children:[Object(V.jsx)(U,{orderDetail:r,token:n,is1155:a,available:c,getOwners1155:i}),Object(V.jsx)("div",{className:"cAFwWB"}),Object(V.jsx)(q,{orderDetail:r,getOwners1155:i,chainId:l})]})});case 2:return Object(V.jsx)("div",{className:"PE",children:Object(V.jsxs)("div",{className:"actions-btn",style:{display:"flex",justifyContent:"space-between"},children:[Object(V.jsx)(Q,{token:n,is1155:a,available:c,getOwners1155:i}),Object(V.jsx)("div",{className:"cAFwWB"}),Object(V.jsx)(J,{token:n,is1155:a,available:c,web3:s,getOwners1155:i})]})});case 1:return Object(V.jsx)(V.Fragment,{});default:return Object(V.jsx)("div",{})}}n(2366),n(2367);function X(e){var t=e.visible,n=e.orderDetail,r=e.buy,i=e.setCheckout1155,l=Object(b.c)((function(e){return e})),o=l.web3,u=l.balance,j=l.walletAddress,p=z.a.useForm(),x=Object(s.a)(p,1)[0],h=Object(d.useState)(n?parseFloat(o.utils.fromWei(n.price,"ether")):0),O=Object(s.a)(h,2),f=O[0],m=O[1],v=Object(d.useState)(1),g=Object(s.a)(v,2),k=g[0],w=g[1],N=Object(d.useState)(!1),I=Object(s.a)(N,2),S=I[0],E=I[1],A=Object(d.useCallback)(function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("0x0000000000000000000000000000000000000000"!==t.tokenPayment){e.next=6;break}t.price>parseInt(1e18*u)?E(!0):E(!1),e.next=10;break;case 6:return e.next=8,Object(y.b)(t.tokenPayment,j);case 8:n=e.sent,t.price>parseInt(n)?E(!0):E(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,j]);Object(d.useEffect)((function(){j&&n&&A(Object(C.a)(Object(C.a)({},n),{},{amount:k,price:parseInt(k)*parseFloat(n.price)}))}),[A,u,n,j,k]);var F=function(){i(!1)},B=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.validateFields();case 2:(t=e.sent)&&t.amount>=1&&r(Object(C.a)(Object(C.a)({},n),{},{amount:t.amount}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n.amount)-parseInt(n.soldAmount))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Amount greater available")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(V.jsxs)(T.a,{title:Object(V.jsx)("p",{className:"textmode mgb-0",style:{fontSize:"28px",fontWeight:"900"},children:"Checkout"}),visible:t,footer:[Object(V.jsx)(D.a,{shape:"round",size:"large",onClick:function(){return F()},children:"Cancel"},"cancel"),S?Object(V.jsx)(D.a,{type:"primary",shape:"round",size:"large",disabled:!0,children:"Insufficient"},"insufficient"):Object(V.jsx)(D.a,{type:"primary",shape:"round",size:"large",onClick:function(){return B()},children:"Payment"},"payment")],centered:!0,width:550,onCancel:F,children:[Object(V.jsx)("p",{className:"textmode mgb-0",style:{fontSize:"14px",fontWeight:"900"},children:"Choose the amount of order you want to buy"}),Object(V.jsxs)(z.a,{form:x,className:"input-checkout-1155",layout:"vertical",children:[Object(V.jsx)(L.a.Group,{children:Object(V.jsx)(z.a.Item,{required:!0,name:["amount"],rules:[{validator:P}],label:"Enter amount. ".concat(n?parseInt(n.amount)-parseInt(n.soldAmount):0," available"),className:"input-amount-checkout1155",children:Object(V.jsx)(W.a,{min:"1",size:"large",formatter:function(e){return"".concat(e).replace(/^(-)*(\d+)\.(\d\d\d\d\d\d\d\d).*$/,"$1$2.$3")},onChange:function(e){w(e=e||1),A(Object(C.a)(Object(C.a)({},n),{},{amount:e,price:parseInt(e)*parseFloat(n.price)})),m(parseInt(e)*parseFloat(o.utils.fromWei(n.price,"ether")))},placeholder:"Amount"})})}),Object(V.jsx)(L.a.Group,{children:Object(V.jsx)(z.a.Item,{label:"Total payment",children:Object(V.jsx)(L.a,{disabled:!0,size:"large",value:"".concat(f).replace(/\B(?=(\d{3})+(?!\d))/g,","),suffix:"BNB"})})})]})]})}var Z=n(118);function _(e){var t=e.token,n=e.orderDetail,r=e.is1155,i=e.id,l=e.addressToken,o=e.getOwners1155,j=e.setOrderDetail,p=e.bigStyle,x=Object(u.f)(),h=Object(d.useState)(!1),O=Object(s.a)(h,2),f=O[0],m=O[1],g=Object(b.c)((function(e){return e})),k=g.balance,w=g.chainId,N=g.walletAddress,C=g.allowanceToken,I=g.web3,S=g.buyError,E=Object(d.useState)(!1),A=Object(s.a)(E,2),F=A[0],B=A[1],z=Object(d.useState)(!1),P=Object(s.a)(z,2),R=P[0],L=P[1],W=Object(d.useState)(!1),M=Object(s.a)(W,2),H=M[0],Y=M[1],Q=Object(d.useState)(!1),q=Object(s.a)(Q,2),J=q[0],U=q[1],G=Object(d.useState)(!1),K=Object(s.a)(G,2),_=K[0],$=K[1],ee=Object(d.useState)(""),te=Object(s.a)(ee,2),ne=te[0],re=te[1],ae=Object(b.b)();Object(d.useEffect)((function(){var e=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.eth.getBalance(N);case 2:t=e.sent,re(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();N&&e(),"4001"===S?($(!1),U(!0)):"4000"===S?U(!1):"1"===S&&(j(null),$(!1),Y(!1))}),[S,j,N,I.eth]);var ce=Object(d.useCallback)(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("0x0000000000000000000000000000000000000000"!==t.tokenPayment){e.next=7;break}B(!0),t.price>parseInt(1e18*k)?m(!0):m(!1),e.next=15;break;case 7:return e.next=9,Object(y.a)(t.tokenPayment,N,w);case 9:return n=e.sent,e.next=12,Object(y.b)(t.tokenPayment,N);case 12:r=e.sent,t.price>parseInt(r)?m(!0):m(!1),t.price<=parseInt(n)?B(!0):B(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k,N,w]);Object(d.useEffect)((function(){N&&ce(n)}),[ce,N,C,n]);var se=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ae(Object(v.O)(t,r));case 4:if(!(n=e.sent).status||!n.link){e.next=10;break}if(!r){e.next=9;break}return e.next=9,o();case 9:x.push({pathname:"/token/".concat(w,"/").concat(l,"/").concat(i,"/null")});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ae(Object(v.N)(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(V.Fragment,{children:N?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(T.a,{title:Object(V.jsx)("h3",{className:"textmode mgb-0",children:"\u8d2d\u4e70"}),visible:H,onCancel:function(){Y(!1),$(!1),U(!1)},centered:!0,footer:[Object(V.jsx)(D.a,{style:{width:"280px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",marginBottom:"10px"},loading:_,type:"primary",shape:"round",size:"large",onClick:function(){return $(!0),U(!1),void se(n)},children:_?"\u652f\u4ed8\u4e2d":"\u8d2d\u4e70"},"buy"),Object(V.jsx)("div",{style:{color:"red",marginTop:"5px",display:"".concat(J?"block":"none")},children:"\u9519\u8bef\uff1a\u652f\u4ed8\u5931\u8d25"},"red")],children:[Object(V.jsxs)("div",{className:"sell-img",style:{borderTop:"1px solid rgba(96,128,180,0.09)",borderBottom:"1px solid rgba(96,128,180,0.09)",padding:"45px 0",display:"flex",alignItems:"center"},children:[Object(V.jsx)("img",{alt:"img-nft",src:t.image}),Object(V.jsxs)("div",{children:[Object(V.jsx)("div",{className:"textmode name-style",children:t.name}),Object(V.jsx)("div",{style:{color:"rgba(0,0,0,0.50)"},children:t.nameCollection}),Object(V.jsxs)("div",{className:"textmode",children:["\u5355\u4ef7: ",Object(V.jsx)("span",{style:{fontWeight:"600",fontSize:"16px"},children:I.utils.fromWei(n.price.toString(),"ether")})," ",4===w?"ETH":"BNB"]})]})]}),Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:["\u8d26\u6237\u4f59\u989d:",Object(V.jsxs)("span",{children:[Object(y.d)(I.utils.fromWei(ne.toString(),"ether"),8)," ",4===w?"ETH":"BNB"]})]})]}),Object(V.jsx)(X,{visible:R,orderDetail:n,buy:se,insufficient:f,setCheckout1155:L}),F?f?Object(V.jsx)(D.a,{type:"text",disabled:!0,shape:"round",size:"small",children:"\u4f59\u989d\u4e0d\u8db3"}):p?Object(V.jsx)("div",{className:"buy-big-btn",onClick:function(){return r?le():Y(!0)},children:"\u7acb\u5373\u8d2d\u4e70"}):Object(V.jsx)(D.a,{className:"buy-btn",type:"link",shape:"round",size:"small",onClick:function(){return r?le():Y(!0)},children:"\u8d2d\u4e70"}):Object(V.jsx)(D.a,{type:"text",shape:"round",size:"small",onClick:ie,children:"\u6388\u6743"})]}):Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(D.a,{style:{color:"#6080B4",fontWeight:"bold",fontSize:"15px"},type:"text",shape:"round",size:"small",onClick:Z.b,children:"\u8d2d\u4e70"})})})}var $=n(936),ee=n(2368),te=n.n(ee),ne=n(228),re=i.a.useBreakpoint;function ae(){var e=Object(b.c)((function(e){return e})),t=e.web3,n=e.walletAddress,r=e.sellOrderList,i=e.availableSellOrder721,x=e.market,h=e.chainId,O=e.nftList,f=e.convertErc1155Tokens,m=e.availableSellOrder1155,g=e.erc1155Tokens,N=e.infoCollections,C=e.orbitdb,S=Object(u.h)(),A=S.chainID,B=S.addressToken,z=S.id,D=S.sellID,T=re().lg,P=Object(b.b)(),R=Object(u.f)(),L=Object(d.useState)(null),W=Object(s.a)(L,2),M=W[0],H=W[1],Y=Object(d.useState)(null),Q=Object(s.a)(Y,2),q=Q[0],J=Q[1],U=Object(d.useState)(!1),G=Object(s.a)(U,2),X=G[0],ee=G[1],ae=Object(d.useState)(),ce=Object(s.a)(ae,2),se=ce[0],ie=ce[1],le=Object(d.useState)(1),oe=Object(s.a)(le,2),de=oe[0],be=oe[1],ue=Object(d.useState)([]),je=Object(s.a)(ue,2),pe=je[0],xe=je[1],he=Object(d.useState)([]),Oe=Object(s.a)(he,2),fe=Oe[0],me=Oe[1],ve=Object(d.useState)(1),ge=Object(s.a)(ve,2),ke=ge[0],ye=ge[1],we=Object(d.useState)(null),Ne=Object(s.a)(we,2),Ce=Ne[0],Ie=Ne[1],Se=Object(d.useState)(null),Ee=Object(s.a)(Se,2),Ae=Ee[0],Fe=Ee[1];Object(d.useEffect)((function(){parseInt(h)!==parseInt(A)&&Object(Z.d)(A,n)}),[n,h,A]);var Be=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.a)(t,n);case 2:if(!(r=e.sent)||!pe[0]){e.next=12;break}return e.next=6,r.get(pe[0].owner.toLowerCase()+"_profile");case 6:return c=e.sent,e.next=9,r.get("".concat(B,"_").concat(h,"_").concat(z,"_history"));case 9:s=e.sent,P(Object(v.db)(s)),Fe(c);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){C&&pe&&Be("/orbitdb/zdpuAoo1YYEnqQWrj5UezXyhMyTcfFDYo85a7Hw8ce9RKw6p2/dev",C)}),[C,pe[0]]),Object(d.useEffect)((function(){var e=setTimeout((function(){P(Object(v.Z)())}),500);return function(){clearTimeout(e)}}),[P]),Object(d.useEffect)((function(){!function(e,t,n,r,a,c,s,i){k.apply(this,arguments)}(t,O,B,z,g,ye,J,H)}),[t,O,B,z,g,N]);var ze=Object(d.useCallback)(Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x&&w(f,B,z,h,x,xe,me);case 1:case"end":return e.stop()}}),e)}))),[f,B,z,h,x]),De=Object(d.useCallback)(Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&r&&i&&O)){e.next=5;break}return e.next=3,O.methods.isERC1155(B).call();case 3:e.sent?(ze(),ee(!0),Number.isInteger(parseInt(D))&&"null"!==D?E(i,m,O,r,n,t,D,be,ie,R):F(n,be,B,z,h,t)):I(B,i,z,x,O,r,n,t,be,xe,me,ie,R,D);case 5:case"end":return e.stop()}}),e)}))),[B,i,m,z,x,O,r,n,t,D,ze,h,R]);Object(d.useEffect)((function(){De()}),[De]);var Te=Object(d.useCallback)(Object(c.a)(a.a.mark((function e(){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!se||!h){e.next=14;break}return e.next=3,t.utils.fromWei(se.price,"ether");case 3:if(n=e.sent,4!==h){e.next=10;break}return e.next=7,Object(y.f)(n);case 7:r=e.sent,e.next=13;break;case 10:return e.next=12,Object(y.e)(n);case 12:r=e.sent;case 13:Ie(r);case 14:case"end":return e.stop()}}),e)}))),[se,t.utils,h]);return Object(d.useEffect)((function(){Ce||Te()}),[Te,Ce]),Object(V.jsx)("div",{style:{width:"100%",background:"#f7f8fb"},children:Object(V.jsx)("div",{className:"detail-page center",children:Object(V.jsx)("div",{className:"body-page",children:q?Object(V.jsx)("div",{className:"detail-main",children:Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[T?Object(V.jsxs)("div",{className:"info-wrap-left",children:[Object(V.jsx)("div",{className:"expand-img-nft",children:Object(V.jsx)("div",{className:"image-label center",children:Object(V.jsx)(l.a,{alt:"img-nft",src:q.image})})}),Object(V.jsx)("div",{className:"description-nft",children:Object(V.jsxs)("div",{className:"content-properties",children:[Object(V.jsx)("div",{className:"title-tab-properties",children:Object(V.jsx)("h3",{className:"nft-h3",children:"\u7b80\u4ecb"})}),q.description?Object(V.jsx)("div",{className:"detail-des textmode",children:q.description}):Object(V.jsx)("div",{className:"attribute-empty",children:"\u6682\u65e0\u7b80\u4ecb"})]})}),Object(V.jsx)("div",{className:"properties-nft",children:Object(V.jsxs)("div",{className:"content-properties",children:[Object(V.jsx)("div",{className:"title-tab-properties",children:Object(V.jsx)("h3",{className:"nft-h3",children:"\u5c5e\u6027"})}),Object(V.jsx)("div",{className:"list-properties",children:Object(V.jsx)("div",{className:"items-properties",children:q.attributes.length?q.attributes.map((function(e,t){return Object(V.jsxs)("div",{className:"item-properties",children:[Object(V.jsx)("div",{className:"name-properties",children:e.trait_type}),Object(V.jsx)("div",{className:"value-properties textmode",children:e.display_type&&"date"===e.display_type.toLowerCase()&&te()(e.value).isValid()?te()(e.value.toString().length<13?1e3*e.value:e.value).format("DD-MM-YYYY"):e.value})]},t)})):Object(V.jsx)("div",{className:"attribute-empty",children:"\u6682\u65e0\u5c5e\u6027"})})})]})})]}):null,Object(V.jsxs)("div",{className:"info-wrap-right",children:[Object(V.jsxs)("div",{className:"info-order-nft",children:[Object(V.jsx)("div",{className:"detail-title",children:Object(V.jsx)("h1",{children:q.name})}),"null"!==D?Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(V.jsxs)("div",{className:"show-price",children:[Object(V.jsx)("div",{children:se?"".concat(Object(y.d)(t.utils.fromWei(se.price,"ether"),4)+"".concat(4===h?" ETH":" BNB")):Object(V.jsx)(o.a,{className:"textmode",style:{fontSize:"24px"}})}),Object(V.jsx)("div",{className:"price",children:se?"\u2248$ ".concat(Ce):""})]}),Object(V.jsx)("span",{className:"width100",style:{textAlign:"end",margin:"30px 20px 0 0"},children:!n||n&&se&&"null"!==D&&se.seller.toLowerCase()!==n.toLowerCase()?Object(V.jsx)(_,{token:q,orderDetail:se,is1155:X,id:z,addressToken:B,getOwners1155:ze,setOrderDetail:ie,bigStyle:!0}):null})]}):null,Object(V.jsxs)("div",{className:"collections-nft",children:[Object(V.jsxs)("div",{style:{fontSize:"16px"},children:[Object(V.jsxs)("div",{className:"textBlack",children:["\u4f5c\u8005",Object(V.jsx)("span",{style:{color:"rgba(0,0,0,0.30)"},children:"\uff0810% \u7248\u7a0e\uff09"})]}),q.nameCollection]}),Object(V.jsxs)("div",{style:{margin:"0 45px"},children:[Object(V.jsx)("div",{className:"textBlack",children:"\u4f5c\u54c1\u96c6"}),Object(V.jsx)(j.b,{to:"/collection/detail/".concat(B),children:q.nameCollection})]}),Object(V.jsxs)("div",{children:[Object(V.jsx)("div",{className:"textBlack",children:"\u6301\u6709\u8005"}),pe.map((function(e,t){var n;return Object(V.jsx)("div",{className:"avatar-link-available",children:Object(V.jsx)("div",{className:"link-and-available",children:Object(V.jsx)(j.b,{to:"/profile/index/".concat(h,"/").concat(e.owner.toLowerCase()),className:"owner",children:Ae&&(null===Ae||void 0===Ae||null===(n=Ae.userName)||void 0===n?void 0:n.length)>1?Ae.userName:Object(V.jsx)("strong",{children:"".concat(e.owner.slice(0,8),"...").concat(e.owner.slice(e.owner.length-6,e.owner.length))})})})},t)}))]})]})]}),Object(V.jsxs)("div",{className:"purchase-nft",children:[Object(V.jsx)("h3",{className:"nft-h3",children:"\u51fa\u552e\u5217\u8868"}),Object(V.jsxs)("div",{children:[Object(V.jsxs)("div",{className:"order-title",children:[Object(V.jsx)("span",{className:"width100",children:"\u5355\u4ef7"}),Object(V.jsx)("span",{className:"width100",children:"\u6570\u91cf"}),Object(V.jsx)("span",{className:"width100",children:"\u5356\u5bb6"})]}),Object(V.jsxs)("div",{className:"order-List",children:[Object(V.jsx)("span",{className:"width100",children:se&&"null"!==D?Object(V.jsx)("div",{className:"title-and-price",children:Object(V.jsxs)("span",{className:"price-eth color-black",children:[Object(y.d)(t.utils.fromWei(se.price,"ether"),4)," ",4===h?" ETH":" BNB"]})}):Object(V.jsx)(V.Fragment,{children:"--"})}),Object(V.jsx)("span",{className:"width100",children:se&&"null"!==D?Object(V.jsx)("div",{className:"color-black",children:fe?fe[0].value:1}):Object(V.jsx)(V.Fragment,{children:"--"})}),Object(V.jsx)("span",{className:"width100",children:se&&"null"!==D?Object(V.jsx)("div",{children:Object(V.jsx)(j.b,{to:"/profile/index/".concat(h,"/").concat(se.seller.toLowerCase()),className:"owner",children:Ae?Ae.userName:Object(V.jsx)("strong",{children:"".concat(se.seller.slice(0,8),"...").concat(se.seller.slice(se.seller.length-6,se.seller.length))})})}):Object(V.jsx)(V.Fragment,{children:"--"})}),Object(V.jsx)("span",{className:"width100",style:{textAlign:"end"},children:!n||n&&se&&"null"!==D&&se.seller.toLowerCase()!==n.toLowerCase()?Object(V.jsx)(_,{token:q,orderDetail:se,is1155:X,id:z,addressToken:B,getOwners1155:ze,setOrderDetail:ie}):null})]})]}),Object(V.jsx)("div",{className:"style-purchase",children:Object(V.jsx)("div",{className:"actions-nft",children:Object(V.jsx)(K,{status:de,token:q,orderDetail:se,is1155:X,available:ke,web3:t,chainId:h})})})]}),Object(V.jsxs)("div",{className:"nft-details",children:[Object(V.jsx)("h3",{className:"nft-h3",children:"\u8be6\u60c5"}),Object(V.jsxs)("div",{className:"flex-between mb15",children:[Object(V.jsx)("div",{className:"color-black",children:"\u5408\u7ea6\u5730\u5740"}),Object(V.jsx)("div",{children:Object(V.jsx)("a",{href:"".concat(Object($.a)(h),"/address/").concat(B),target:"_blank",rel:"noreferrer",className:"href-to-address-contract",children:T?B:"".concat(B.slice(0,8),"...").concat(B.slice(B.length-6,B.length))})})]}),Object(V.jsxs)("div",{className:"flex-between mb15",children:[Object(V.jsx)("div",{className:"color-black",children:"Token ID"}),Object(V.jsx)("div",{className:"color-black",children:z})]}),Object(V.jsxs)("div",{className:"flex-between mb15",children:[Object(V.jsx)("div",{className:"color-black",children:"NFT\u6807\u51c6"}),Object(V.jsx)("div",{className:"color-black",children:"ERC-721"})]}),Object(V.jsxs)("div",{className:"flex-between",children:[Object(V.jsx)("div",{className:"color-black",children:"\u5143\u6570\u636e"}),Object(V.jsx)("div",{className:"href-to-address-contract",children:Object(V.jsx)("a",{href:M,target:"_blank",rel:"noreferrer",className:"href-to-address-contract",children:"IPFS"})})]})]})]})]})}):Object(V.jsx)("div",{className:"center",style:{width:"100%",minHeight:"200px"},children:Object(V.jsx)(p.a,{})})})})})}}}]);
//# sourceMappingURL=7.f77248c6.chunk.js.map