(this["webpackJsonpdidi-nft"]=this["webpackJsonpdidi-nft"]||[]).push([[8],{2347:function(e,t,n){},2365:function(e,t,n){},2366:function(e,t,n){},2367:function(e,t,n){},2379:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ne}));var r=n(1),c=n.n(r),a=n(14),s=n(34),i=n(943),l=n(2377),o=n(0),d=n(61),b=n(79),u=n(111),j=n(563),p=n(409),x=n(238),h=n(203),O=n.n(h),f=n(561),m=n(19),v=n(67);function k(){return(k=Object(a.a)(c.a.mark((function e(t,n,r,a,s,i,l){var o,d,b,u,j,h,k,g,w;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=43;break}return e.next=3,n.methods.isERC1155(r).call();case 3:return o=e.sent,e.next=6,v.a.dispatch(Object(m.X)(r,null));case 6:if(b=e.sent.collection.name,!o){e.next=26;break}return e.next=10,new t.eth.Contract(p.abi,r);case 10:return u=e.sent,e.next=13,u.methods.uri(a).call();case 13:if(d=e.sent,!s){e.next=24;break}j=0;case 16:if(!(j<s.length)){e.next=24;break}if((h=s[j]).addressToken.toLowerCase()!==r.toLowerCase()||parseInt(h.index)!==parseInt(a)){e.next=21;break}return i(h.value),e.abrupt("break",24);case 21:j++,e.next=16;break;case 24:e.next=32;break;case 26:return e.next=28,new t.eth.Contract(x.abi,r);case 28:return k=e.sent,e.next=31,k.methods.tokenURI(a).call();case 31:d=e.sent;case 32:return e.prev=32,e.next=35,O.a.get(d);case 35:g=e.sent,w=g.data,l({name:w.name?w.name:"Unnamed",description:w.description?w.description:"",image:w.image?w.image:f.a,nameCollection:b,attributes:w.attributes?w.attributes:[]}),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(32),l({name:"Unnamed",description:"",image:f.a,nameCollection:"Unnamed",attributes:[]});case 43:case"end":return e.stop()}}),e,null,[[32,40]])})))).apply(this,arguments)}var g=n(559);function w(e,t,n,r,c,a,s){return y.apply(this,arguments)}function y(){return(y=Object(a.a)(c.a.mark((function e(t,n,r,a,s,i,l){var o,d,b,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],d=0;case 2:if(!(d<t.length)){e.next=10;break}if((b=t[d]).addressToken.toLowerCase()!==n.toLowerCase()){e.next=7;break}return o=b.tokens,e.abrupt("break",10);case 7:d++,e.next=2;break;case 10:return o=o.filter((function(e){return parseInt(e.index)===parseInt(r)})),e.next=13,Object(g.c)(n,r,a,s._address);case 13:u=e.sent,i(u.ownersOf1155),l(o);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=n(9);function C(e,t,n,r,c,a,s,i,l,o,d,b,u,j){return I.apply(this,arguments)}function I(){return(I=Object(a.a)(c.a.mark((function e(t,n,r,a,s,i,l,o,d,b,u,j,p,h){var O,f,m,v,k,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o&&i&&n&&s)){e.next=42;break}return e.prev=1,e.next=4,new o.eth.Contract(x.abi,t);case 4:if(O=e.sent,"null"!==h){e.next=12;break}return e.next=8,O.methods.ownerOf(r).call();case 8:f=e.sent,b([{owner:f,totalSupply:1,value:1}]),e.next=16;break;case 12:return e.next=14,i.methods.getSellOrderById(h).call();case 14:(m=e.sent).isActive?(f=m.seller,b([{owner:f,totalSupply:1,value:1}]),u([{seller:f,totalSupply:1,value:1,price:m.price,tokenPayment:m.token,sellId:m.sellId,amount:m.amount}])):p.push("/404");case 16:if(!l){e.next=20;break}return e.next=19,i.methods.checkDuplicateERC721(t,r,l).call();case 19:v=e.sent;case 20:if(!l||!v){e.next=24;break}d(3),e.next=35;break;case 24:if(!l||f.toLowerCase()!==l.toLowerCase()){e.next=31;break}return e.next=27,i.methods.checkDuplicateERC721(t,r,f).call();case 27:k=e.sent,d(k?3:2),e.next=35;break;case 31:return e.next=33,i.methods.checkDuplicateERC721(t,r,f).call();case 33:e.sent||f===a._address?d(1):d(0);case 35:(g=n.filter((function(e){return e.nftAddress.toLowerCase()===t.toLowerCase()&&e.tokenId===r})))[0]&&j(Object(N.a)(Object(N.a)({},g[0]),{},{tokenPayment:g[0].token})),e.next=42;break;case 39:e.prev=39,e.t0=e.catch(1),console.log(e.t0);case 42:case"end":return e.stop()}}),e,null,[[1,39]])})))).apply(this,arguments)}function S(e,t,n,r,c,a,s,i,l,o){return E.apply(this,arguments)}function E(){return(E=Object(a.a)(c.a.mark((function e(t,n,r,a,s,i,l,o,d,b){var u,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i&&a&&t&&r)){e.next=12;break}return e.prev=1,e.next=4,a.methods.getSellOrderById(l).call();case 4:(u=e.sent).isActive?(s&&u.seller.toLowerCase()===s.toLowerCase()?o(3):o(1),(j=n.filter((function(e){return e.sellId===l})))[0]&&d(Object(N.a)(Object(N.a)({},j[0]),{},{tokenPayment:j[0].token}))):b.push("/404"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),b.push("/404");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function A(e,t,n,r,c,a,s){return B.apply(this,arguments)}function B(){return(B=Object(a.a)(c.a.mark((function e(t,n,r,a,s,i,l){var o,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s&&a&&r)){e.next=17;break}if(e.prev=1,!t){e.next=11;break}return o=new i.eth.Contract(p.abi,r),e.next=6,o.methods.balanceOf(t,a).call();case 6:d=e.sent,l(d),n(d>0?2:0),e.next=12;break;case 11:n(0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}n(976);var F=n(2326),z=n(101),D=n(974),P=n(2323),T=n(2322),R=n(2328),L=n(2327),W=n(975),M=(n(2365),n(316)),V=n(2);function J(e){var t=e.visible,n=e.approve,r=e.selling,i=e.handleOk,l=e.setIsLoading,d=Object(o.useState)(!1),b=Object(s.a)(d,2),u=b[0],j=b[1];Object(o.useEffect)((function(){j(t)}),[t]);var p=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(D.a,{visible:u,footer:Object(V.jsx)("div",{}),centered:!0,width:500,onCancel:function(){j(!1),l(!1)},children:Object(V.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(V.jsxs)("div",{style:{width:"90%",margin:"25px 0"},children:[Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(V.jsxs)("div",{className:"textMode",children:[Object(V.jsx)("span",{className:"one",children:"1"}),Object(V.jsx)("span",{children:"\u6388\u6743"})]}),"3"===n?Object(V.jsxs)("div",{style:{color:"#43A047"},children:["\u5df2\u5b8c\u6210",Object(V.jsx)("img",{src:M.a,alt:"yes",style:{width:"22px"}})]}):null]}),Object(V.jsx)("div",{children:"\u51fa\u552e\u6b64\u4f5c\u54c1\u96c6\u4e2d\u7684\u4f5c\u54c1\u9700\u8fdb\u884c\u4e00\u6b21\u6027\u6388\u6743\u3002"}),"1"===n?Object(V.jsx)(W.b,{style:{width:"100%"},children:Object(V.jsx)(z.a,{type:"primary",loading:!0,style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u6388\u6743\u4e2d"})}):"2"===n?Object(V.jsxs)(W.b,{style:{width:"100%",display:"flex",flexDirection:"column"},children:[Object(V.jsx)(z.a,{onClick:function(){p()},type:"primary",style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(V.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]}),Object(V.jsxs)("div",{style:{width:"90%",margin:"25px 0"},children:[Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(V.jsxs)("div",{className:"textMode",children:[Object(V.jsx)("span",{className:"one",children:"2"}),Object(V.jsx)("span",{children:"\u4e0a\u67b6\u51fa\u552e"})]}),"3"===r?Object(V.jsxs)("div",{style:{color:"#43A047"},children:["\u5df2\u5b8c\u6210",Object(V.jsx)("img",{src:M.a,alt:"yes",style:{width:"22px"}})]}):null]}),Object(V.jsx)("div",{children:"\u4e0a\u67b6\u51fa\u552e\u9700\u652f\u4ed8\u4e00\u7b14\u77ff\u5de5\u8d39\u3002"}),"1"===r?Object(V.jsx)(W.b,{style:{width:"100%"},children:Object(V.jsx)(z.a,{type:"primary",loading:!0,style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u4e0a\u67b6\u4e2d"})}):"2"===r?Object(V.jsxs)(W.b,{style:{width:"100%",display:"flex",flexDirection:"column",height:"50px"},children:[Object(V.jsx)(z.a,{onClick:function(){p()},type:"primary",style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(V.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]})]})})}n(2347);function Q(e){e.token;var t=e.is1155,n=e.available,r=e.getOwners1155,i=Object(d.b)(),l=Object(b.f)(),u=Object(d.c)((function(e){return e})),j=u.web3,p=u.chainId,x=u.approveError,h=u.sellError,O=Object(b.h)(),f=O.addressToken,v=O.id,k=Object(o.useState)(!1),g=Object(s.a)(k,2),w=g[0],y=g[1],N=Object(o.useState)(!1),C=Object(s.a)(N,2),I=C[0],S=C[1],E=Object(o.useState)("0"),A=Object(s.a)(E,2),B=A[0],W=A[1],M=Object(o.useState)(!1),Q=Object(s.a)(M,2),U=Q[0],Y=Q[1],q=Object(o.useState)(""),H=Object(s.a)(q,2),G=H[0],X=H[1],K=F.a.useForm(),Z=Object(s.a)(K,1)[0];Object(o.useEffect)((function(){"4001"===x?W("2"):"4000"===x?W("1"):"1"===x&&(W("3"),Y("1")),"4001"===h?Y("2"):"4000"===h?Y("1"):"1"===h&&(Y("0"),Y("3"))}),[x,h]);var _=Object(o.useCallback)(Object(a.a)(c.a.mark((function e(){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.validateFields();case 2:if(!((n=e.sent)&&parseFloat(n.price)>0)){e.next=16;break}return S(!0),W("1"),e.next=8,i(Object(m.V)(f,v,j.utils.toWei(n.price.toString(),"ether"),"0x0000000000000000000000000000000000000000",n.amount?n.amount:1));case 8:if(!(a=e.sent).status){e.next=16;break}if(!t){e.next=13;break}return e.next=13,r();case 13:y(!1),Z.resetFields(),l.push({pathname:"/token/".concat(p,"/").concat(f,"/").concat(v,"/").concat(a.sellId)});case 16:case"end":return e.stop()}}),e)}))),[i,f,v,j.utils,t,l,Z,r,p]),$=function(){var e=Object(a.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Not enough amount")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"gSzfBw",children:Object(V.jsx)(z.a,{style:{background:"#6080b4",border:"none",borderRadius:"10px"},type:"primary",size:"large",onClick:function(){y(!0)},children:"\u51fa\u552e"})}),Object(V.jsx)(D.a,{title:Object(V.jsx)("h3",{className:"textmode mgb-0",children:"\u51fa\u552e"}),visible:w,onCancel:function(){i({type:m.m,sellError:"0"}),y(!1),Z.resetFields()},centered:!0,footer:[Object(V.jsx)(z.a,{style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none"},type:"primary",shape:"round",size:"large",onClick:function(){return _()},children:"\u51fa\u552e"},"sell")],children:Object(V.jsx)(F.a,{form:Z,className:"input-sell",layout:"vertical",children:Object(V.jsxs)(P.a,{gutter:[5,10],children:[Object(V.jsxs)(T.a,{xs:{span:24},md:{span:t?17:24},children:[Object(V.jsx)("div",{className:"ant-col ant-form-item-label",children:Object(V.jsx)("label",{htmlFor:"price",className:"ant-form-item-required",title:"Price",children:"\u4ef7\u683c"})}),Object(V.jsx)(R.a.Group,{compact:!0,label:"Price",children:Object(V.jsx)(F.a.Item,{name:["price"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ef7\u683c"}],style:{width:"60%"},children:Object(V.jsx)(L.a,{style:{width:"460px",borderRadius:"0px"},min:"0.01",size:"large",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},placeholder:"\u8bf7\u8f93\u5165\u4ef7\u683c",addonAfter:4===p?"ETH":"BNB",onChange:function(e){return X((.975*e).toFixed(4))}})})}),Object(V.jsxs)("div",{className:"flex-between",children:[Object(V.jsx)("div",{children:"\u670d\u52a1\u8d39\u7387\uff1a"}),Object(V.jsxs)("div",{children:[Object(V.jsx)("span",{className:"bold",children:"2.50"}),"%"]})]}),Object(V.jsxs)("div",{className:"flex-between",children:[Object(V.jsx)("div",{children:"\u7248\u7a0e\u7387\uff1a"}),Object(V.jsxs)("div",{children:[Object(V.jsx)("span",{className:"bold",children:"0"}),"%"]})]}),Object(V.jsxs)("div",{className:"flex-between",children:[Object(V.jsx)("div",{children:"\u4f60\u5c06\u83b7\u5f97\u7684\u603b\u91d1\u989d\uff1a"}),Object(V.jsxs)("div",{children:[Object(V.jsx)("span",{className:"bold",children:G}),4===p?"ETH":"BNB"]})]})]}),t?Object(V.jsx)(T.a,{xs:{span:24},md:{span:7},children:Object(V.jsx)(R.a.Group,{children:Object(V.jsx)(F.a.Item,{required:!0,name:["amount"],rules:[{validator:$}],label:"Amount",className:"input-amount-sell textmode",children:Object(V.jsx)(L.a,{min:"1",size:"large",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},placeholder:"Amount",className:"textmode"})})})}):Object(V.jsx)(V.Fragment,{})]})})}),I?Object(V.jsx)(J,{visible:!0,approve:B,selling:U,setIsLoading:S,handleOk:_}):Object(V.jsx)(V.Fragment,{})]})}function U(e){var t=e.orderDetail,n=e.is1155,r=e.getOwners1155,i=e.chainId,l=Object(d.c)((function(e){return e})).cancelError,u=Object(o.useState)(!1),j=Object(s.a)(u,2),p=j[0],x=j[1],h=Object(o.useState)(!1),O=Object(s.a)(h,2),f=O[0],v=O[1],k=Object(o.useState)("0"),g=Object(s.a)(k,2),w=g[0],y=g[1],N=Object(d.b)(),C=function(){x(!1),v(!1)};Object(o.useEffect)((function(){"4001"===l?y("2"):"4000"===l?y("1"):"1"===l&&y("0")}),[l]);var I=Object(b.f)(),S=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.sellId){e.next=13;break}return v(!0),y("1"),e.next=5,N(Object(m.T)(t));case 5:if(!e.sent){e.next=13;break}if(x(!1),v(!1),!n){e.next=12;break}return e.next=12,r();case 12:I.push({pathname:"/token/".concat(i,"/").concat(t.nftAddress,"/").concat(t.tokenId,"/null")});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{className:"gSzfBw",children:[Object(V.jsx)(z.a,{style:{borderRadius:"10px"},size:"large",onClick:function(){x(!0),y("1")},className:"btn-cancel-sell",children:"\u4e0b\u67b6"}),Object(V.jsxs)(D.a,{title:"\u4e0b\u67b6",onCancel:C,visible:p,footer:Object(V.jsx)("div",{}),centered:!0,children:[Object(V.jsx)("p",{style:{textAlign:"center"},children:"\u4e0b\u67b6\u540e\u60a8\u4ecd\u7136\u53ef\u4ee5\u91cd\u65b0\u51fa\u552e"}),Object(V.jsx)("p",{style:{textAlign:"center",marginBottom:"30px"},children:"\u4e0b\u67b6\u7269\u54c1\u9700\u8981\u53d1\u8d77\u4e00\u7b14\u4ea4\u6613"}),Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(V.jsx)(z.a,{style:{width:"210px",height:"42px",background:"#fff",borderRadius:"10px",border:"1px solid #6080b4",color:"#6080b4"},size:"large",onClick:C,className:"btn-cancel-sell",children:"\u53d6\u6d88"}),"1"===w?Object(V.jsx)(W.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:Object(V.jsx)(z.a,{onClick:S,type:"primary",loading:f,style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff"},children:f?"\u4e0b\u67b6\u4e2d":"\u4e0b\u67b6"})}):"2"===w?Object(V.jsxs)(W.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:[Object(V.jsx)(z.a,{onClick:S,type:"primary",style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff",marginLeft:"20px"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(V.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]})]})]})}function Y(e){e.token;var t=e.is1155,n=e.available,r=e.web3,i=(e.getOwners1155,Object(d.c)((function(e){return e})).transferError),l=Object(d.b)(),u=F.a.useForm(),j=Object(s.a)(u,1)[0],p=Object(o.useState)(!1),x=Object(s.a)(p,2),h=x[0],O=x[1],f=Object(o.useState)(""),v=Object(s.a)(f,2),k=v[0],g=v[1],w=Object(b.h)(),y=w.addressToken,N=w.id,C=Object(o.useState)(!1),I=Object(s.a)(C,2),S=I[0],E=I[1],A=Object(o.useState)(!1),B=Object(s.a)(A,2),W=B[0],M=B[1];Object(o.useEffect)((function(){"4001"===i?(M(!1),E(!0)):"4000"===i?E(!1):"1"===i&&(M(!1),O(!1))}),[i]);var J=function(){var e=Object(a.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.validateFields();case 2:if(!(n=e.sent)){e.next=8;break}return M(!0),E(!1),e.next=8,l(Object(m.nb)(y,k,N,n.amount,t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){O(!1),M(!1),E(!1),j.resetFields()},U=function(){var e=Object(a.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Not enough amount")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("\u8bf7\u8f93\u5165\u5730\u5740")));case 4:if(r.utils.isAddress(n)){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("div",{style:{cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center"},onClick:function(){O(!0)},children:[Object(V.jsx)("img",{style:{marginRight:"5px"},width:14,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAgCAYAAAB3j6rJAAAAAXNSR0IArs4c6QAAA5tJREFUWEfFV9lPE2EQ/xVbUcCgcpRLKIeClktCW4kPUBAEffNJy/Hoiwd4ofEPEO9okGhiYjQBr6BGwcQoXugDNyhCOMpZUgSW+6bHmm+bAm2hbFuQedlkd3bm983Mb2Y+Dk3TNP6zKAcm0NBOoaFtAPKeYUSFeIDzP4CMTsyisZ3Cn3aKeY6Mzxgc3XEzb22AzKk0aOoaYk5MHPf0j5uN+d5g/uoAIcntUI4w4SaO5YphqDVa1gnPOBxmPZD+4Sk0tOkcN3ZQmJpRsXZsrHgjM549kMlpFeNQV2QUqJEpqx0v/tHT1QlXTsQuD4SEtrV7WOe4fQDdvWPQrgHBDsYE4GjSbkMgir6x+RO3dA+BFN1ay/l0CYQBruC0KobozxVdTK7HJmfX2q+BfXveBty7mATuBjtwMm9+ognP10MidvGRdSyacc3Je1lNVzb2rgqOEIELY6epc5CVvfRDoYgX+emAqDVa+uGbOpT/UbL62ViJdMX9ET6IjfLF95pufCzrYG3n+mkp3LY56IDoW3zBh0aUlLM3EuizDdJoP4iFntBoaTworMGv1n7WIDxcnJBzMnZe32DWFP+Q49WX5mWNbbbnYl+YNwNgB38Lozc4Oo07TytXbOPGRhMl/pAl71kaCHlbWqvAk+J6aLULQ9nXwxnSaF/EhHuDVLpeyOTMfV5tFdvOpYkRGui2PBDypba5D4/e/kZkMJ8BEOC91SRKZfVKPHr3Gyq15b1mI6FtdhJ4XDvzQMhX0kQ5nKWz9PprC4pKW1nXg7Fi+E53nJGJDF5btI+o1FoQhtlK97QUIRLEAuuAkKZ391kVM+5tlaunpOBv19FWL6wjcjnvO3qpCVsxwH27I66dijOxwxpI5s0Sq9hh7PGAWIDUFOH6AzmTKkZ40AJtLU7NakSEx9VN242LaLsuQMKC3HA2VbxknVldI2TYxYsEeP9TbtCFzVWzLFmIRIkhbW2KiMMmHrIzJPDzdGa68P3CWlYdNudkHDxcHFcnIgTEhQwJBJ7O8wbJWkl6jLlNnox7MvaXE4tSQxZqsmP6ey2A0Bsml6hb+RUmtzj99wSRAGmHTGlrcWou5X7D8SORSw5AvTFqZBq38svxd3DS5OBZMhEidrrbHhElNQEvV6cVO+v41BxuF1SgUzk6r8vQNjsRZOranJoVESxSmJnTIPdFFXMzIEKuCySl5oR1jVgChOiS9fFxUT3qmvuYlJIeYk7+AeqE7cjoZdeEAAAAAElFTkSuQmCC",alt:"send"}),Object(V.jsx)("div",{style:{color:"#6080B4",fontSize:"15px"},children:"\u8d60\u9001"})]}),Object(V.jsx)(D.a,{width:550,title:Object(V.jsx)("h3",{className:"textmode mgb-0",children:"\u8d60\u9001"}),visible:h,onCancel:Q,centered:!0,footer:[Object(V.jsx)(z.a,{shape:"round",size:"large",onClick:function(){return Q()},style:{width:"220px",height:"42px",borderRadius:"10px",border:"1px solid #6080b4",color:"#6080b4"},children:"\u53d6\u6d88"},"cancel"),Object(V.jsx)(z.a,{type:"primary",loading:W,shape:"round",size:"large",onClick:function(){return J()},style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",display:"".concat(S?"none":"inline-block")},children:W?"\u652f\u4ed8\u4e2d":"\u8d60\u9001"},"sell"),Object(V.jsx)(z.a,{type:"primary",loading:W,shape:"round",size:"large",onClick:function(){return J()},style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",display:"".concat(S?"inline-block":"none")},children:"\u518d\u8bd5\u4e00\u6b21"},"transfer")],children:Object(V.jsx)("div",{className:"price-des",children:Object(V.jsx)(F.a,{form:j,layout:"vertical",className:"input-transfer",children:Object(V.jsxs)(P.a,{gutter:[5,10],children:[Object(V.jsxs)(T.a,{xs:{span:24},md:{span:t?17:24},children:[Object(V.jsx)("div",{style:{marginBottom:"20px"},children:"\u8d60\u9001\u7269\u54c1\u9700\u8981\u53d1\u8d77\u4e00\u7b14\u4ea4\u6613"}),Object(V.jsx)(F.a.Item,{name:["address"],rules:[{validator:Y}],label:"\u63a5\u6536\u5730\u5740",required:!0,children:Object(V.jsx)(R.a,{width:200,size:"large",className:"search-style",onChange:function(e){g(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5730\u5740"})}),Object(V.jsx)("div",{style:{color:"red",width:"100%",textAlign:"center",marginTop:"10px",display:"".concat(S?"block":"none")},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}),t?Object(V.jsx)(T.a,{xs:{span:24},md:{span:7},children:Object(V.jsx)(F.a.Item,{name:["amount"],rules:[{validator:U}],label:"Amount",required:!0,children:Object(V.jsx)(L.a,{min:"1",size:"large",className:"search-style input-amount-transfer input-sell",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},placeholder:"Set amount"})})}):null]})})})})]})}function q(e){var t=e.orderDetail,n=(e.token,e.is1155),r=(e.available,e.getOwners1155,Object(d.b)()),i=Object(d.c)((function(e){return e})),l=i.web3,u=i.chainId,j=i.updateError,p=Object(b.h)().sellID,x=Object(o.useState)(!1),h=Object(s.a)(x,2),O=h[0],f=h[1],v=Object(o.useState)("0"),k=Object(s.a)(v,2),g=k[0],w=k[1],y=Object(o.useState)(!1),N=Object(s.a)(y,2),C=N[0],I=N[1],S=F.a.useForm(),E=Object(s.a)(S,1)[0],A=Object(o.useCallback)(Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.validateFields();case 2:if(!((t=e.sent)&&parseFloat(t.price)>0)){e.next=10;break}return I(!0),w("1"),e.next=8,r(Object(m.ob)(p,l.utils.toWei(t.price.toString(),"ether")));case 8:(n=e.sent)&&(console.log(n),f(!1),w("0"),I(!1),E.resetFields());case 10:case"end":return e.stop()}}),e)}))),[r,l.utils,p,E]),B=function(){f(!1),I(!1),w("0"),E.resetFields()};return Object(o.useEffect)((function(){"4001"===j?w("2"):"4000"===j?w("1"):"1"===j&&w("0")}),[j]),Object(V.jsxs)("div",{className:"gSzfBw",children:[Object(V.jsx)(z.a,{style:{background:"#6080B4",border:"none",borderRadius:"10px"},type:"primary",size:"large",onClick:function(){f(!0),w("1")},children:"\u66f4\u6539\u4ef7\u683c"},"change"),Object(V.jsxs)(D.a,{title:Object(V.jsx)("h3",{className:"textmode mgb-0",children:"\u66f4\u6539\u4ef7\u683c"}),visible:O,onCancel:B,footer:Object(V.jsx)("div",{}),centered:!0,children:[Object(V.jsx)(F.a,{form:E,className:"input-sell",layout:"vertical",children:Object(V.jsxs)(P.a,{gutter:[5,10],children:[Object(V.jsxs)(T.a,{xs:{span:24},md:{span:n?17:24},children:[Object(V.jsx)("div",{className:"ant-col ant-form-item-label",children:Object(V.jsx)("label",{htmlFor:"price",className:"ant-form-item-required",title:"Price",children:"\u4ef7\u683c"})}),Object(V.jsx)(R.a.Group,{compact:!0,label:"Price",children:Object(V.jsx)(F.a.Item,{name:["price"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ef7\u683c"}],className:"input-price",children:Object(V.jsx)(L.a,{style:{width:"460px",borderRadius:"0px"},min:"0.01",size:"large",className:"search-style",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},placeholder:"\u8bf7\u8f93\u5165\u6700\u65b0\u4ef7\u683c",addonAfter:97===u?"BNB":"ETH"})})})]}),n?Object(V.jsx)(T.a,{xs:{span:24},md:{span:7},children:Object(V.jsx)(R.a.Group,{children:Object(V.jsx)(F.a.Item,{required:!0,name:["amount"],label:"Amount",className:"input-amount-sell",children:Object(V.jsx)(L.a,{min:"1",size:"large",defaultValue:t?t.amount:0,formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},placeholder:"Amount",disabled:!0})})})}):Object(V.jsx)(V.Fragment,{})]})}),Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",marginTop:"40px"},children:[Object(V.jsx)(z.a,{style:{width:"210px",height:"42px",background:"#fff",borderRadius:"10px",border:"1px solid #6080b4",color:"#6080b4"},size:"large",onClick:B,className:"btn-cancel-sell",children:"\u53d6\u6d88"}),"1"===g?Object(V.jsx)(W.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:Object(V.jsx)(z.a,{onClick:function(){return A()},type:"primary",loading:C,style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff"},children:C?"\u66f4\u6539\u4e2d":"\u66f4\u6539\u4ef7\u683c"})},"update"):"2"===g?Object(V.jsxs)(W.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:[Object(V.jsx)(z.a,{onClick:function(){return A()},type:"primary",style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff",marginLeft:"20px"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(V.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]},"tryAgain"):null]})]})]})}var H=function(e,t){var n=Object(o.useRef)();Object(o.useEffect)((function(){n.current=e})),Object(o.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])};function G(e){var t=e.status,n=e.token,r=e.orderDetail,c=e.is1155,a=e.available,s=e.web3,i=e.getOwners1155,l=(e.addressToken,e.id,e.chainId),o=(e.sellID,Object(d.c)((function(e){return e})).walletAddress);switch(H((function(){o&&v.a.dispatch(Object(m.fb)(o))}),3e3),t){case 3:return Object(V.jsx)("div",{className:"PE",children:Object(V.jsxs)("div",{className:"actions-btn",children:[Object(V.jsx)(q,{orderDetail:r,token:n,is1155:c,available:a,getOwners1155:i}),Object(V.jsx)("div",{className:"cAFwWB"}),Object(V.jsx)(U,{orderDetail:r,getOwners1155:i,chainId:l})]})});case 2:return Object(V.jsx)("div",{className:"PE",children:Object(V.jsxs)("div",{className:"actions-btn",style:{display:"flex",justifyContent:"space-between"},children:[Object(V.jsx)(Q,{token:n,is1155:c,available:a,getOwners1155:i}),Object(V.jsx)("div",{className:"cAFwWB"}),Object(V.jsx)(Y,{token:n,is1155:c,available:a,web3:s,getOwners1155:i})]})});case 1:return Object(V.jsx)(V.Fragment,{});default:return Object(V.jsx)("div",{})}}n(2366),n(2367);function X(e){var t=e.visible,n=e.orderDetail,r=e.buy,i=e.setCheckout1155,l=Object(d.c)((function(e){return e})),b=l.web3,u=l.balance,j=l.walletAddress,p=F.a.useForm(),x=Object(s.a)(p,1)[0],h=Object(o.useState)(n?parseFloat(b.utils.fromWei(n.price,"ether")):0),O=Object(s.a)(h,2),f=O[0],m=O[1],v=Object(o.useState)(1),k=Object(s.a)(v,2),w=k[0],y=k[1],C=Object(o.useState)(!1),I=Object(s.a)(C,2),S=I[0],E=I[1],A=Object(o.useCallback)(function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("0x0000000000000000000000000000000000000000"!==t.tokenPayment){e.next=6;break}t.price>parseInt(1e18*u)?E(!0):E(!1),e.next=10;break;case 6:return e.next=8,Object(g.b)(t.tokenPayment,j);case 8:n=e.sent,t.price>parseInt(n)?E(!0):E(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,j]);Object(o.useEffect)((function(){j&&n&&A(Object(N.a)(Object(N.a)({},n),{},{amount:w,price:parseInt(w)*parseFloat(n.price)}))}),[A,u,n,j,w]);var B=function(){i(!1)},P=function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.validateFields();case 2:(t=e.sent)&&t.amount>=1&&r(Object(N.a)(Object(N.a)({},n),{},{amount:t.amount}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(a.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n.amount)-parseInt(n.soldAmount))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Amount greater available")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(V.jsxs)(D.a,{title:Object(V.jsx)("p",{className:"textmode mgb-0",style:{fontSize:"28px",fontWeight:"900"},children:"Checkout"}),visible:t,footer:[Object(V.jsx)(z.a,{shape:"round",size:"large",onClick:function(){return B()},children:"Cancel"},"cancel"),S?Object(V.jsx)(z.a,{type:"primary",shape:"round",size:"large",disabled:!0,children:"Insufficient"},"insufficient"):Object(V.jsx)(z.a,{type:"primary",shape:"round",size:"large",onClick:function(){return P()},children:"Payment"},"payment")],centered:!0,width:550,onCancel:B,children:[Object(V.jsx)("p",{className:"textmode mgb-0",style:{fontSize:"14px",fontWeight:"900"},children:"Choose the amount of order you want to buy"}),Object(V.jsxs)(F.a,{form:x,className:"input-checkout-1155",layout:"vertical",children:[Object(V.jsx)(R.a.Group,{children:Object(V.jsx)(F.a.Item,{required:!0,name:["amount"],rules:[{validator:T}],label:"Enter amount. ".concat(n?parseInt(n.amount)-parseInt(n.soldAmount):0," available"),className:"input-amount-checkout1155",children:Object(V.jsx)(L.a,{min:"1",size:"large",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},onChange:function(e){y(e=e||1),A(Object(N.a)(Object(N.a)({},n),{},{amount:e,price:parseInt(e)*parseFloat(n.price)})),m(parseInt(e)*parseFloat(b.utils.fromWei(n.price,"ether")))},placeholder:"Amount"})})}),Object(V.jsx)(R.a.Group,{children:Object(V.jsx)(F.a.Item,{label:"Total payment",children:Object(V.jsx)(R.a,{disabled:!0,size:"large",value:"".concat(f).replace(/\B(?=(\d{3})+(?!\d))/g,","),suffix:"BNB"})})})]})]})}var K=n(117);function Z(e){var t=e.token,n=e.orderDetail,r=e.is1155,i=e.id,l=e.addressToken,u=e.getOwners1155,j=e.setOrderDetail,p=Object(b.f)(),x=Object(o.useState)(!1),h=Object(s.a)(x,2),O=h[0],f=h[1],v=Object(d.c)((function(e){return e})),k=v.balance,w=v.chainId,y=v.walletAddress,N=v.allowanceToken,C=v.web3,I=v.buyError,S=Object(o.useState)(!1),E=Object(s.a)(S,2),A=E[0],B=E[1],F=Object(o.useState)(!1),P=Object(s.a)(F,2),T=P[0],R=P[1],L=Object(o.useState)(!1),W=Object(s.a)(L,2),M=W[0],J=W[1],Q=Object(o.useState)(!1),U=Object(s.a)(Q,2),Y=U[0],q=U[1],H=Object(o.useState)(!1),G=Object(s.a)(H,2),Z=G[0],_=G[1],$=Object(o.useState)(""),ee=Object(s.a)($,2),te=ee[0],ne=ee[1],re=Object(d.b)();Object(o.useEffect)((function(){var e=function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.eth.getBalance(y);case 2:t=e.sent,ne(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();y&&e(),"4001"===I?(_(!1),q(!0)):"4000"===I?q(!1):"1"===I&&(j(null),_(!1),J(!1))}),[I,j,y,C.eth]);var ce=Object(o.useCallback)(function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("0x0000000000000000000000000000000000000000"!==t.tokenPayment){e.next=7;break}B(!0),t.price>parseInt(1e18*k)?f(!0):f(!1),e.next=15;break;case 7:return e.next=9,Object(g.a)(t.tokenPayment,y,w);case 9:return n=e.sent,e.next=12,Object(g.b)(t.tokenPayment,y);case 12:r=e.sent,t.price>parseInt(r)?f(!0):f(!1),t.price<=parseInt(n)?B(!0):B(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k,y,w]);Object(o.useEffect)((function(){y&&ce(n)}),[ce,y,N,n]);var ae=function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,re(Object(m.S)(t,r));case 4:if(!(n=e.sent).status||!n.link){e.next=10;break}if(!r){e.next=9;break}return e.next=9,u();case 9:p.push({pathname:"/token/".concat(w,"/").concat(l,"/").concat(i,"/null")});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,re(Object(m.R)(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(V.Fragment,{children:y?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(D.a,{title:Object(V.jsx)("h3",{className:"textmode mgb-0",children:"\u8d2d\u4e70"}),visible:M,onCancel:function(){J(!1),_(!1),q(!1)},centered:!0,footer:[Object(V.jsx)(z.a,{style:{width:"280px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",marginBottom:"10px"},loading:Z,type:"primary",shape:"round",size:"large",onClick:function(){return _(!0),q(!1),void ae(n)},children:Z?"\u652f\u4ed8\u4e2d":"\u8d2d\u4e70"},"buy"),Object(V.jsx)("div",{style:{color:"red",marginTop:"5px",display:"".concat(Y?"block":"none")},children:"\u9519\u8bef\uff1a\u652f\u4ed8\u5931\u8d25"},"red")],children:[Object(V.jsxs)("div",{className:"sell-img",style:{borderTop:"1px solid rgba(96,128,180,0.09)",borderBottom:"1px solid rgba(96,128,180,0.09)",padding:"45px 0",display:"flex",alignItems:"center"},children:[Object(V.jsx)("img",{alt:"img-nft",src:t.image}),Object(V.jsxs)("div",{children:[Object(V.jsx)("div",{className:"textmode",children:t.name}),Object(V.jsx)("div",{style:{color:"rgba(0,0,0,0.50)"},children:t.nameCollection}),Object(V.jsxs)("div",{className:"textmode",children:["\u5355\u4ef7: ",Object(V.jsx)("span",{style:{fontWeight:"600",fontSize:"16px"},children:C.utils.fromWei(n.price.toString(),"ether")})," ",4===w?"ETH":"BNB"]})]})]}),Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:["\u8d26\u6237\u4f59\u989d:",Object(V.jsxs)("span",{children:[C.utils.fromWei(te.toString(),"ether").slice(0,6)," ",4===w?"ETH":"BNB"]})]})]}),Object(V.jsx)(X,{visible:T,orderDetail:n,buy:ae,insufficient:O,setCheckout1155:R}),A?O?Object(V.jsx)(z.a,{type:"text",disabled:!0,shape:"round",size:"small",children:"\u4f59\u989d\u4e0d\u8db3"}):Object(V.jsx)(z.a,{className:"buy-btn",type:"text",shape:"round",size:"small",onClick:function(){return r?ie():J(!0)},children:"\u8d2d\u4e70"}):Object(V.jsx)(z.a,{type:"text",shape:"round",size:"small",onClick:se,children:"\u6388\u6743"})]}):Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(z.a,{style:{color:"#6080B4",fontWeight:"bold",fontSize:"15px"},type:"text",shape:"round",size:"small",onClick:K.b,children:"\u8d2d\u4e70"})})})}var _=n(937),$=n(2368),ee=n.n($),te=i.a.useBreakpoint;function ne(){var e=Object(d.c)((function(e){return e})),t=e.web3,n=e.walletAddress,r=e.sellOrderList,i=e.availableSellOrder721,p=e.market,h=e.chainId,O=e.nftList,f=e.convertErc1155Tokens,v=e.availableSellOrder1155,y=e.erc1155Tokens,N=e.infoCollections,I=e.infoUsers,E=Object(b.h)(),B=E.chainID,F=E.addressToken,z=E.id,D=E.sellID,P=te().lg,T=Object(d.b)(),R=Object(b.f)(),L=Object(o.useState)(null),W=Object(s.a)(L,2),M=W[0],J=W[1],Q=Object(o.useState)(null),U=Object(s.a)(Q,2),Y=U[0],q=U[1],H=Object(o.useState)(!1),X=Object(s.a)(H,2),$=X[0],ne=X[1],re=Object(o.useState)(),ce=Object(s.a)(re,2),ae=ce[0],se=ce[1],ie=Object(o.useState)(1),le=Object(s.a)(ie,2),oe=le[0],de=le[1],be=Object(o.useState)([]),ue=Object(s.a)(be,2),je=ue[0],pe=ue[1],xe=Object(o.useState)([]),he=Object(s.a)(xe,2),Oe=he[0],fe=he[1],me=Object(o.useState)(1),ve=Object(s.a)(me,2),ke=ve[0],ge=ve[1],we=Object(o.useState)({}),ye=Object(s.a)(we,2),Ne=ye[0],Ce=ye[1],Ie=Object(o.useState)(null),Se=Object(s.a)(Ie,2),Ee=Se[0],Ae=Se[1],Be=Object(o.useState)(!0),Fe=Object(s.a)(Be,2),ze=Fe[0],De=Fe[1];Object(o.useEffect)((function(){parseInt(h)!==parseInt(B)&&Object(K.d)(B,n)}),[n,h,B]),Object(o.useEffect)((function(){var e=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(Object(m.eb)());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),setTimeout((function(){e(),e()}),500)}),[T]),Object(o.useEffect)((function(){!function(e,t,n,r,c,a,s){k.apply(this,arguments)}(t,O,F,z,y,ge,q)}),[t,O,F,z,y,N]);var Pe=Object(o.useCallback)(Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p&&w(f,F,z,h,p,pe,fe);case 1:case"end":return e.stop()}}),e)}))),[f,F,z,h,p]),Te=Object(o.useCallback)(Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&r&&i&&O)){e.next=5;break}return e.next=3,O.methods.isERC1155(F).call();case 3:e.sent?(Pe(),ne(!0),Number.isInteger(parseInt(D))&&"null"!==D?S(i,v,O,r,n,t,D,de,se,R):A(n,de,F,z,h,t)):C(F,i,z,p,O,r,n,t,de,pe,fe,se,R,D);case 5:case"end":return e.stop()}}),e)}))),[F,i,v,z,p,O,r,n,t,D,Pe,h,R]);Object(o.useEffect)((function(){Te()}),[Te]);var Re=Object(o.useCallback)((function(){var e=I;je.forEach(function(){var t=Object(a.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(Object(m.ab)(n.owner.toLowerCase()));case 2:r=t.sent,a=r.user,e[n.owner.toLowerCase()]=a;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Ce(e),T(Object(m.ib)(e))}),[T,I,je]),Le=Object(o.useCallback)(Object(a.a)(c.a.mark((function e(){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ae){e.next=8;break}return e.next=3,t.utils.fromWei(ae.price,"ether");case 3:return n=e.sent,e.next=6,Object(g.d)(n);case 6:r=e.sent,Ae(r);case 8:case"end":return e.stop()}}),e)}))),[ae,t.utils]);Object(o.useEffect)((function(){return!Ee&&ze&&Le(),function(){De(!1)}}),[Le,Ee,ze]);var We=Object(o.useCallback)(Object(a.a)(c.a.mark((function e(){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F||!z){e.next=6;break}return n=new t.eth.Contract(x.abi,F),e.next=4,n.methods.tokenURI(z).call();case 4:r=e.sent,J(r);case 6:case"end":return e.stop()}}),e)}))),[t,F,z]);return Object(o.useEffect)((function(){Re(),We()}),[Re,We]),Object(V.jsx)("div",{style:{width:"100%",background:"#f7f8fb"},children:Object(V.jsx)("div",{className:"detail-page center",children:Object(V.jsx)("div",{className:"body-page",children:Y?Object(V.jsxs)("div",{className:"detail-main",children:[P?Object(V.jsxs)("div",{className:"info-wrap-left",children:[Object(V.jsx)("div",{className:"expand-img-nft",children:Object(V.jsx)("div",{className:"image-label center",children:Object(V.jsx)(l.a,{alt:"img-nft",src:Y.image})})}),Object(V.jsx)("div",{className:"description-nft",children:Object(V.jsxs)("div",{className:"content-properties",children:[Object(V.jsx)("div",{className:"title-tab-properties",children:Object(V.jsx)("h3",{className:"nft-h3",children:"\u7b80\u4ecb"})}),Object(V.jsx)("div",{className:"detail-des textmode",children:Y.description})]})}),Object(V.jsx)("div",{className:"properties-nft",children:Object(V.jsxs)("div",{className:"content-properties",children:[Object(V.jsx)("div",{className:"title-tab-properties",children:Object(V.jsx)("h3",{className:"nft-h3",children:"\u5c5e\u6027"})}),Object(V.jsx)("div",{className:"list-properties",children:Object(V.jsx)("div",{className:"items-properties",children:Y.attributes?Y.attributes.map((function(e,t){return Object(V.jsxs)("div",{className:"item-properties",children:[Object(V.jsx)("div",{className:"name-properties",children:e.trait_type}),Object(V.jsx)("div",{className:"value-properties textmode",children:e.display_type&&"date"===e.display_type.toLowerCase()&&ee()(e.value).isValid()?ee()(e.value.toString().length<13?1e3*e.value:e.value).format("DD-MM-YYYY"):e.value})]},t)})):null})})]})})]}):null,Object(V.jsxs)("div",{className:"info-wrap-right",children:[Object(V.jsxs)("div",{className:"info-order-nft",children:[Object(V.jsx)("div",{className:"detail-title",children:Object(V.jsx)("h1",{children:Y.name})}),"null"!==D?Object(V.jsxs)("div",{className:"show-price",children:[Object(V.jsx)("div",{children:ae?"".concat(t.utils.fromWei(ae.price,"ether")+" BNB"):""}),Object(V.jsx)("div",{className:"price",children:ae?"\u2248$ ".concat(Ee):""})]}):null,Object(V.jsxs)("div",{className:"collections-nft",children:[Object(V.jsxs)("div",{children:[Object(V.jsxs)("div",{className:"textBlack",children:["\u4f5c\u8005",Object(V.jsx)("span",{style:{color:"rgba(0,0,0,0.30)"},children:"\uff0810% \u7248\u7a0e\uff09"})]}),Object(V.jsx)(u.b,{to:"/collection/".concat(h,"/").concat(F.toLowerCase()),children:Y.nameCollection})]}),Object(V.jsxs)("div",{style:{margin:"0 45px"},children:[Object(V.jsx)("div",{className:"textBlack",children:"\u4f5c\u54c1\u96c6"}),Object(V.jsx)(u.b,{to:"/collection/detail/".concat(F.toLowerCase(),"/").concat(n),children:Y.nameCollection})]}),Object(V.jsxs)("div",{children:[Object(V.jsx)("div",{className:"textBlack",children:"\u6301\u6709\u8005"}),je.map((function(e,t){return Object(V.jsx)("div",{className:"avatar-link-available",children:Object(V.jsx)("div",{className:"link-and-available",children:Object(V.jsx)(u.b,{to:"/profile/index/".concat(h,"/").concat(e.owner.toLowerCase()),className:"owner",children:Ne[e.owner.toLowerCase()]&&"Unnamed"!==Ne[e.owner.toLowerCase()].username?Object(V.jsxs)("strong",{children:["@",Ne[e.owner.toLowerCase()].username]}):Object(V.jsx)("strong",{children:"".concat(e.owner.slice(0,8),"...").concat(e.owner.slice(e.owner.length-6,e.owner.length))})})})},t)}))]})]})]}),Object(V.jsxs)("div",{className:"purchase-nft",children:[Object(V.jsx)("h3",{className:"nft-h3",children:"\u51fa\u552e\u5217\u8868"}),Object(V.jsxs)("div",{children:[Object(V.jsxs)("div",{className:"order-title",children:[Object(V.jsx)("span",{className:"width100",children:"\u5355\u4ef7"}),Object(V.jsx)("span",{className:"width100",children:"\u6570\u91cf"}),Object(V.jsx)("span",{className:"width100",children:"\u5356\u5bb6"})]}),Object(V.jsxs)("div",{className:"order-List",children:[Object(V.jsx)("span",{className:"width100",children:ae&&"null"!==D?Object(V.jsx)("div",{className:"title-and-price",children:Object(V.jsxs)("span",{className:"price-eth color-black",children:[t.utils.fromWei(ae.price,"ether")," BNB"]})}):Object(V.jsx)(V.Fragment,{children:"--"})}),Object(V.jsx)("span",{className:"width100",children:ae&&"null"!==D?Object(V.jsx)("div",{className:"color-black",children:Oe?Oe[0].value:1}):Object(V.jsx)(V.Fragment,{children:"--"})}),Object(V.jsx)("span",{className:"width100",children:ae&&"null"!==D?Object(V.jsx)("div",{children:Object(V.jsx)(u.b,{to:"/profile/".concat(h,"/").concat(ae.seller.toLowerCase()),className:"owner",children:Object(V.jsx)("strong",{style:{color:"#6080B4",fontWeight:"400"},children:"".concat(ae.seller.slice(0,8),"...").concat(ae.seller.slice(ae.seller.length-6,ae.seller.length))})})}):Object(V.jsx)(V.Fragment,{children:"--"})}),Object(V.jsx)("span",{className:"width100",style:{textAlign:"end"},children:!n||n&&ae&&"null"!==D&&ae.seller.toLowerCase()!==n.toLowerCase()?Object(V.jsx)(Z,{token:Y,orderDetail:ae,is1155:$,id:z,addressToken:F,getOwners1155:Pe,setOrderDetail:se}):null})]})]}),Object(V.jsx)("div",{className:"style-purchase",children:Object(V.jsx)("div",{className:"actions-nft",children:Object(V.jsx)(G,{status:oe,token:Y,orderDetail:ae,is1155:$,available:ke,web3:t,addressToken:F,id:z,chainId:h,sellID:D})})})]}),Object(V.jsxs)("div",{className:"nft-details",children:[Object(V.jsx)("h3",{className:"nft-h3",children:"\u8be6\u60c5"}),Object(V.jsxs)("div",{className:"flex-between mb15",children:[Object(V.jsx)("div",{className:"color-black",children:"\u5408\u7ea6\u5730\u5740"}),Object(V.jsx)("div",{children:Object(V.jsx)("a",{href:"".concat(Object(_.a)(h),"/address/").concat(F),target:"_blank",rel:"noreferrer",className:"href-to-address-contract",children:P?F:"".concat(F.slice(0,8),"...").concat(F.slice(F.length-6,F.length))})})]}),Object(V.jsxs)("div",{className:"flex-between mb15",children:[Object(V.jsx)("div",{className:"color-black",children:"Token ID"}),Object(V.jsx)("div",{className:"color-black",children:z})]}),Object(V.jsxs)("div",{className:"flex-between mb15",children:[Object(V.jsx)("div",{className:"color-black",children:"NFT\u6807\u51c6"}),Object(V.jsx)("div",{className:"color-black",children:"ERC-721"})]}),Object(V.jsxs)("div",{className:"flex-between",children:[Object(V.jsx)("div",{className:"color-black",children:"\u5143\u6570\u636e"}),Object(V.jsx)("div",{className:"href-to-address-contract",children:Object(V.jsx)("a",{href:M,target:"_blank",rel:"noreferrer",className:"href-to-address-contract",children:"IPFS"})})]})]})]})]}):Object(V.jsx)("div",{className:"center",style:{width:"100%",minHeight:"200px"},children:Object(V.jsx)(j.a,{})})})})})}}}]);
//# sourceMappingURL=8.3cbaf23c.chunk.js.map