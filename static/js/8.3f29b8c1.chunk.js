(this["webpackJsonpdidi-nft"]=this["webpackJsonpdidi-nft"]||[]).push([[8],{2347:function(e,t,n){},2365:function(e,t,n){},2366:function(e,t,n){},2367:function(e,t,n){},2380:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ae}));var r=n(1),a=n.n(r),c=n(14),s=n(33),i=n(943),l=n(2378),o=n(176),d=n(0),b=n(61),u=n(79),j=n(112),x=n(564),p=n(409),h=n(239),O=n(204),f=n.n(O),m=n(561),v=n(19),k=n(67);function g(){return(g=Object(c.a)(a.a.mark((function e(t,n,r,c,s,i,l){var o,d,b,u,j,x,O,g,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=43;break}return e.next=3,n.methods.isERC1155(r).call();case 3:return o=e.sent,e.next=6,k.a.dispatch(Object(v.Y)(r,null));case 6:if(b=e.sent.collection.name,!o){e.next=26;break}return e.next=10,new t.eth.Contract(p.abi,r);case 10:return u=e.sent,e.next=13,u.methods.uri(c).call();case 13:if(d=e.sent,!s){e.next=24;break}j=0;case 16:if(!(j<s.length)){e.next=24;break}if((x=s[j]).addressToken.toLowerCase()!==r.toLowerCase()||parseInt(x.index)!==parseInt(c)){e.next=21;break}return i(x.value),e.abrupt("break",24);case 21:j++,e.next=16;break;case 24:e.next=32;break;case 26:return e.next=28,new t.eth.Contract(h.abi,r);case 28:return O=e.sent,e.next=31,O.methods.tokenURI(c).call();case 31:d=e.sent;case 32:return e.prev=32,e.next=35,f.a.get(d);case 35:g=e.sent,y=g.data,l({name:y.name?y.name:"Unnamed",description:y.description?y.description:"",image:y.image?y.image:m.a,nameCollection:b,attributes:y.attributes?y.attributes:[]}),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(32),l({name:"Unnamed",description:"",image:m.a,nameCollection:"Unnamed",attributes:[]});case 43:case"end":return e.stop()}}),e,null,[[32,40]])})))).apply(this,arguments)}var y=n(560);function w(e,t,n,r,a,c,s){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function e(t,n,r,c,s,i,l){var o,d,b,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],d=0;case 2:if(!(d<t.length)){e.next=10;break}if((b=t[d]).addressToken.toLowerCase()!==n.toLowerCase()){e.next=7;break}return o=b.tokens,e.abrupt("break",10);case 7:d++,e.next=2;break;case 10:return o=o.filter((function(e){return parseInt(e.index)===parseInt(r)})),e.next=13,Object(y.c)(n,r,c,s._address);case 13:u=e.sent,i(u.ownersOf1155),l(o);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=n(9);function I(e,t,n,r,a,c,s,i,l,o,d,b,u,j){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(a.a.mark((function e(t,n,r,c,s,i,l,o,d,b,u,j,x,p){var O,f,m,v,k,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o&&i&&n&&s)){e.next=42;break}return e.prev=1,e.next=4,new o.eth.Contract(h.abi,t);case 4:if(O=e.sent,"null"!==p){e.next=12;break}return e.next=8,O.methods.ownerOf(r).call();case 8:f=e.sent,b([{owner:f,totalSupply:1,value:1}]),e.next=16;break;case 12:return e.next=14,i.methods.getSellOrderById(p).call();case 14:(m=e.sent).isActive?(f=m.seller,b([{owner:f,totalSupply:1,value:1}]),u([{seller:f,totalSupply:1,value:1,price:m.price,tokenPayment:m.token,sellId:m.sellId,amount:m.amount}])):x.push("/404");case 16:if(!l){e.next=20;break}return e.next=19,i.methods.checkDuplicateERC721(t,r,l).call();case 19:v=e.sent;case 20:if(!l||!v){e.next=24;break}d(3),e.next=35;break;case 24:if(!l||f.toLowerCase()!==l.toLowerCase()){e.next=31;break}return e.next=27,i.methods.checkDuplicateERC721(t,r,f).call();case 27:k=e.sent,d(k?3:2),e.next=35;break;case 31:return e.next=33,i.methods.checkDuplicateERC721(t,r,f).call();case 33:e.sent||f===c._address?d(1):d(0);case 35:(g=n.filter((function(e){return e.nftAddress.toLowerCase()===t.toLowerCase()&&e.tokenId===r})))[0]&&j(Object(C.a)(Object(C.a)({},g[0]),{},{tokenPayment:g[0].token})),e.next=42;break;case 39:e.prev=39,e.t0=e.catch(1),console.log(e.t0);case 42:case"end":return e.stop()}}),e,null,[[1,39]])})))).apply(this,arguments)}function E(e,t,n,r,a,c,s,i,l,o){return A.apply(this,arguments)}function A(){return(A=Object(c.a)(a.a.mark((function e(t,n,r,c,s,i,l,o,d,b){var u,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i&&c&&t&&r)){e.next=12;break}return e.prev=1,e.next=4,c.methods.getSellOrderById(l).call();case 4:(u=e.sent).isActive?(s&&u.seller.toLowerCase()===s.toLowerCase()?o(3):o(1),(j=n.filter((function(e){return e.sellId===l})))[0]&&d(Object(C.a)(Object(C.a)({},j[0]),{},{tokenPayment:j[0].token}))):b.push("/404"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),b.push("/404");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function F(e,t,n,r,a,c,s){return B.apply(this,arguments)}function B(){return(B=Object(c.a)(a.a.mark((function e(t,n,r,c,s,i,l){var o,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s&&c&&r)){e.next=17;break}if(e.prev=1,!t){e.next=11;break}return o=new i.eth.Contract(p.abi,r),e.next=6,o.methods.balanceOf(t,c).call();case 6:d=e.sent,l(d),n(d>0?2:0),e.next=12;break;case 11:n(0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}n(976);var z=n(2326),D=n(101),T=n(974),P=n(2323),R=n(2322),L=n(2328),W=n(2327),M=n(975),Y=(n(2365),n(316)),H=n(2);function Q(e){var t=e.visible,n=e.approve,r=e.selling,i=e.handleOk,l=e.setIsLoading,o=Object(d.useState)(!1),b=Object(s.a)(o,2),u=b[0],j=b[1];Object(d.useEffect)((function(){j(t)}),[t]);var x=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(H.jsx)(T.a,{visible:u,footer:Object(H.jsx)("div",{}),centered:!0,width:500,onCancel:function(){j(!1),l(!1)},children:Object(H.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(H.jsxs)("div",{style:{width:"90%",margin:"25px 0"},children:[Object(H.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(H.jsxs)("div",{className:"textMode",children:[Object(H.jsx)("span",{className:"one",children:"1"}),Object(H.jsx)("span",{children:"\u6388\u6743"})]}),"3"===n?Object(H.jsxs)("div",{style:{color:"#43A047"},children:["\u5df2\u5b8c\u6210",Object(H.jsx)("img",{src:Y.a,alt:"yes",style:{width:"22px"}})]}):null]}),Object(H.jsx)("div",{children:"\u51fa\u552e\u6b64\u4f5c\u54c1\u96c6\u4e2d\u7684\u4f5c\u54c1\u9700\u8fdb\u884c\u4e00\u6b21\u6027\u6388\u6743\u3002"}),"1"===n?Object(H.jsx)(M.b,{style:{width:"100%"},children:Object(H.jsx)(D.a,{type:"primary",loading:!0,style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u6388\u6743\u4e2d"})}):"2"===n?Object(H.jsxs)(M.b,{style:{width:"100%",display:"flex",flexDirection:"column"},children:[Object(H.jsx)(D.a,{onClick:function(){x()},type:"primary",style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(H.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]}),Object(H.jsxs)("div",{style:{width:"90%",margin:"25px 0"},children:[Object(H.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(H.jsxs)("div",{className:"textMode",children:[Object(H.jsx)("span",{className:"one",children:"2"}),Object(H.jsx)("span",{children:"\u4e0a\u67b6\u51fa\u552e"})]}),"3"===r?Object(H.jsxs)("div",{style:{color:"#43A047"},children:["\u5df2\u5b8c\u6210",Object(H.jsx)("img",{src:Y.a,alt:"yes",style:{width:"22px"}})]}):null]}),Object(H.jsx)("div",{children:"\u4e0a\u67b6\u51fa\u552e\u9700\u652f\u4ed8\u4e00\u7b14\u77ff\u5de5\u8d39\u3002"}),"1"===r?Object(H.jsx)(M.b,{style:{width:"100%"},children:Object(H.jsx)(D.a,{type:"primary",loading:!0,style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u4e0a\u67b6\u4e2d"})}):"2"===r?Object(H.jsxs)(M.b,{style:{width:"100%",display:"flex",flexDirection:"column",height:"50px"},children:[Object(H.jsx)(D.a,{onClick:function(){x()},type:"primary",style:{width:"400px",height:"40px",borderRadius:"10px",marginTop:"10px",background:"#6080b4",border:"none"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(H.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]})]})})}n(2347);function V(e){e.token;var t=e.is1155,n=e.available,r=e.getOwners1155,i=Object(b.b)(),l=Object(u.f)(),o=Object(b.c)((function(e){return e})),j=o.web3,x=o.chainId,p=o.approveError,h=o.sellError,O=Object(u.h)(),f=O.addressToken,m=O.id,k=Object(d.useState)(!1),g=Object(s.a)(k,2),y=g[0],w=g[1],N=Object(d.useState)(!1),C=Object(s.a)(N,2),I=C[0],S=C[1],E=Object(d.useState)("0"),A=Object(s.a)(E,2),F=A[0],B=A[1],M=Object(d.useState)(!1),Y=Object(s.a)(M,2),V=Y[0],q=Y[1],J=Object(d.useState)(""),U=Object(s.a)(J,2),G=U[0],K=U[1],X=z.a.useForm(),Z=Object(s.a)(X,1)[0];Object(d.useEffect)((function(){"4001"===p?B("2"):"4000"===p?B("1"):"1"===p&&(B("3"),q("1")),"4001"===h?q("2"):"4000"===h?q("1"):"1"===h&&(q("0"),q("3"))}),[p,h]);var _=Object(d.useCallback)(Object(c.a)(a.a.mark((function e(){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B("0"),q("0"),e.next=4,Z.validateFields();case 4:if(!((n=e.sent)&&parseFloat(n.price)>0)){e.next=18;break}return S(!0),B("1"),e.next=10,i(Object(v.W)(f,m,j.utils.toWei(n.price.toString(),"ether"),"0x0000000000000000000000000000000000000000",n.amount?n.amount:1));case 10:if(!(c=e.sent).status){e.next=18;break}if(!t){e.next=15;break}return e.next=15,r();case 15:w(!1),Z.resetFields(),l.push({pathname:"/token/".concat(x,"/").concat(f,"/").concat(m,"/").concat(c.sellId)});case 18:case"end":return e.stop()}}),e)}))),[i,f,m,j.utils,t,l,Z,r,x]),$=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Not enough amount")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{className:"gSzfBw",children:Object(H.jsx)(D.a,{style:{background:"#6080b4",border:"none",borderRadius:"10px"},type:"primary",size:"large",onClick:function(){w(!0)},children:"\u51fa\u552e"})}),Object(H.jsx)(T.a,{title:Object(H.jsx)("h3",{className:"textmode mgb-0",children:"\u51fa\u552e"}),visible:y,onCancel:function(){i({type:v.m,sellError:"0"}),w(!1),Z.resetFields(),K("")},centered:!0,footer:[Object(H.jsx)(D.a,{style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none"},type:"primary",shape:"round",size:"large",onClick:function(){return _()},children:"\u51fa\u552e"},"sell")],children:Object(H.jsx)(z.a,{form:Z,className:"input-sell",layout:"vertical",children:Object(H.jsxs)(P.a,{gutter:[5,10],children:[Object(H.jsxs)(R.a,{xs:{span:24},md:{span:t?17:24},children:[Object(H.jsx)("div",{className:"ant-col ant-form-item-label",children:Object(H.jsx)("label",{htmlFor:"price",className:"ant-form-item-required",title:"Price",children:"\u4ef7\u683c"})}),Object(H.jsx)(L.a.Group,{compact:!0,label:"Price",children:Object(H.jsx)(z.a.Item,{name:["price"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ef7\u683c"}],style:{width:"60%"},children:Object(H.jsx)(W.a,{style:{width:"460px",borderRadius:"0px"},min:"0.01",size:"large",placeholder:"\u8bf7\u8f93\u5165\u4ef7\u683c",addonAfter:4===x?"ETH":"BNB",onChange:function(e){return K((.975*e).toFixed(4))}})})}),Object(H.jsxs)("div",{className:"flex-between",children:[Object(H.jsx)("div",{children:"\u670d\u52a1\u8d39\u7387\uff1a"}),Object(H.jsxs)("div",{children:[Object(H.jsx)("span",{className:"bold",children:"2.50"}),"%"]})]}),Object(H.jsxs)("div",{className:"flex-between",children:[Object(H.jsx)("div",{children:"\u4f60\u5c06\u83b7\u5f97\u7684\u603b\u91d1\u989d\uff1a"}),Object(H.jsxs)("div",{children:[Object(H.jsx)("span",{className:"bold",children:G}),4===x?"ETH":"BNB"]})]})]}),t?Object(H.jsx)(R.a,{xs:{span:24},md:{span:7},children:Object(H.jsx)(L.a.Group,{children:Object(H.jsx)(z.a.Item,{required:!0,name:["amount"],rules:[{validator:$}],label:"Amount",className:"input-amount-sell textmode",children:Object(H.jsx)(W.a,{min:"1",size:"large",placeholder:"Amount",className:"textmode"})})})}):Object(H.jsx)(H.Fragment,{})]})})}),I?Object(H.jsx)(Q,{visible:!0,approve:F,selling:V,setIsLoading:S,handleOk:_}):Object(H.jsx)(H.Fragment,{})]})}function q(e){var t=e.orderDetail,n=e.is1155,r=e.getOwners1155,i=e.chainId,l=Object(b.c)((function(e){return e})).cancelError,o=Object(d.useState)(!1),j=Object(s.a)(o,2),x=j[0],p=j[1],h=Object(d.useState)(!1),O=Object(s.a)(h,2),f=O[0],m=O[1],k=Object(d.useState)("0"),g=Object(s.a)(k,2),y=g[0],w=g[1],N=Object(b.b)(),C=function(){p(!1),m(!1)};Object(d.useEffect)((function(){"4001"===l?w("2"):"4000"===l?w("1"):"1"===l&&w("0")}),[l]);var I=Object(u.f)(),S=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.sellId){e.next=13;break}return m(!0),w("1"),e.next=5,N(Object(v.U)(t));case 5:if(!e.sent){e.next=13;break}if(p(!1),m(!1),!n){e.next=12;break}return e.next=12,r();case 12:I.push({pathname:"/token/".concat(i,"/").concat(t.nftAddress,"/").concat(t.tokenId,"/null")});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(H.jsxs)("div",{className:"gSzfBw",children:[Object(H.jsx)(D.a,{style:{borderRadius:"10px"},size:"large",onClick:function(){p(!0),w("1")},className:"btn-cancel-sell",children:"\u4e0b\u67b6"}),Object(H.jsxs)(T.a,{title:"\u4e0b\u67b6",onCancel:C,visible:x,footer:Object(H.jsx)("div",{}),centered:!0,children:[Object(H.jsx)("p",{style:{textAlign:"center"},children:"\u4e0b\u67b6\u540e\u60a8\u4ecd\u7136\u53ef\u4ee5\u91cd\u65b0\u51fa\u552e"}),Object(H.jsx)("p",{style:{textAlign:"center",marginBottom:"30px"},children:"\u4e0b\u67b6\u7269\u54c1\u9700\u8981\u53d1\u8d77\u4e00\u7b14\u4ea4\u6613"}),Object(H.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(H.jsx)(D.a,{style:{width:"210px",height:"42px",background:"#fff",borderRadius:"10px",border:"1px solid #6080b4",color:"#6080b4"},size:"large",onClick:C,className:"btn-cancel-sell",children:"\u53d6\u6d88"}),"1"===y?Object(H.jsx)(M.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:Object(H.jsx)(D.a,{onClick:S,type:"primary",loading:f,style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff"},children:f?"\u4e0b\u67b6\u4e2d":"\u4e0b\u67b6"})}):"2"===y?Object(H.jsxs)(M.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:[Object(H.jsx)(D.a,{onClick:S,type:"primary",style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff",marginLeft:"20px"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(H.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}):null]})]})]})}function J(e){e.token;var t=e.is1155,n=e.available,r=e.web3,i=(e.getOwners1155,Object(b.c)((function(e){return e})).transferError),l=Object(b.b)(),o=z.a.useForm(),j=Object(s.a)(o,1)[0],x=Object(d.useState)(!1),p=Object(s.a)(x,2),h=p[0],O=p[1],f=Object(d.useState)(""),m=Object(s.a)(f,2),k=m[0],g=m[1],y=Object(u.h)(),w=y.addressToken,N=y.id,C=Object(d.useState)(!1),I=Object(s.a)(C,2),S=I[0],E=I[1],A=Object(d.useState)(!1),F=Object(s.a)(A,2),B=F[0],M=F[1];Object(d.useEffect)((function(){"4001"===i?(M(!1),E(!0)):"4000"===i?E(!1):"1"===i&&(M(!1),O(!1))}),[i]);var Y=function(){var e=Object(c.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.validateFields();case 2:if(!(n=e.sent)){e.next=8;break}return M(!0),E(!1),e.next=8,l(Object(v.ob)(w,k,N,n.amount,t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){O(!1),M(!1),E(!1),j.resetFields()},V=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Not enough amount")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("\u8bf7\u8f93\u5165\u5730\u5740")));case 4:if(r.utils.isAddress(n)){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("div",{style:{cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center"},onClick:function(){O(!0)},children:[Object(H.jsx)("img",{style:{marginRight:"5px"},width:14,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAgCAYAAAB3j6rJAAAAAXNSR0IArs4c6QAAA5tJREFUWEfFV9lPE2EQ/xVbUcCgcpRLKIeClktCW4kPUBAEffNJy/Hoiwd4ofEPEO9okGhiYjQBr6BGwcQoXugDNyhCOMpZUgSW+6bHmm+bAm2hbFuQedlkd3bm983Mb2Y+Dk3TNP6zKAcm0NBOoaFtAPKeYUSFeIDzP4CMTsyisZ3Cn3aKeY6Mzxgc3XEzb22AzKk0aOoaYk5MHPf0j5uN+d5g/uoAIcntUI4w4SaO5YphqDVa1gnPOBxmPZD+4Sk0tOkcN3ZQmJpRsXZsrHgjM549kMlpFeNQV2QUqJEpqx0v/tHT1QlXTsQuD4SEtrV7WOe4fQDdvWPQrgHBDsYE4GjSbkMgir6x+RO3dA+BFN1ay/l0CYQBruC0KobozxVdTK7HJmfX2q+BfXveBty7mATuBjtwMm9+ognP10MidvGRdSyacc3Je1lNVzb2rgqOEIELY6epc5CVvfRDoYgX+emAqDVa+uGbOpT/UbL62ViJdMX9ET6IjfLF95pufCzrYG3n+mkp3LY56IDoW3zBh0aUlLM3EuizDdJoP4iFntBoaTworMGv1n7WIDxcnJBzMnZe32DWFP+Q49WX5mWNbbbnYl+YNwNgB38Lozc4Oo07TytXbOPGRhMl/pAl71kaCHlbWqvAk+J6aLULQ9nXwxnSaF/EhHuDVLpeyOTMfV5tFdvOpYkRGui2PBDypba5D4/e/kZkMJ8BEOC91SRKZfVKPHr3Gyq15b1mI6FtdhJ4XDvzQMhX0kQ5nKWz9PprC4pKW1nXg7Fi+E53nJGJDF5btI+o1FoQhtlK97QUIRLEAuuAkKZ391kVM+5tlaunpOBv19FWL6wjcjnvO3qpCVsxwH27I66dijOxwxpI5s0Sq9hh7PGAWIDUFOH6AzmTKkZ40AJtLU7NakSEx9VN242LaLsuQMKC3HA2VbxknVldI2TYxYsEeP9TbtCFzVWzLFmIRIkhbW2KiMMmHrIzJPDzdGa68P3CWlYdNudkHDxcHFcnIgTEhQwJBJ7O8wbJWkl6jLlNnox7MvaXE4tSQxZqsmP6ey2A0Bsml6hb+RUmtzj99wSRAGmHTGlrcWou5X7D8SORSw5AvTFqZBq38svxd3DS5OBZMhEidrrbHhElNQEvV6cVO+v41BxuF1SgUzk6r8vQNjsRZOranJoVESxSmJnTIPdFFXMzIEKuCySl5oR1jVgChOiS9fFxUT3qmvuYlJIeYk7+AeqE7cjoZdeEAAAAAElFTkSuQmCC",alt:"send"}),Object(H.jsx)("div",{style:{color:"#6080B4",fontSize:"15px"},children:"\u8d60\u9001"})]}),Object(H.jsx)(T.a,{width:550,title:Object(H.jsx)("h3",{className:"textmode mgb-0",children:"\u8d60\u9001"}),visible:h,onCancel:Q,centered:!0,footer:[Object(H.jsx)(D.a,{shape:"round",size:"large",onClick:function(){return Q()},style:{width:"220px",height:"42px",borderRadius:"10px",border:"1px solid #6080b4",color:"#6080b4"},children:"\u53d6\u6d88"},"cancel"),Object(H.jsx)(D.a,{type:"primary",loading:B,shape:"round",size:"large",onClick:function(){return Y()},style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",display:"".concat(S?"none":"inline-block")},children:B?"\u652f\u4ed8\u4e2d":"\u8d60\u9001"},"sell"),Object(H.jsx)(D.a,{type:"primary",loading:B,shape:"round",size:"large",onClick:function(){return Y()},style:{width:"220px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",display:"".concat(S?"inline-block":"none")},children:"\u518d\u8bd5\u4e00\u6b21"},"transfer")],children:Object(H.jsx)("div",{className:"price-des",children:Object(H.jsx)(z.a,{form:j,layout:"vertical",className:"input-transfer",children:Object(H.jsxs)(P.a,{gutter:[5,10],children:[Object(H.jsxs)(R.a,{xs:{span:24},md:{span:t?17:24},children:[Object(H.jsx)("div",{style:{marginBottom:"20px"},children:"\u8d60\u9001\u7269\u54c1\u9700\u8981\u53d1\u8d77\u4e00\u7b14\u4ea4\u6613"}),Object(H.jsx)(z.a.Item,{name:["address"],rules:[{validator:q}],label:"\u63a5\u6536\u5730\u5740",required:!0,children:Object(H.jsx)(L.a,{width:200,size:"large",className:"search-style",onChange:function(e){g(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5730\u5740"})}),Object(H.jsx)("div",{style:{color:"red",width:"100%",textAlign:"center",marginTop:"10px",display:"".concat(S?"block":"none")},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]}),t?Object(H.jsx)(R.a,{xs:{span:24},md:{span:7},children:Object(H.jsx)(z.a.Item,{name:["amount"],rules:[{validator:V}],label:"Amount",required:!0,children:Object(H.jsx)(W.a,{min:"1",size:"large",className:"search-style input-amount-transfer input-sell",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},placeholder:"Set amount"})})}):null]})})})})]})}function U(e){var t=e.orderDetail,n=(e.token,e.is1155),r=(e.available,e.getOwners1155,Object(b.b)()),i=Object(b.c)((function(e){return e})),l=i.web3,o=i.chainId,j=i.updateError,x=Object(u.h)().sellID,p=Object(d.useState)(!1),h=Object(s.a)(p,2),O=h[0],f=h[1],m=Object(d.useState)("0"),k=Object(s.a)(m,2),g=k[0],y=k[1],w=Object(d.useState)(!1),N=Object(s.a)(w,2),C=N[0],I=N[1],S=z.a.useForm(),E=Object(s.a)(S,1)[0],A=Object(d.useCallback)(Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.validateFields();case 2:if(!((t=e.sent)&&parseFloat(t.price)>0)){e.next=10;break}return I(!0),y("1"),e.next=8,r(Object(v.pb)(x,l.utils.toWei(t.price.toString(),"ether")));case 8:(n=e.sent)&&(console.log(n),f(!1),y("0"),I(!1),E.resetFields());case 10:case"end":return e.stop()}}),e)}))),[r,l.utils,x,E]),F=function(){f(!1),I(!1),y("0"),E.resetFields()};return Object(d.useEffect)((function(){"4001"===j?y("2"):"4000"===j?y("1"):"1"===j&&y("0")}),[j]),Object(H.jsxs)("div",{className:"gSzfBw",children:[Object(H.jsx)(D.a,{style:{background:"#6080B4",border:"none",borderRadius:"10px"},type:"primary",size:"large",onClick:function(){f(!0),y("1")},children:"\u66f4\u6539\u4ef7\u683c"},"change"),Object(H.jsxs)(T.a,{title:Object(H.jsx)("h3",{className:"textmode mgb-0",children:"\u66f4\u6539\u4ef7\u683c"}),visible:O,onCancel:F,footer:Object(H.jsx)("div",{}),centered:!0,children:[Object(H.jsx)(z.a,{form:E,className:"input-sell",layout:"vertical",children:Object(H.jsxs)(P.a,{gutter:[5,10],children:[Object(H.jsxs)(R.a,{xs:{span:24},md:{span:n?17:24},children:[Object(H.jsx)("div",{className:"ant-col ant-form-item-label",children:Object(H.jsx)("label",{htmlFor:"price",className:"ant-form-item-required",title:"Price",children:"\u4ef7\u683c"})}),Object(H.jsx)(L.a.Group,{compact:!0,label:"Price",children:Object(H.jsx)(z.a.Item,{name:["price"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ef7\u683c"}],className:"input-price",children:Object(H.jsx)(W.a,{style:{width:"460px",borderRadius:"0px"},min:"0.01",size:"large",className:"search-style",placeholder:"\u8bf7\u8f93\u5165\u6700\u65b0\u4ef7\u683c",addonAfter:4===o?"ETH":"BNB"})})})]}),n?Object(H.jsx)(R.a,{xs:{span:24},md:{span:7},children:Object(H.jsx)(L.a.Group,{children:Object(H.jsx)(z.a.Item,{required:!0,name:["amount"],label:"Amount",className:"input-amount-sell",children:Object(H.jsx)(W.a,{min:"1",size:"large",defaultValue:t?t.amount:0,formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},placeholder:"Amount",disabled:!0})})})}):Object(H.jsx)(H.Fragment,{})]})}),Object(H.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",marginTop:"40px"},children:[Object(H.jsx)(D.a,{style:{width:"210px",height:"42px",background:"#fff",borderRadius:"10px",border:"1px solid #6080b4",color:"#6080b4"},size:"large",onClick:F,className:"btn-cancel-sell",children:"\u53d6\u6d88"}),"1"===g?Object(H.jsx)(M.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:Object(H.jsx)(D.a,{onClick:function(){return A()},type:"primary",loading:C,style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff"},children:C?"\u66f4\u6539\u4e2d":"\u66f4\u6539\u4ef7\u683c"})},"update"):"2"===g?Object(H.jsxs)(M.b,{style:{display:"flex",flexDirection:"column",height:"60px"},children:[Object(H.jsx)(D.a,{onClick:function(){return A()},type:"primary",style:{width:"210px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",color:"#fff",marginLeft:"20px"},children:"\u518d\u8bd5\u4e00\u6b21"}),Object(H.jsx)("div",{style:{color:"red"},children:"\u9519\u8bef\uff1a\u60a8\u5728\u94b1\u5305\u4e2d\u62d2\u7edd\u652f\u4ed8"})]},"tryAgain"):null]})]})]})}var G=function(e,t){var n=Object(d.useRef)();Object(d.useEffect)((function(){n.current=e})),Object(d.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])};function K(e){var t=e.status,n=e.token,r=e.orderDetail,a=e.is1155,c=e.available,s=e.web3,i=e.getOwners1155,l=e.chainId,o=Object(b.c)((function(e){return e})).walletAddress;switch(G((function(){o&&k.a.dispatch(Object(v.fb)(o))}),3e3),t){case 3:return Object(H.jsx)("div",{className:"PE",children:Object(H.jsxs)("div",{className:"actions-btn",children:[Object(H.jsx)(U,{orderDetail:r,token:n,is1155:a,available:c,getOwners1155:i}),Object(H.jsx)("div",{className:"cAFwWB"}),Object(H.jsx)(q,{orderDetail:r,getOwners1155:i,chainId:l})]})});case 2:return Object(H.jsx)("div",{className:"PE",children:Object(H.jsxs)("div",{className:"actions-btn",style:{display:"flex",justifyContent:"space-between"},children:[Object(H.jsx)(V,{token:n,is1155:a,available:c,getOwners1155:i}),Object(H.jsx)("div",{className:"cAFwWB"}),Object(H.jsx)(J,{token:n,is1155:a,available:c,web3:s,getOwners1155:i})]})});case 1:return Object(H.jsx)(H.Fragment,{});default:return Object(H.jsx)("div",{})}}n(2366),n(2367);function X(e){var t=e.visible,n=e.orderDetail,r=e.buy,i=e.setCheckout1155,l=Object(b.c)((function(e){return e})),o=l.web3,u=l.balance,j=l.walletAddress,x=z.a.useForm(),p=Object(s.a)(x,1)[0],h=Object(d.useState)(n?parseFloat(o.utils.fromWei(n.price,"ether")):0),O=Object(s.a)(h,2),f=O[0],m=O[1],v=Object(d.useState)(1),k=Object(s.a)(v,2),g=k[0],w=k[1],N=Object(d.useState)(!1),I=Object(s.a)(N,2),S=I[0],E=I[1],A=Object(d.useCallback)(function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("0x0000000000000000000000000000000000000000"!==t.tokenPayment){e.next=6;break}t.price>parseInt(1e18*u)?E(!0):E(!1),e.next=10;break;case 6:return e.next=8,Object(y.b)(t.tokenPayment,j);case 8:n=e.sent,t.price>parseInt(n)?E(!0):E(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,j]);Object(d.useEffect)((function(){j&&n&&A(Object(C.a)(Object(C.a)({},n),{},{amount:g,price:parseInt(g)*parseFloat(n.price)}))}),[A,u,n,j,g]);var F=function(){i(!1)},B=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.validateFields();case 2:(t=e.sent)&&t.amount>=1&&r(Object(C.a)(Object(C.a)({},n),{},{amount:t.amount}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Enter amount")));case 4:if(!(parseInt(r)>parseInt(n.amount)-parseInt(n.soldAmount))){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("Amount greater available")));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(H.jsxs)(T.a,{title:Object(H.jsx)("p",{className:"textmode mgb-0",style:{fontSize:"28px",fontWeight:"900"},children:"Checkout"}),visible:t,footer:[Object(H.jsx)(D.a,{shape:"round",size:"large",onClick:function(){return F()},children:"Cancel"},"cancel"),S?Object(H.jsx)(D.a,{type:"primary",shape:"round",size:"large",disabled:!0,children:"Insufficient"},"insufficient"):Object(H.jsx)(D.a,{type:"primary",shape:"round",size:"large",onClick:function(){return B()},children:"Payment"},"payment")],centered:!0,width:550,onCancel:F,children:[Object(H.jsx)("p",{className:"textmode mgb-0",style:{fontSize:"14px",fontWeight:"900"},children:"Choose the amount of order you want to buy"}),Object(H.jsxs)(z.a,{form:p,className:"input-checkout-1155",layout:"vertical",children:[Object(H.jsx)(L.a.Group,{children:Object(H.jsx)(z.a.Item,{required:!0,name:["amount"],rules:[{validator:P}],label:"Enter amount. ".concat(n?parseInt(n.amount)-parseInt(n.soldAmount):0," available"),className:"input-amount-checkout1155",children:Object(H.jsx)(W.a,{min:"1",size:"large",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},onChange:function(e){w(e=e||1),A(Object(C.a)(Object(C.a)({},n),{},{amount:e,price:parseInt(e)*parseFloat(n.price)})),m(parseInt(e)*parseFloat(o.utils.fromWei(n.price,"ether")))},placeholder:"Amount"})})}),Object(H.jsx)(L.a.Group,{children:Object(H.jsx)(z.a.Item,{label:"Total payment",children:Object(H.jsx)(L.a,{disabled:!0,size:"large",value:"".concat(f).replace(/\B(?=(\d{3})+(?!\d))/g,","),suffix:"BNB"})})})]})]})}var Z=n(118);function _(e){var t=e.token,n=e.orderDetail,r=e.is1155,i=e.id,l=e.addressToken,o=e.getOwners1155,j=e.setOrderDetail,x=e.bigStyle,p=Object(u.f)(),h=Object(d.useState)(!1),O=Object(s.a)(h,2),f=O[0],m=O[1],k=Object(b.c)((function(e){return e})),g=k.balance,w=k.chainId,N=k.walletAddress,C=k.allowanceToken,I=k.web3,S=k.buyError,E=Object(d.useState)(!1),A=Object(s.a)(E,2),F=A[0],B=A[1],z=Object(d.useState)(!1),P=Object(s.a)(z,2),R=P[0],L=P[1],W=Object(d.useState)(!1),M=Object(s.a)(W,2),Y=M[0],Q=M[1],V=Object(d.useState)(!1),q=Object(s.a)(V,2),J=q[0],U=q[1],G=Object(d.useState)(!1),K=Object(s.a)(G,2),_=K[0],$=K[1],ee=Object(d.useState)(""),te=Object(s.a)(ee,2),ne=te[0],re=te[1],ae=Object(b.b)();Object(d.useEffect)((function(){var e=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.eth.getBalance(N);case 2:t=e.sent,re(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();N&&e(),"4001"===S?($(!1),U(!0)):"4000"===S?U(!1):"1"===S&&(j(null),$(!1),Q(!1))}),[S,j,N,I.eth]);var ce=Object(d.useCallback)(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if("0x0000000000000000000000000000000000000000"!==t.tokenPayment){e.next=7;break}B(!0),t.price>parseInt(1e18*g)?m(!0):m(!1),e.next=15;break;case 7:return e.next=9,Object(y.a)(t.tokenPayment,N,w);case 9:return n=e.sent,e.next=12,Object(y.b)(t.tokenPayment,N);case 12:r=e.sent,t.price>parseInt(r)?m(!0):m(!1),t.price<=parseInt(n)?B(!0):B(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[g,N,w]);Object(d.useEffect)((function(){N&&ce(n)}),[ce,N,C,n]);var se=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ae(Object(v.T)(t,r));case 4:if(!(n=e.sent).status||!n.link){e.next=10;break}if(!r){e.next=9;break}return e.next=9,o();case 9:p.push({pathname:"/token/".concat(w,"/").concat(l,"/").concat(i,"/null")});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ae(Object(v.S)(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(H.jsx)(H.Fragment,{children:N?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(T.a,{title:Object(H.jsx)("h3",{className:"textmode mgb-0",children:"\u8d2d\u4e70"}),visible:Y,onCancel:function(){Q(!1),$(!1),U(!1)},centered:!0,footer:[Object(H.jsx)(D.a,{style:{width:"280px",height:"42px",background:"#6080b4",borderRadius:"10px",border:"none",marginBottom:"10px"},loading:_,type:"primary",shape:"round",size:"large",onClick:function(){return $(!0),U(!1),void se(n)},children:_?"\u652f\u4ed8\u4e2d":"\u8d2d\u4e70"},"buy"),Object(H.jsx)("div",{style:{color:"red",marginTop:"5px",display:"".concat(J?"block":"none")},children:"\u9519\u8bef\uff1a\u652f\u4ed8\u5931\u8d25"},"red")],children:[Object(H.jsxs)("div",{className:"sell-img",style:{borderTop:"1px solid rgba(96,128,180,0.09)",borderBottom:"1px solid rgba(96,128,180,0.09)",padding:"45px 0",display:"flex",alignItems:"center"},children:[Object(H.jsx)("img",{alt:"img-nft",src:t.image}),Object(H.jsxs)("div",{children:[Object(H.jsx)("div",{className:"textmode",children:t.name}),Object(H.jsx)("div",{style:{color:"rgba(0,0,0,0.50)"},children:t.nameCollection}),Object(H.jsxs)("div",{className:"textmode",children:["\u5355\u4ef7: ",Object(H.jsx)("span",{style:{fontWeight:"600",fontSize:"16px"},children:I.utils.fromWei(n.price.toString(),"ether")})," ",4===w?"ETH":"BNB"]})]})]}),Object(H.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:["\u8d26\u6237\u4f59\u989d:",Object(H.jsxs)("span",{children:[I.utils.fromWei(ne.toString(),"ether").slice(0,6)," ",4===w?"ETH":"BNB"]})]})]}),Object(H.jsx)(X,{visible:R,orderDetail:n,buy:se,insufficient:f,setCheckout1155:L}),F?f?Object(H.jsx)(D.a,{type:"text",disabled:!0,shape:"round",size:"small",children:"\u4f59\u989d\u4e0d\u8db3"}):x?Object(H.jsx)("div",{className:"buy-big-btn",onClick:function(){return r?le():Q(!0)},children:"\u7acb\u5373\u8d2d\u4e70"}):Object(H.jsx)(D.a,{className:"buy-btn",type:"link",shape:"round",size:"small",onClick:function(){return r?le():Q(!0)},children:"\u8d2d\u4e70"}):Object(H.jsx)(D.a,{type:"text",shape:"round",size:"small",onClick:ie,children:"\u6388\u6743"})]}):Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(D.a,{style:{color:"#6080B4",fontWeight:"bold",fontSize:"15px"},type:"text",shape:"round",size:"small",onClick:Z.b,children:"\u8d2d\u4e70"})})})}var $=n(937),ee=n(2368),te=n.n(ee),ne=n(228),re=i.a.useBreakpoint;function ae(){var e=Object(b.c)((function(e){return e})),t=e.web3,n=e.walletAddress,r=e.sellOrderList,i=e.availableSellOrder721,p=e.market,O=e.chainId,f=e.nftList,m=e.convertErc1155Tokens,k=e.availableSellOrder1155,N=e.erc1155Tokens,C=e.infoCollections,S=e.orbitdb,A=Object(u.h)(),B=A.chainID,z=A.addressToken,D=A.id,T=A.sellID,P=re().lg;console.log();var R=Object(b.b)(),L=Object(u.f)(),W=Object(d.useState)(null),M=Object(s.a)(W,2),Y=M[0],Q=M[1],V=Object(d.useState)(null),q=Object(s.a)(V,2),J=q[0],U=q[1],G=Object(d.useState)(!1),X=Object(s.a)(G,2),ee=X[0],ae=X[1],ce=Object(d.useState)(),se=Object(s.a)(ce,2),ie=se[0],le=se[1],oe=Object(d.useState)(1),de=Object(s.a)(oe,2),be=de[0],ue=de[1],je=Object(d.useState)([]),xe=Object(s.a)(je,2),pe=xe[0],he=xe[1],Oe=Object(d.useState)([]),fe=Object(s.a)(Oe,2),me=fe[0],ve=fe[1],ke=Object(d.useState)(1),ge=Object(s.a)(ke,2),ye=ge[0],we=ge[1],Ne=Object(d.useState)(null),Ce=Object(s.a)(Ne,2),Ie=Ce[0],Se=Ce[1],Ee=Object(d.useState)(!0),Ae=Object(s.a)(Ee,2),Fe=Ae[0],Be=Ae[1],ze=Object(d.useState)(null),De=Object(s.a)(ze,2),Te=De[0],Pe=De[1];Object(d.useEffect)((function(){parseInt(O)!==parseInt(B)&&Object(Z.d)(B,n)}),[n,O,B]);var Re=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.a)(t,n);case 2:if(!(r=e.sent)||!pe[0]){e.next=12;break}return e.next=6,r.get(pe[0].owner.toLowerCase()+"_profile");case 6:return c=e.sent,e.next=9,r.get("".concat(z,"_").concat(O,"_").concat(D,"_history"));case 9:s=e.sent,R(Object(v.ib)(s)),Pe(c);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){S&&pe&&Re("/orbitdb/zdpuAoo1YYEnqQWrj5UezXyhMyTcfFDYo85a7Hw8ce9RKw6p2/dev",S)}),[S,pe[0]]),Object(d.useEffect)((function(){var e=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(Object(v.eb)());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var t=setTimeout((function(){e(),e()}),500);return function(){clearTimeout(t)}}),[R]),Object(d.useEffect)((function(){!function(e,t,n,r,a,c,s){g.apply(this,arguments)}(t,f,z,D,N,we,U)}),[t,f,z,D,N,C]);var Le=Object(d.useCallback)(Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p&&w(m,z,D,O,p,he,ve);case 1:case"end":return e.stop()}}),e)}))),[m,z,D,O,p]),We=Object(d.useCallback)(Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&r&&i&&f)){e.next=5;break}return e.next=3,f.methods.isERC1155(z).call();case 3:e.sent?(Le(),ae(!0),Number.isInteger(parseInt(T))&&"null"!==T?E(i,k,f,r,n,t,T,ue,le,L):F(n,ue,z,D,O,t)):I(z,i,D,p,f,r,n,t,ue,he,ve,le,L,T);case 5:case"end":return e.stop()}}),e)}))),[z,i,k,D,p,f,r,n,t,T,Le,O,L]);Object(d.useEffect)((function(){We()}),[We]);var Me=Object(d.useCallback)(Object(c.a)(a.a.mark((function e(){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ie||!O){e.next=14;break}return e.next=3,t.utils.fromWei(ie.price,"ether");case 3:if(n=e.sent,4!==O){e.next=10;break}return e.next=7,Object(y.e)(n);case 7:r=e.sent,e.next=13;break;case 10:return e.next=12,Object(y.d)(n);case 12:r=e.sent;case 13:Se(r);case 14:case"end":return e.stop()}}),e)}))),[ie,t.utils,O]);Object(d.useEffect)((function(){return!Ie&&Fe&&Me(),function(){Be(!1)}}),[Me,Ie,Fe]);var Ye=Object(d.useCallback)(Object(c.a)(a.a.mark((function e(){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z||!D){e.next=6;break}return n=new t.eth.Contract(h.abi,z),e.next=4,n.methods.tokenURI(D).call();case 4:r=e.sent,Q(r);case 6:case"end":return e.stop()}}),e)}))),[t,z,D]);return Object(d.useEffect)((function(){Ye()}),[Ye]),Object(H.jsx)("div",{style:{width:"100%",background:"#f7f8fb"},children:Object(H.jsx)("div",{className:"detail-page center",children:Object(H.jsx)("div",{className:"body-page",children:J?Object(H.jsx)("div",{className:"detail-main",children:Object(H.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[P?Object(H.jsxs)("div",{className:"info-wrap-left",children:[Object(H.jsx)("div",{className:"expand-img-nft",children:Object(H.jsx)("div",{className:"image-label center",children:Object(H.jsx)(l.a,{alt:"img-nft",src:J.image})})}),Object(H.jsx)("div",{className:"description-nft",children:Object(H.jsxs)("div",{className:"content-properties",children:[Object(H.jsx)("div",{className:"title-tab-properties",children:Object(H.jsx)("h3",{className:"nft-h3",children:"\u7b80\u4ecb"})}),Object(H.jsx)("div",{className:"detail-des textmode",children:J.description})]})}),Object(H.jsx)("div",{className:"properties-nft",children:Object(H.jsxs)("div",{className:"content-properties",children:[Object(H.jsx)("div",{className:"title-tab-properties",children:Object(H.jsx)("h3",{className:"nft-h3",children:"\u5c5e\u6027"})}),Object(H.jsx)("div",{className:"list-properties",children:Object(H.jsx)("div",{className:"items-properties",children:J.attributes?J.attributes.map((function(e,t){return Object(H.jsxs)("div",{className:"item-properties",children:[Object(H.jsx)("div",{className:"name-properties",children:e.trait_type}),Object(H.jsx)("div",{className:"value-properties textmode",children:e.display_type&&"date"===e.display_type.toLowerCase()&&te()(e.value).isValid()?te()(e.value.toString().length<13?1e3*e.value:e.value).format("DD-MM-YYYY"):e.value})]},t)})):null})})]})})]}):null,Object(H.jsxs)("div",{className:"info-wrap-right",children:[Object(H.jsxs)("div",{className:"info-order-nft",children:[Object(H.jsx)("div",{className:"detail-title",children:Object(H.jsx)("h1",{children:J.name})}),"null"!==T?Object(H.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(H.jsxs)("div",{className:"show-price",children:[Object(H.jsx)("div",{children:ie?"".concat(t.utils.fromWei(ie.price,"ether").slice(0,6)+"".concat(4===O?" ETH":" BNB")):Object(H.jsx)(o.a,{className:"textmode",style:{fontSize:"24px"}})}),Object(H.jsx)("div",{className:"price",children:ie?"\u2248$ ".concat(Ie):""})]}),Object(H.jsx)("span",{className:"width100",style:{textAlign:"end",margin:"30px 20px 0 0"},children:!n||n&&ie&&"null"!==T&&ie.seller.toLowerCase()!==n.toLowerCase()?Object(H.jsx)(_,{token:J,orderDetail:ie,is1155:ee,id:D,addressToken:z,getOwners1155:Le,setOrderDetail:le,bigStyle:!0}):null})]}):null,Object(H.jsxs)("div",{className:"collections-nft",children:[Object(H.jsxs)("div",{style:{fontSize:"16px"},children:[Object(H.jsxs)("div",{className:"textBlack",children:["\u4f5c\u8005",Object(H.jsx)("span",{style:{color:"rgba(0,0,0,0.30)"},children:"\uff0810% \u7248\u7a0e\uff09"})]}),J.nameCollection]}),Object(H.jsxs)("div",{style:{margin:"0 45px"},children:[Object(H.jsx)("div",{className:"textBlack",children:"\u4f5c\u54c1\u96c6"}),Object(H.jsx)(j.b,{to:"/collection/detail/".concat(z),children:J.nameCollection})]}),Object(H.jsxs)("div",{children:[Object(H.jsx)("div",{className:"textBlack",children:"\u6301\u6709\u8005"}),pe.map((function(e,t){var n;return Object(H.jsx)("div",{className:"avatar-link-available",children:Object(H.jsx)("div",{className:"link-and-available",children:Object(H.jsx)(j.b,{to:"/profile/index/".concat(O,"/").concat(e.owner.toLowerCase()),className:"owner",children:Te&&(null===Te||void 0===Te||null===(n=Te.userName)||void 0===n?void 0:n.length)>1?Te.userName:Object(H.jsx)("strong",{children:"".concat(e.owner.slice(0,8),"...").concat(e.owner.slice(e.owner.length-6,e.owner.length))})})})},t)}))]})]})]}),Object(H.jsxs)("div",{className:"purchase-nft",children:[Object(H.jsx)("h3",{className:"nft-h3",children:"\u51fa\u552e\u5217\u8868"}),Object(H.jsxs)("div",{children:[Object(H.jsxs)("div",{className:"order-title",children:[Object(H.jsx)("span",{className:"width100",children:"\u5355\u4ef7"}),Object(H.jsx)("span",{className:"width100",children:"\u6570\u91cf"}),Object(H.jsx)("span",{className:"width100",children:"\u5356\u5bb6"})]}),Object(H.jsxs)("div",{className:"order-List",children:[Object(H.jsx)("span",{className:"width100",children:ie&&"null"!==T?Object(H.jsx)("div",{className:"title-and-price",children:Object(H.jsxs)("span",{className:"price-eth color-black",children:[t.utils.fromWei(ie.price,"ether").slice(0,6),4===O?" ETH":" BNB"]})}):Object(H.jsx)(H.Fragment,{children:"--"})}),Object(H.jsx)("span",{className:"width100",children:ie&&"null"!==T?Object(H.jsx)("div",{className:"color-black",children:me?me[0].value:1}):Object(H.jsx)(H.Fragment,{children:"--"})}),Object(H.jsx)("span",{className:"width100",children:ie&&"null"!==T?Object(H.jsx)("div",{children:Object(H.jsx)(j.b,{to:"/profile/index/".concat(O,"/").concat(ie.seller.toLowerCase()),className:"owner",children:Te?Te.userName:Object(H.jsx)("strong",{children:"".concat(ie.seller.slice(0,8),"...").concat(ie.seller.slice(ie.seller.length-6,ie.seller.length))})})}):Object(H.jsx)(H.Fragment,{children:"--"})}),Object(H.jsx)("span",{className:"width100",style:{textAlign:"end"},children:!n||n&&ie&&"null"!==T&&ie.seller.toLowerCase()!==n.toLowerCase()?Object(H.jsx)(_,{token:J,orderDetail:ie,is1155:ee,id:D,addressToken:z,getOwners1155:Le,setOrderDetail:le}):null})]})]}),Object(H.jsx)("div",{className:"style-purchase",children:Object(H.jsx)("div",{className:"actions-nft",children:Object(H.jsx)(K,{status:be,token:J,orderDetail:ie,is1155:ee,available:ye,web3:t,chainId:O})})})]}),Object(H.jsxs)("div",{className:"nft-details",children:[Object(H.jsx)("h3",{className:"nft-h3",children:"\u8be6\u60c5"}),Object(H.jsxs)("div",{className:"flex-between mb15",children:[Object(H.jsx)("div",{className:"color-black",children:"\u5408\u7ea6\u5730\u5740"}),Object(H.jsx)("div",{children:Object(H.jsx)("a",{href:"".concat(Object($.a)(O),"/address/").concat(z),target:"_blank",rel:"noreferrer",className:"href-to-address-contract",children:P?z:"".concat(z.slice(0,8),"...").concat(z.slice(z.length-6,z.length))})})]}),Object(H.jsxs)("div",{className:"flex-between mb15",children:[Object(H.jsx)("div",{className:"color-black",children:"Token ID"}),Object(H.jsx)("div",{className:"color-black",children:D})]}),Object(H.jsxs)("div",{className:"flex-between mb15",children:[Object(H.jsx)("div",{className:"color-black",children:"NFT\u6807\u51c6"}),Object(H.jsx)("div",{className:"color-black",children:"ERC-721"})]}),Object(H.jsxs)("div",{className:"flex-between",children:[Object(H.jsx)("div",{className:"color-black",children:"\u5143\u6570\u636e"}),Object(H.jsx)("div",{className:"href-to-address-contract",children:Object(H.jsx)("a",{href:Y,target:"_blank",rel:"noreferrer",className:"href-to-address-contract",children:"IPFS"})})]})]})]})]})}):Object(H.jsx)("div",{className:"center",style:{width:"100%",minHeight:"200px"},children:Object(H.jsx)(x.a,{})})})})})}}}]);
//# sourceMappingURL=8.3f29b8c1.chunk.js.map